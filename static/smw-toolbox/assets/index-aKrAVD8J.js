var Tu=Object.defineProperty;var Eu=(t,e,s)=>e in t?Tu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var n=(t,e,s)=>Eu(t,typeof e!="symbol"?e+"":e,s);import{T as ie,q as w,u as c,y as tn,_ as eo,H as Ru,h as St,A as Oe,a as Wt,k as Wi,b as ii,F as mr,c as Du,R as Nu,d as cc,l as Lu,B as Mu}from"./uiw-N_vskDL9.js";import{a6 as Bu,a7 as $u,a8 as Vu,a9 as Fu,N as Co,aa as Ca,ab as zu,ac as Qu,a4 as ye,ad as Wu,ae as Uu,f as Zu}from"./codemirror-CrYJ7M0P.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function s(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(a){if(a.ep)return;a.ep=!0;const r=s(a);fetch(a.href,r)}})();function Fc(){}function sn(t,e,s){return Math.min(Math.max(t,e),s)}function vt(t){return t.filter(e=>e[1]).map(e=>e[0]).join(" ")}function Xu(t,e){for(let s=0;s<t.length;++s)if(e(t[s],s))return s;return t.length}function Yu(t,e){for(let s=t.length-1;s>=0;--s)if(e(t[s],s))return s;return-1}function ju(t,e,s){const i=t.length-1;return[...t.slice(0,e),s,...t.slice(e,i)]}function Oo(t,e,s){return[...t.slice(0,e),s,...t.slice(e+1)]}function zc(t,e,s){return[...t.slice(0,e),...t.slice(e+1),s]}function lc(t){return t!=="0"&&t!==" "&&t!="-"}function Ha(t,e){return(t%e+e)%e}function jt(t){return!t}function as(t){return Array.from(Array(t).keys())}function gr(t,e,s){return e<=t&&t<=s}function Qc(t){return t.reduce((e,s)=>e+s,0)}function zr(t,e,s=" "){const i=s.repeat(Math.ceil(Math.max((e-t.length)/2,0))),a=s.repeat(Math.floor(Math.max((e-t.length)/2,0)));return`${i}${t}${a}`}function nn(t,e,s){return`${s.repeat(Math.max(e-t.length,0))}${t}`}function Ke(t){return!0}function Wc(t,e){const s=t.toString(2);return e!==void 0?nn(s,e,"0"):s}function br(t,e){const s=t.toString(10);return e!==void 0?nn(s,e,"0"):s}function it(t,e){const s=t.toString(16).toUpperCase();return e!==void 0?nn(s,e,"0"):s}function Uc(){return(document.activeElement??document.body)===document.body}const Hu=/^\.*[a-zA-Z0-9_]*$/,Gu=/^\.*[a-zA-Z0-9_]*:$/;function Pt({isBorderless:t=!1,isSelected:e=!1,label:s,onClick:i,tooltip:a,tooltipPosition:r="bottom"}){const o=ie(()=>vt([["Button",!0],[r,!!a],["borderless",t],["selected",e]]),[e]),l=w(d=>{d.preventDefault(),d.stopPropagation(),i()},[i]),u=w(d=>{(d.key==="Enter"||d.key===" ")&&(d.preventDefault(),d.stopPropagation(),i())},[i]);return c("div",{class:o,onMouseDown:l,onKeyDown:u,tabIndex:0,"data-tooltip":a,children:s})}function an(t){const e=w(s=>{for(const i of t)if(s.key===i.key&&(i.ctrl===void 0||!!i.ctrl===s.ctrlKey)&&(i.meta===void 0||!!i.meta===s.metaKey)&&(i.shift===void 0||!!i.shift===s.shiftKey)){i.onPress()&&(s.preventDefault(),s.stopPropagation());return}},[t]);tn(()=>(window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)),[e])}/**
 * @license lucide-preact v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qu=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ku=(...t)=>t.filter((e,s,i)=>!!e&&i.indexOf(e)===s).join(" ");/**
 * @license lucide-preact v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ju={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-preact v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eh=({color:t="currentColor",size:e=24,strokeWidth:s=2,absoluteStrokeWidth:i,children:a,iconNode:r,class:o="",...l})=>eo("svg",{...Ju,width:String(e),height:e,stroke:t,"stroke-width":i?Number(s)*24/Number(e):s,class:["lucide",o].join(" "),...l},[...r.map(([u,d])=>eo(u,d)),...Ru(a)]);/**
 * @license lucide-preact v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=(t,e)=>{const s=({class:i="",children:a,...r})=>eo(eh,{...r,iconNode:e,class:Ku(`lucide-${qu(t)}`,i)},a);return s.displayName=`${t}`,s};/**
 * @license lucide-preact v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const th=rt("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-preact v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=rt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-preact v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zc=rt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-preact v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sh=rt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-preact v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xc=rt("ClipboardPaste",[["path",{d:"M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z",key:"1pp7kr"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10",key:"2ik1ml"}],["path",{d:"m17 10 4 4-4 4",key:"vp2hj1"}]]);/**
 * @license lucide-preact v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ih=rt("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-preact v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Io=rt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-preact v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nh=rt("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-preact v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ah=rt("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-preact v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rh=rt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-preact v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oh=rt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-preact v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ch=rt("Pipette",[["path",{d:"m2 22 1-1h3l9-9",key:"1sre89"}],["path",{d:"M3 21v-3l9-9",key:"hpe2y6"}],["path",{d:"m15 6 3.4-3.4a2.1 2.1 0 1 1 3 3L18 9l.4.4a2.1 2.1 0 1 1-3 3l-3.8-3.8a2.1 2.1 0 1 1 3-3l.4.4Z",key:"196du1"}]]);/**
 * @license lucide-preact v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lh=rt("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-preact v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dh=rt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-preact v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uh=rt("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-preact v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=rt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Oa({href:t,label:e}){return c("a",{className:"ExternalLink",href:t,target:"_blank",children:[e," ",c(nh,{size:"0.8em"})]})}function Yc({children:t,className:e="",header:s}){const i=vt([["Section",!0],[e,!!e]]);return c("div",{class:i,children:[s,c("div",{class:"Section_Children",children:t})]})}function Ct({children:t,label:e,isVisible:s,onChange:i}){const a=w(()=>i(!s),[s]),r=vt([["Section",!0],["collapsible",!0],["collapsed",!s]]),o=w(u=>{u.preventDefault(),a()},[a]),l=w(u=>{(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),a())},[a]);return c(Yc,{className:r,header:c("div",{class:"Section_Header",onKeyDown:l,onMouseDown:o,tabIndex:0,children:[c("span",{children:e}),s?c(sh,{size:"1.5em"}):c(Zc,{size:"1.5em"})]}),children:t})}var se;(function(t){t.assertEqual=a=>a;function e(a){}t.assertIs=e;function s(a){throw new Error}t.assertNever=s,t.arrayToEnum=a=>{const r={};for(const o of a)r[o]=o;return r},t.getValidEnumValues=a=>{const r=t.objectKeys(a).filter(l=>typeof a[a[l]]!="number"),o={};for(const l of r)o[l]=a[l];return t.objectValues(o)},t.objectValues=a=>t.objectKeys(a).map(function(r){return a[r]}),t.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const r=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&r.push(o);return r},t.find=(a,r)=>{for(const o of a)if(r(o))return o},t.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function i(a,r=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(r)}t.joinValues=i,t.jsonStringifyReplacer=(a,r)=>typeof r=="bigint"?r.toString():r})(se||(se={}));var to;(function(t){t.mergeShapes=(e,s)=>({...e,...s})})(to||(to={}));const A=se.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Cs=t=>{switch(typeof t){case"undefined":return A.undefined;case"string":return A.string;case"number":return isNaN(t)?A.nan:A.number;case"boolean":return A.boolean;case"function":return A.function;case"bigint":return A.bigint;case"symbol":return A.symbol;case"object":return Array.isArray(t)?A.array:t===null?A.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?A.promise:typeof Map<"u"&&t instanceof Map?A.map:typeof Set<"u"&&t instanceof Set?A.set:typeof Date<"u"&&t instanceof Date?A.date:A.object;default:return A.unknown}},S=se.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),hh=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class It extends Error{constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const s=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,s):this.__proto__=s,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const s=e||function(r){return r.message},i={_errors:[]},a=r=>{for(const o of r.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)i._errors.push(s(o));else{let l=i,u=0;for(;u<o.path.length;){const d=o.path[u];u===o.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(s(o))):l[d]=l[d]||{_errors:[]},l=l[d],u++}}};return a(this),i}static assert(e){if(!(e instanceof It))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,se.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=s=>s.message){const s={},i=[];for(const a of this.issues)a.path.length>0?(s[a.path[0]]=s[a.path[0]]||[],s[a.path[0]].push(e(a))):i.push(e(a));return{formErrors:i,fieldErrors:s}}get formErrors(){return this.flatten()}}It.create=t=>new It(t);const Ui=(t,e)=>{let s;switch(t.code){case S.invalid_type:t.received===A.undefined?s="Required":s=`Expected ${t.expected}, received ${t.received}`;break;case S.invalid_literal:s=`Invalid literal value, expected ${JSON.stringify(t.expected,se.jsonStringifyReplacer)}`;break;case S.unrecognized_keys:s=`Unrecognized key(s) in object: ${se.joinValues(t.keys,", ")}`;break;case S.invalid_union:s="Invalid input";break;case S.invalid_union_discriminator:s=`Invalid discriminator value. Expected ${se.joinValues(t.options)}`;break;case S.invalid_enum_value:s=`Invalid enum value. Expected ${se.joinValues(t.options)}, received '${t.received}'`;break;case S.invalid_arguments:s="Invalid function arguments";break;case S.invalid_return_type:s="Invalid function return type";break;case S.invalid_date:s="Invalid date";break;case S.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(s=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(s=`${s} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?s=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?s=`Invalid input: must end with "${t.validation.endsWith}"`:se.assertNever(t.validation):t.validation!=="regex"?s=`Invalid ${t.validation}`:s="Invalid";break;case S.too_small:t.type==="array"?s=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?s=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?s=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?s=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:s="Invalid input";break;case S.too_big:t.type==="array"?s=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?s=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?s=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?s=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?s=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:s="Invalid input";break;case S.custom:s="Invalid input";break;case S.invalid_intersection_types:s="Intersection results could not be merged";break;case S.not_multiple_of:s=`Number must be a multiple of ${t.multipleOf}`;break;case S.not_finite:s="Number must be finite";break;default:s=e.defaultError,se.assertNever(t)}return{message:s}};let jc=Ui;function ph(t){jc=t}function qa(){return jc}const Ka=t=>{const{data:e,path:s,errorMaps:i,issueData:a}=t,r=[...s,...a.path||[]],o={...a,path:r};if(a.message!==void 0)return{...a,path:r,message:a.message};let l="";const u=i.filter(d=>!!d).slice().reverse();for(const d of u)l=d(o,{data:e,defaultError:l}).message;return{...a,path:r,message:l}},fh=[];function I(t,e){const s=qa(),i=Ka({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,s,s===Ui?void 0:Ui].filter(a=>!!a)});t.common.issues.push(i)}class at{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,s){const i=[];for(const a of s){if(a.status==="aborted")return z;a.status==="dirty"&&e.dirty(),i.push(a.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,s){const i=[];for(const a of s){const r=await a.key,o=await a.value;i.push({key:r,value:o})}return at.mergeObjectSync(e,i)}static mergeObjectSync(e,s){const i={};for(const a of s){const{key:r,value:o}=a;if(r.status==="aborted"||o.status==="aborted")return z;r.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),r.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(i[r.value]=o.value)}return{status:e.value,value:i}}}const z=Object.freeze({status:"aborted"}),Ri=t=>({status:"dirty",value:t}),ut=t=>({status:"valid",value:t}),so=t=>t.status==="aborted",io=t=>t.status==="dirty",Bn=t=>t.status==="valid",$n=t=>typeof Promise<"u"&&t instanceof Promise;function Ja(t,e,s,i){if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function Hc(t,e,s,i,a){if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,s),s}var N;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(N||(N={}));var gn,bn;class ls{constructor(e,s,i,a){this._cachedPath=[],this.parent=e,this.data=s,this._path=i,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const dc=(t,e)=>{if(Bn(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const s=new It(t.common.issues);return this._error=s,this._error}}};function j(t){if(!t)return{};const{errorMap:e,invalid_type_error:s,required_error:i,description:a}=t;if(e&&(s||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:a}:{errorMap:(o,l)=>{var u,d;const{message:p}=t;return o.code==="invalid_enum_value"?{message:p??l.defaultError}:typeof l.data>"u"?{message:(u=p??i)!==null&&u!==void 0?u:l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:(d=p??s)!==null&&d!==void 0?d:l.defaultError}},description:a}}class H{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Cs(e.data)}_getOrReturnCtx(e,s){return s||{common:e.parent.common,data:e.data,parsedType:Cs(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new at,ctx:{common:e.parent.common,data:e.data,parsedType:Cs(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const s=this._parse(e);if($n(s))throw new Error("Synchronous parse encountered promise.");return s}_parseAsync(e){const s=this._parse(e);return Promise.resolve(s)}parse(e,s){const i=this.safeParse(e,s);if(i.success)return i.data;throw i.error}safeParse(e,s){var i;const a={common:{issues:[],async:(i=s==null?void 0:s.async)!==null&&i!==void 0?i:!1,contextualErrorMap:s==null?void 0:s.errorMap},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Cs(e)},r=this._parseSync({data:e,path:a.path,parent:a});return dc(a,r)}async parseAsync(e,s){const i=await this.safeParseAsync(e,s);if(i.success)return i.data;throw i.error}async safeParseAsync(e,s){const i={common:{issues:[],contextualErrorMap:s==null?void 0:s.errorMap,async:!0},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Cs(e)},a=this._parse({data:e,path:i.path,parent:i}),r=await($n(a)?a:Promise.resolve(a));return dc(i,r)}refine(e,s){const i=a=>typeof s=="string"||typeof s>"u"?{message:s}:typeof s=="function"?s(a):s;return this._refinement((a,r)=>{const o=e(a),l=()=>r.addIssue({code:S.custom,...i(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,s){return this._refinement((i,a)=>e(i)?!0:(a.addIssue(typeof s=="function"?s(i,a):s),!1))}_refinement(e){return new zt({schema:this,typeName:V.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return rs.create(this,this._def)}nullable(){return Rs.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ft.create(this,this._def)}promise(){return Xi.create(this,this._def)}or(e){return Qn.create([this,e],this._def)}and(e){return Wn.create(this,e,this._def)}transform(e){return new zt({...j(this._def),schema:this,typeName:V.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const s=typeof e=="function"?e:()=>e;return new jn({...j(this._def),innerType:this,defaultValue:s,typeName:V.ZodDefault})}brand(){return new Ao({typeName:V.ZodBranded,type:this,...j(this._def)})}catch(e){const s=typeof e=="function"?e:()=>e;return new Hn({...j(this._def),innerType:this,catchValue:s,typeName:V.ZodCatch})}describe(e){const s=this.constructor;return new s({...this._def,description:e})}pipe(e){return ia.create(this,e)}readonly(){return Gn.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const mh=/^c[^\s-]{8,}$/i,gh=/^[0-9a-z]+$/,bh=/^[0-9A-HJKMNP-TV-Z]{26}$/,_h=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,yh=/^[a-z0-9_-]{21}$/i,vh=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,wh=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,xh="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Qr;const kh=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Sh=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Ch=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Gc="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Oh=new RegExp(`^${Gc}$`);function qc(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function Ph(t){return new RegExp(`^${qc(t)}$`)}function Kc(t){let e=`${Gc}T${qc(t)}`;const s=[];return s.push(t.local?"Z?":"Z"),t.offset&&s.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${s.join("|")})`,new RegExp(`^${e}$`)}function Ih(t,e){return!!((e==="v4"||!e)&&kh.test(t)||(e==="v6"||!e)&&Sh.test(t))}class $t extends H{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==A.string){const r=this._getOrReturnCtx(e);return I(r,{code:S.invalid_type,expected:A.string,received:r.parsedType}),z}const i=new at;let a;for(const r of this._def.checks)if(r.kind==="min")e.data.length<r.value&&(a=this._getOrReturnCtx(e,a),I(a,{code:S.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),i.dirty());else if(r.kind==="max")e.data.length>r.value&&(a=this._getOrReturnCtx(e,a),I(a,{code:S.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),i.dirty());else if(r.kind==="length"){const o=e.data.length>r.value,l=e.data.length<r.value;(o||l)&&(a=this._getOrReturnCtx(e,a),o?I(a,{code:S.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):l&&I(a,{code:S.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),i.dirty())}else if(r.kind==="email")wh.test(e.data)||(a=this._getOrReturnCtx(e,a),I(a,{validation:"email",code:S.invalid_string,message:r.message}),i.dirty());else if(r.kind==="emoji")Qr||(Qr=new RegExp(xh,"u")),Qr.test(e.data)||(a=this._getOrReturnCtx(e,a),I(a,{validation:"emoji",code:S.invalid_string,message:r.message}),i.dirty());else if(r.kind==="uuid")_h.test(e.data)||(a=this._getOrReturnCtx(e,a),I(a,{validation:"uuid",code:S.invalid_string,message:r.message}),i.dirty());else if(r.kind==="nanoid")yh.test(e.data)||(a=this._getOrReturnCtx(e,a),I(a,{validation:"nanoid",code:S.invalid_string,message:r.message}),i.dirty());else if(r.kind==="cuid")mh.test(e.data)||(a=this._getOrReturnCtx(e,a),I(a,{validation:"cuid",code:S.invalid_string,message:r.message}),i.dirty());else if(r.kind==="cuid2")gh.test(e.data)||(a=this._getOrReturnCtx(e,a),I(a,{validation:"cuid2",code:S.invalid_string,message:r.message}),i.dirty());else if(r.kind==="ulid")bh.test(e.data)||(a=this._getOrReturnCtx(e,a),I(a,{validation:"ulid",code:S.invalid_string,message:r.message}),i.dirty());else if(r.kind==="url")try{new URL(e.data)}catch{a=this._getOrReturnCtx(e,a),I(a,{validation:"url",code:S.invalid_string,message:r.message}),i.dirty()}else r.kind==="regex"?(r.regex.lastIndex=0,r.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),I(a,{validation:"regex",code:S.invalid_string,message:r.message}),i.dirty())):r.kind==="trim"?e.data=e.data.trim():r.kind==="includes"?e.data.includes(r.value,r.position)||(a=this._getOrReturnCtx(e,a),I(a,{code:S.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),i.dirty()):r.kind==="toLowerCase"?e.data=e.data.toLowerCase():r.kind==="toUpperCase"?e.data=e.data.toUpperCase():r.kind==="startsWith"?e.data.startsWith(r.value)||(a=this._getOrReturnCtx(e,a),I(a,{code:S.invalid_string,validation:{startsWith:r.value},message:r.message}),i.dirty()):r.kind==="endsWith"?e.data.endsWith(r.value)||(a=this._getOrReturnCtx(e,a),I(a,{code:S.invalid_string,validation:{endsWith:r.value},message:r.message}),i.dirty()):r.kind==="datetime"?Kc(r).test(e.data)||(a=this._getOrReturnCtx(e,a),I(a,{code:S.invalid_string,validation:"datetime",message:r.message}),i.dirty()):r.kind==="date"?Oh.test(e.data)||(a=this._getOrReturnCtx(e,a),I(a,{code:S.invalid_string,validation:"date",message:r.message}),i.dirty()):r.kind==="time"?Ph(r).test(e.data)||(a=this._getOrReturnCtx(e,a),I(a,{code:S.invalid_string,validation:"time",message:r.message}),i.dirty()):r.kind==="duration"?vh.test(e.data)||(a=this._getOrReturnCtx(e,a),I(a,{validation:"duration",code:S.invalid_string,message:r.message}),i.dirty()):r.kind==="ip"?Ih(e.data,r.version)||(a=this._getOrReturnCtx(e,a),I(a,{validation:"ip",code:S.invalid_string,message:r.message}),i.dirty()):r.kind==="base64"?Ch.test(e.data)||(a=this._getOrReturnCtx(e,a),I(a,{validation:"base64",code:S.invalid_string,message:r.message}),i.dirty()):se.assertNever(r);return{status:i.value,value:e.data}}_regex(e,s,i){return this.refinement(a=>e.test(a),{validation:s,code:S.invalid_string,...N.errToObj(i)})}_addCheck(e){return new $t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...N.errToObj(e)})}url(e){return this._addCheck({kind:"url",...N.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...N.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...N.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...N.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...N.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...N.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...N.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...N.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...N.errToObj(e)})}datetime(e){var s,i;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(s=e==null?void 0:e.offset)!==null&&s!==void 0?s:!1,local:(i=e==null?void 0:e.local)!==null&&i!==void 0?i:!1,...N.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...N.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...N.errToObj(e)})}regex(e,s){return this._addCheck({kind:"regex",regex:e,...N.errToObj(s)})}includes(e,s){return this._addCheck({kind:"includes",value:e,position:s==null?void 0:s.position,...N.errToObj(s==null?void 0:s.message)})}startsWith(e,s){return this._addCheck({kind:"startsWith",value:e,...N.errToObj(s)})}endsWith(e,s){return this._addCheck({kind:"endsWith",value:e,...N.errToObj(s)})}min(e,s){return this._addCheck({kind:"min",value:e,...N.errToObj(s)})}max(e,s){return this._addCheck({kind:"max",value:e,...N.errToObj(s)})}length(e,s){return this._addCheck({kind:"length",value:e,...N.errToObj(s)})}nonempty(e){return this.min(1,N.errToObj(e))}trim(){return new $t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new $t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new $t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxLength(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}}$t.create=t=>{var e;return new $t({checks:[],typeName:V.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...j(t)})};function Ah(t,e){const s=(t.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,a=s>i?s:i,r=parseInt(t.toFixed(a).replace(".","")),o=parseInt(e.toFixed(a).replace(".",""));return r%o/Math.pow(10,a)}class As extends H{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==A.number){const r=this._getOrReturnCtx(e);return I(r,{code:S.invalid_type,expected:A.number,received:r.parsedType}),z}let i;const a=new at;for(const r of this._def.checks)r.kind==="int"?se.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),I(i,{code:S.invalid_type,expected:"integer",received:"float",message:r.message}),a.dirty()):r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(i=this._getOrReturnCtx(e,i),I(i,{code:S.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),a.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(i=this._getOrReturnCtx(e,i),I(i,{code:S.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),a.dirty()):r.kind==="multipleOf"?Ah(e.data,r.value)!==0&&(i=this._getOrReturnCtx(e,i),I(i,{code:S.not_multiple_of,multipleOf:r.value,message:r.message}),a.dirty()):r.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),I(i,{code:S.not_finite,message:r.message}),a.dirty()):se.assertNever(r);return{status:a.value,value:e.data}}gte(e,s){return this.setLimit("min",e,!0,N.toString(s))}gt(e,s){return this.setLimit("min",e,!1,N.toString(s))}lte(e,s){return this.setLimit("max",e,!0,N.toString(s))}lt(e,s){return this.setLimit("max",e,!1,N.toString(s))}setLimit(e,s,i,a){return new As({...this._def,checks:[...this._def.checks,{kind:e,value:s,inclusive:i,message:N.toString(a)}]})}_addCheck(e){return new As({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:N.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:N.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:N.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:N.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:N.toString(e)})}multipleOf(e,s){return this._addCheck({kind:"multipleOf",value:e,message:N.toString(s)})}finite(e){return this._addCheck({kind:"finite",message:N.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:N.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:N.toString(e)})}get minValue(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxValue(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&se.isInteger(e.value))}get isFinite(){let e=null,s=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(s===null||i.value>s)&&(s=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(s)&&Number.isFinite(e)}}As.create=t=>new As({checks:[],typeName:V.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...j(t)});class Ts extends H{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==A.bigint){const r=this._getOrReturnCtx(e);return I(r,{code:S.invalid_type,expected:A.bigint,received:r.parsedType}),z}let i;const a=new at;for(const r of this._def.checks)r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(i=this._getOrReturnCtx(e,i),I(i,{code:S.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),a.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(i=this._getOrReturnCtx(e,i),I(i,{code:S.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),a.dirty()):r.kind==="multipleOf"?e.data%r.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),I(i,{code:S.not_multiple_of,multipleOf:r.value,message:r.message}),a.dirty()):se.assertNever(r);return{status:a.value,value:e.data}}gte(e,s){return this.setLimit("min",e,!0,N.toString(s))}gt(e,s){return this.setLimit("min",e,!1,N.toString(s))}lte(e,s){return this.setLimit("max",e,!0,N.toString(s))}lt(e,s){return this.setLimit("max",e,!1,N.toString(s))}setLimit(e,s,i,a){return new Ts({...this._def,checks:[...this._def.checks,{kind:e,value:s,inclusive:i,message:N.toString(a)}]})}_addCheck(e){return new Ts({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:N.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:N.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:N.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:N.toString(e)})}multipleOf(e,s){return this._addCheck({kind:"multipleOf",value:e,message:N.toString(s)})}get minValue(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxValue(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}}Ts.create=t=>{var e;return new Ts({checks:[],typeName:V.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...j(t)})};class Vn extends H{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==A.boolean){const i=this._getOrReturnCtx(e);return I(i,{code:S.invalid_type,expected:A.boolean,received:i.parsedType}),z}return ut(e.data)}}Vn.create=t=>new Vn({typeName:V.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...j(t)});class ti extends H{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==A.date){const r=this._getOrReturnCtx(e);return I(r,{code:S.invalid_type,expected:A.date,received:r.parsedType}),z}if(isNaN(e.data.getTime())){const r=this._getOrReturnCtx(e);return I(r,{code:S.invalid_date}),z}const i=new at;let a;for(const r of this._def.checks)r.kind==="min"?e.data.getTime()<r.value&&(a=this._getOrReturnCtx(e,a),I(a,{code:S.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),i.dirty()):r.kind==="max"?e.data.getTime()>r.value&&(a=this._getOrReturnCtx(e,a),I(a,{code:S.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),i.dirty()):se.assertNever(r);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ti({...this._def,checks:[...this._def.checks,e]})}min(e,s){return this._addCheck({kind:"min",value:e.getTime(),message:N.toString(s)})}max(e,s){return this._addCheck({kind:"max",value:e.getTime(),message:N.toString(s)})}get minDate(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e!=null?new Date(e):null}}ti.create=t=>new ti({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:V.ZodDate,...j(t)});class er extends H{_parse(e){if(this._getType(e)!==A.symbol){const i=this._getOrReturnCtx(e);return I(i,{code:S.invalid_type,expected:A.symbol,received:i.parsedType}),z}return ut(e.data)}}er.create=t=>new er({typeName:V.ZodSymbol,...j(t)});class Fn extends H{_parse(e){if(this._getType(e)!==A.undefined){const i=this._getOrReturnCtx(e);return I(i,{code:S.invalid_type,expected:A.undefined,received:i.parsedType}),z}return ut(e.data)}}Fn.create=t=>new Fn({typeName:V.ZodUndefined,...j(t)});class zn extends H{_parse(e){if(this._getType(e)!==A.null){const i=this._getOrReturnCtx(e);return I(i,{code:S.invalid_type,expected:A.null,received:i.parsedType}),z}return ut(e.data)}}zn.create=t=>new zn({typeName:V.ZodNull,...j(t)});class Zi extends H{constructor(){super(...arguments),this._any=!0}_parse(e){return ut(e.data)}}Zi.create=t=>new Zi({typeName:V.ZodAny,...j(t)});class Ks extends H{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ut(e.data)}}Ks.create=t=>new Ks({typeName:V.ZodUnknown,...j(t)});class ys extends H{_parse(e){const s=this._getOrReturnCtx(e);return I(s,{code:S.invalid_type,expected:A.never,received:s.parsedType}),z}}ys.create=t=>new ys({typeName:V.ZodNever,...j(t)});class tr extends H{_parse(e){if(this._getType(e)!==A.undefined){const i=this._getOrReturnCtx(e);return I(i,{code:S.invalid_type,expected:A.void,received:i.parsedType}),z}return ut(e.data)}}tr.create=t=>new tr({typeName:V.ZodVoid,...j(t)});class Ft extends H{_parse(e){const{ctx:s,status:i}=this._processInputParams(e),a=this._def;if(s.parsedType!==A.array)return I(s,{code:S.invalid_type,expected:A.array,received:s.parsedType}),z;if(a.exactLength!==null){const o=s.data.length>a.exactLength.value,l=s.data.length<a.exactLength.value;(o||l)&&(I(s,{code:o?S.too_big:S.too_small,minimum:l?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),i.dirty())}if(a.minLength!==null&&s.data.length<a.minLength.value&&(I(s,{code:S.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),i.dirty()),a.maxLength!==null&&s.data.length>a.maxLength.value&&(I(s,{code:S.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),i.dirty()),s.common.async)return Promise.all([...s.data].map((o,l)=>a.type._parseAsync(new ls(s,o,s.path,l)))).then(o=>at.mergeArray(i,o));const r=[...s.data].map((o,l)=>a.type._parseSync(new ls(s,o,s.path,l)));return at.mergeArray(i,r)}get element(){return this._def.type}min(e,s){return new Ft({...this._def,minLength:{value:e,message:N.toString(s)}})}max(e,s){return new Ft({...this._def,maxLength:{value:e,message:N.toString(s)}})}length(e,s){return new Ft({...this._def,exactLength:{value:e,message:N.toString(s)}})}nonempty(e){return this.min(1,e)}}Ft.create=(t,e)=>new Ft({type:t,minLength:null,maxLength:null,exactLength:null,typeName:V.ZodArray,...j(e)});function ui(t){if(t instanceof ke){const e={};for(const s in t.shape){const i=t.shape[s];e[s]=rs.create(ui(i))}return new ke({...t._def,shape:()=>e})}else return t instanceof Ft?new Ft({...t._def,type:ui(t.element)}):t instanceof rs?rs.create(ui(t.unwrap())):t instanceof Rs?Rs.create(ui(t.unwrap())):t instanceof ds?ds.create(t.items.map(e=>ui(e))):t}class ke extends H{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),s=se.objectKeys(e);return this._cached={shape:e,keys:s}}_parse(e){if(this._getType(e)!==A.object){const d=this._getOrReturnCtx(e);return I(d,{code:S.invalid_type,expected:A.object,received:d.parsedType}),z}const{status:i,ctx:a}=this._processInputParams(e),{shape:r,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof ys&&this._def.unknownKeys==="strip"))for(const d in a.data)o.includes(d)||l.push(d);const u=[];for(const d of o){const p=r[d],f=a.data[d];u.push({key:{status:"valid",value:d},value:p._parse(new ls(a,f,a.path,d)),alwaysSet:d in a.data})}if(this._def.catchall instanceof ys){const d=this._def.unknownKeys;if(d==="passthrough")for(const p of l)u.push({key:{status:"valid",value:p},value:{status:"valid",value:a.data[p]}});else if(d==="strict")l.length>0&&(I(a,{code:S.unrecognized_keys,keys:l}),i.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const p of l){const f=a.data[p];u.push({key:{status:"valid",value:p},value:d._parse(new ls(a,f,a.path,p)),alwaysSet:p in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const d=[];for(const p of u){const f=await p.key,h=await p.value;d.push({key:f,value:h,alwaysSet:p.alwaysSet})}return d}).then(d=>at.mergeObjectSync(i,d)):at.mergeObjectSync(i,u)}get shape(){return this._def.shape()}strict(e){return N.errToObj,new ke({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(s,i)=>{var a,r,o,l;const u=(o=(r=(a=this._def).errorMap)===null||r===void 0?void 0:r.call(a,s,i).message)!==null&&o!==void 0?o:i.defaultError;return s.code==="unrecognized_keys"?{message:(l=N.errToObj(e).message)!==null&&l!==void 0?l:u}:{message:u}}}:{}})}strip(){return new ke({...this._def,unknownKeys:"strip"})}passthrough(){return new ke({...this._def,unknownKeys:"passthrough"})}extend(e){return new ke({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ke({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:V.ZodObject})}setKey(e,s){return this.augment({[e]:s})}catchall(e){return new ke({...this._def,catchall:e})}pick(e){const s={};return se.objectKeys(e).forEach(i=>{e[i]&&this.shape[i]&&(s[i]=this.shape[i])}),new ke({...this._def,shape:()=>s})}omit(e){const s={};return se.objectKeys(this.shape).forEach(i=>{e[i]||(s[i]=this.shape[i])}),new ke({...this._def,shape:()=>s})}deepPartial(){return ui(this)}partial(e){const s={};return se.objectKeys(this.shape).forEach(i=>{const a=this.shape[i];e&&!e[i]?s[i]=a:s[i]=a.optional()}),new ke({...this._def,shape:()=>s})}required(e){const s={};return se.objectKeys(this.shape).forEach(i=>{if(e&&!e[i])s[i]=this.shape[i];else{let r=this.shape[i];for(;r instanceof rs;)r=r._def.innerType;s[i]=r}}),new ke({...this._def,shape:()=>s})}keyof(){return Jc(se.objectKeys(this.shape))}}ke.create=(t,e)=>new ke({shape:()=>t,unknownKeys:"strip",catchall:ys.create(),typeName:V.ZodObject,...j(e)});ke.strictCreate=(t,e)=>new ke({shape:()=>t,unknownKeys:"strict",catchall:ys.create(),typeName:V.ZodObject,...j(e)});ke.lazycreate=(t,e)=>new ke({shape:t,unknownKeys:"strip",catchall:ys.create(),typeName:V.ZodObject,...j(e)});class Qn extends H{_parse(e){const{ctx:s}=this._processInputParams(e),i=this._def.options;function a(r){for(const l of r)if(l.result.status==="valid")return l.result;for(const l of r)if(l.result.status==="dirty")return s.common.issues.push(...l.ctx.common.issues),l.result;const o=r.map(l=>new It(l.ctx.common.issues));return I(s,{code:S.invalid_union,unionErrors:o}),z}if(s.common.async)return Promise.all(i.map(async r=>{const o={...s,common:{...s.common,issues:[]},parent:null};return{result:await r._parseAsync({data:s.data,path:s.path,parent:o}),ctx:o}})).then(a);{let r;const o=[];for(const u of i){const d={...s,common:{...s.common,issues:[]},parent:null},p=u._parseSync({data:s.data,path:s.path,parent:d});if(p.status==="valid")return p;p.status==="dirty"&&!r&&(r={result:p,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(r)return s.common.issues.push(...r.ctx.common.issues),r.result;const l=o.map(u=>new It(u));return I(s,{code:S.invalid_union,unionErrors:l}),z}}get options(){return this._def.options}}Qn.create=(t,e)=>new Qn({options:t,typeName:V.ZodUnion,...j(e)});const ms=t=>t instanceof Zn?ms(t.schema):t instanceof zt?ms(t.innerType()):t instanceof Xn?[t.value]:t instanceof Es?t.options:t instanceof Yn?se.objectValues(t.enum):t instanceof jn?ms(t._def.innerType):t instanceof Fn?[void 0]:t instanceof zn?[null]:t instanceof rs?[void 0,...ms(t.unwrap())]:t instanceof Rs?[null,...ms(t.unwrap())]:t instanceof Ao||t instanceof Gn?ms(t.unwrap()):t instanceof Hn?ms(t._def.innerType):[];class _r extends H{_parse(e){const{ctx:s}=this._processInputParams(e);if(s.parsedType!==A.object)return I(s,{code:S.invalid_type,expected:A.object,received:s.parsedType}),z;const i=this.discriminator,a=s.data[i],r=this.optionsMap.get(a);return r?s.common.async?r._parseAsync({data:s.data,path:s.path,parent:s}):r._parseSync({data:s.data,path:s.path,parent:s}):(I(s,{code:S.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[i]}),z)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,s,i){const a=new Map;for(const r of s){const o=ms(r.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const l of o){if(a.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);a.set(l,r)}}return new _r({typeName:V.ZodDiscriminatedUnion,discriminator:e,options:s,optionsMap:a,...j(i)})}}function no(t,e){const s=Cs(t),i=Cs(e);if(t===e)return{valid:!0,data:t};if(s===A.object&&i===A.object){const a=se.objectKeys(e),r=se.objectKeys(t).filter(l=>a.indexOf(l)!==-1),o={...t,...e};for(const l of r){const u=no(t[l],e[l]);if(!u.valid)return{valid:!1};o[l]=u.data}return{valid:!0,data:o}}else if(s===A.array&&i===A.array){if(t.length!==e.length)return{valid:!1};const a=[];for(let r=0;r<t.length;r++){const o=t[r],l=e[r],u=no(o,l);if(!u.valid)return{valid:!1};a.push(u.data)}return{valid:!0,data:a}}else return s===A.date&&i===A.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Wn extends H{_parse(e){const{status:s,ctx:i}=this._processInputParams(e),a=(r,o)=>{if(so(r)||so(o))return z;const l=no(r.value,o.value);return l.valid?((io(r)||io(o))&&s.dirty(),{status:s.value,value:l.data}):(I(i,{code:S.invalid_intersection_types}),z)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([r,o])=>a(r,o)):a(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}Wn.create=(t,e,s)=>new Wn({left:t,right:e,typeName:V.ZodIntersection,...j(s)});class ds extends H{_parse(e){const{status:s,ctx:i}=this._processInputParams(e);if(i.parsedType!==A.array)return I(i,{code:S.invalid_type,expected:A.array,received:i.parsedType}),z;if(i.data.length<this._def.items.length)return I(i,{code:S.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),z;!this._def.rest&&i.data.length>this._def.items.length&&(I(i,{code:S.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),s.dirty());const r=[...i.data].map((o,l)=>{const u=this._def.items[l]||this._def.rest;return u?u._parse(new ls(i,o,i.path,l)):null}).filter(o=>!!o);return i.common.async?Promise.all(r).then(o=>at.mergeArray(s,o)):at.mergeArray(s,r)}get items(){return this._def.items}rest(e){return new ds({...this._def,rest:e})}}ds.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ds({items:t,typeName:V.ZodTuple,rest:null,...j(e)})};class Un extends H{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:s,ctx:i}=this._processInputParams(e);if(i.parsedType!==A.object)return I(i,{code:S.invalid_type,expected:A.object,received:i.parsedType}),z;const a=[],r=this._def.keyType,o=this._def.valueType;for(const l in i.data)a.push({key:r._parse(new ls(i,l,i.path,l)),value:o._parse(new ls(i,i.data[l],i.path,l)),alwaysSet:l in i.data});return i.common.async?at.mergeObjectAsync(s,a):at.mergeObjectSync(s,a)}get element(){return this._def.valueType}static create(e,s,i){return s instanceof H?new Un({keyType:e,valueType:s,typeName:V.ZodRecord,...j(i)}):new Un({keyType:$t.create(),valueType:e,typeName:V.ZodRecord,...j(s)})}}class sr extends H{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:s,ctx:i}=this._processInputParams(e);if(i.parsedType!==A.map)return I(i,{code:S.invalid_type,expected:A.map,received:i.parsedType}),z;const a=this._def.keyType,r=this._def.valueType,o=[...i.data.entries()].map(([l,u],d)=>({key:a._parse(new ls(i,l,i.path,[d,"key"])),value:r._parse(new ls(i,u,i.path,[d,"value"]))}));if(i.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const u of o){const d=await u.key,p=await u.value;if(d.status==="aborted"||p.status==="aborted")return z;(d.status==="dirty"||p.status==="dirty")&&s.dirty(),l.set(d.value,p.value)}return{status:s.value,value:l}})}else{const l=new Map;for(const u of o){const d=u.key,p=u.value;if(d.status==="aborted"||p.status==="aborted")return z;(d.status==="dirty"||p.status==="dirty")&&s.dirty(),l.set(d.value,p.value)}return{status:s.value,value:l}}}}sr.create=(t,e,s)=>new sr({valueType:e,keyType:t,typeName:V.ZodMap,...j(s)});class si extends H{_parse(e){const{status:s,ctx:i}=this._processInputParams(e);if(i.parsedType!==A.set)return I(i,{code:S.invalid_type,expected:A.set,received:i.parsedType}),z;const a=this._def;a.minSize!==null&&i.data.size<a.minSize.value&&(I(i,{code:S.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),s.dirty()),a.maxSize!==null&&i.data.size>a.maxSize.value&&(I(i,{code:S.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),s.dirty());const r=this._def.valueType;function o(u){const d=new Set;for(const p of u){if(p.status==="aborted")return z;p.status==="dirty"&&s.dirty(),d.add(p.value)}return{status:s.value,value:d}}const l=[...i.data.values()].map((u,d)=>r._parse(new ls(i,u,i.path,d)));return i.common.async?Promise.all(l).then(u=>o(u)):o(l)}min(e,s){return new si({...this._def,minSize:{value:e,message:N.toString(s)}})}max(e,s){return new si({...this._def,maxSize:{value:e,message:N.toString(s)}})}size(e,s){return this.min(e,s).max(e,s)}nonempty(e){return this.min(1,e)}}si.create=(t,e)=>new si({valueType:t,minSize:null,maxSize:null,typeName:V.ZodSet,...j(e)});class Mi extends H{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:s}=this._processInputParams(e);if(s.parsedType!==A.function)return I(s,{code:S.invalid_type,expected:A.function,received:s.parsedType}),z;function i(l,u){return Ka({data:l,path:s.path,errorMaps:[s.common.contextualErrorMap,s.schemaErrorMap,qa(),Ui].filter(d=>!!d),issueData:{code:S.invalid_arguments,argumentsError:u}})}function a(l,u){return Ka({data:l,path:s.path,errorMaps:[s.common.contextualErrorMap,s.schemaErrorMap,qa(),Ui].filter(d=>!!d),issueData:{code:S.invalid_return_type,returnTypeError:u}})}const r={errorMap:s.common.contextualErrorMap},o=s.data;if(this._def.returns instanceof Xi){const l=this;return ut(async function(...u){const d=new It([]),p=await l._def.args.parseAsync(u,r).catch(g=>{throw d.addIssue(i(u,g)),d}),f=await Reflect.apply(o,this,p);return await l._def.returns._def.type.parseAsync(f,r).catch(g=>{throw d.addIssue(a(f,g)),d})})}else{const l=this;return ut(function(...u){const d=l._def.args.safeParse(u,r);if(!d.success)throw new It([i(u,d.error)]);const p=Reflect.apply(o,this,d.data),f=l._def.returns.safeParse(p,r);if(!f.success)throw new It([a(p,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Mi({...this._def,args:ds.create(e).rest(Ks.create())})}returns(e){return new Mi({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,s,i){return new Mi({args:e||ds.create([]).rest(Ks.create()),returns:s||Ks.create(),typeName:V.ZodFunction,...j(i)})}}class Zn extends H{get schema(){return this._def.getter()}_parse(e){const{ctx:s}=this._processInputParams(e);return this._def.getter()._parse({data:s.data,path:s.path,parent:s})}}Zn.create=(t,e)=>new Zn({getter:t,typeName:V.ZodLazy,...j(e)});class Xn extends H{_parse(e){if(e.data!==this._def.value){const s=this._getOrReturnCtx(e);return I(s,{received:s.data,code:S.invalid_literal,expected:this._def.value}),z}return{status:"valid",value:e.data}}get value(){return this._def.value}}Xn.create=(t,e)=>new Xn({value:t,typeName:V.ZodLiteral,...j(e)});function Jc(t,e){return new Es({values:t,typeName:V.ZodEnum,...j(e)})}class Es extends H{constructor(){super(...arguments),gn.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const s=this._getOrReturnCtx(e),i=this._def.values;return I(s,{expected:se.joinValues(i),received:s.parsedType,code:S.invalid_type}),z}if(Ja(this,gn)||Hc(this,gn,new Set(this._def.values)),!Ja(this,gn).has(e.data)){const s=this._getOrReturnCtx(e),i=this._def.values;return I(s,{received:s.data,code:S.invalid_enum_value,options:i}),z}return ut(e.data)}get options(){return this._def.values}get enum(){const e={};for(const s of this._def.values)e[s]=s;return e}get Values(){const e={};for(const s of this._def.values)e[s]=s;return e}get Enum(){const e={};for(const s of this._def.values)e[s]=s;return e}extract(e,s=this._def){return Es.create(e,{...this._def,...s})}exclude(e,s=this._def){return Es.create(this.options.filter(i=>!e.includes(i)),{...this._def,...s})}}gn=new WeakMap;Es.create=Jc;class Yn extends H{constructor(){super(...arguments),bn.set(this,void 0)}_parse(e){const s=se.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==A.string&&i.parsedType!==A.number){const a=se.objectValues(s);return I(i,{expected:se.joinValues(a),received:i.parsedType,code:S.invalid_type}),z}if(Ja(this,bn)||Hc(this,bn,new Set(se.getValidEnumValues(this._def.values))),!Ja(this,bn).has(e.data)){const a=se.objectValues(s);return I(i,{received:i.data,code:S.invalid_enum_value,options:a}),z}return ut(e.data)}get enum(){return this._def.values}}bn=new WeakMap;Yn.create=(t,e)=>new Yn({values:t,typeName:V.ZodNativeEnum,...j(e)});class Xi extends H{unwrap(){return this._def.type}_parse(e){const{ctx:s}=this._processInputParams(e);if(s.parsedType!==A.promise&&s.common.async===!1)return I(s,{code:S.invalid_type,expected:A.promise,received:s.parsedType}),z;const i=s.parsedType===A.promise?s.data:Promise.resolve(s.data);return ut(i.then(a=>this._def.type.parseAsync(a,{path:s.path,errorMap:s.common.contextualErrorMap})))}}Xi.create=(t,e)=>new Xi({type:t,typeName:V.ZodPromise,...j(e)});class zt extends H{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===V.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:s,ctx:i}=this._processInputParams(e),a=this._def.effect||null,r={addIssue:o=>{I(i,o),o.fatal?s.abort():s.dirty()},get path(){return i.path}};if(r.addIssue=r.addIssue.bind(r),a.type==="preprocess"){const o=a.transform(i.data,r);if(i.common.async)return Promise.resolve(o).then(async l=>{if(s.value==="aborted")return z;const u=await this._def.schema._parseAsync({data:l,path:i.path,parent:i});return u.status==="aborted"?z:u.status==="dirty"||s.value==="dirty"?Ri(u.value):u});{if(s.value==="aborted")return z;const l=this._def.schema._parseSync({data:o,path:i.path,parent:i});return l.status==="aborted"?z:l.status==="dirty"||s.value==="dirty"?Ri(l.value):l}}if(a.type==="refinement"){const o=l=>{const u=a.refinement(l,r);if(i.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(i.common.async===!1){const l=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return l.status==="aborted"?z:(l.status==="dirty"&&s.dirty(),o(l.value),{status:s.value,value:l.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(l=>l.status==="aborted"?z:(l.status==="dirty"&&s.dirty(),o(l.value).then(()=>({status:s.value,value:l.value}))))}if(a.type==="transform")if(i.common.async===!1){const o=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!Bn(o))return o;const l=a.transform(o.value,r);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:s.value,value:l}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(o=>Bn(o)?Promise.resolve(a.transform(o.value,r)).then(l=>({status:s.value,value:l})):o);se.assertNever(a)}}zt.create=(t,e,s)=>new zt({schema:t,typeName:V.ZodEffects,effect:e,...j(s)});zt.createWithPreprocess=(t,e,s)=>new zt({schema:e,effect:{type:"preprocess",transform:t},typeName:V.ZodEffects,...j(s)});class rs extends H{_parse(e){return this._getType(e)===A.undefined?ut(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}rs.create=(t,e)=>new rs({innerType:t,typeName:V.ZodOptional,...j(e)});class Rs extends H{_parse(e){return this._getType(e)===A.null?ut(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Rs.create=(t,e)=>new Rs({innerType:t,typeName:V.ZodNullable,...j(e)});class jn extends H{_parse(e){const{ctx:s}=this._processInputParams(e);let i=s.data;return s.parsedType===A.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:s.path,parent:s})}removeDefault(){return this._def.innerType}}jn.create=(t,e)=>new jn({innerType:t,typeName:V.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...j(e)});class Hn extends H{_parse(e){const{ctx:s}=this._processInputParams(e),i={...s,common:{...s.common,issues:[]}},a=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return $n(a)?a.then(r=>({status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new It(i.common.issues)},input:i.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new It(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}Hn.create=(t,e)=>new Hn({innerType:t,typeName:V.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...j(e)});class ir extends H{_parse(e){if(this._getType(e)!==A.nan){const i=this._getOrReturnCtx(e);return I(i,{code:S.invalid_type,expected:A.nan,received:i.parsedType}),z}return{status:"valid",value:e.data}}}ir.create=t=>new ir({typeName:V.ZodNaN,...j(t)});const Th=Symbol("zod_brand");class Ao extends H{_parse(e){const{ctx:s}=this._processInputParams(e),i=s.data;return this._def.type._parse({data:i,path:s.path,parent:s})}unwrap(){return this._def.type}}class ia extends H{_parse(e){const{status:s,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const r=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return r.status==="aborted"?z:r.status==="dirty"?(s.dirty(),Ri(r.value)):this._def.out._parseAsync({data:r.value,path:i.path,parent:i})})();{const a=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return a.status==="aborted"?z:a.status==="dirty"?(s.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:i.path,parent:i})}}static create(e,s){return new ia({in:e,out:s,typeName:V.ZodPipeline})}}class Gn extends H{_parse(e){const s=this._def.innerType._parse(e),i=a=>(Bn(a)&&(a.value=Object.freeze(a.value)),a);return $n(s)?s.then(a=>i(a)):i(s)}unwrap(){return this._def.innerType}}Gn.create=(t,e)=>new Gn({innerType:t,typeName:V.ZodReadonly,...j(e)});function el(t,e={},s){return t?Zi.create().superRefine((i,a)=>{var r,o;if(!t(i)){const l=typeof e=="function"?e(i):typeof e=="string"?{message:e}:e,u=(o=(r=l.fatal)!==null&&r!==void 0?r:s)!==null&&o!==void 0?o:!0,d=typeof l=="string"?{message:l}:l;a.addIssue({code:"custom",...d,fatal:u})}}):Zi.create()}const Eh={object:ke.lazycreate};var V;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(V||(V={}));const Rh=(t,e={message:`Input not instance of ${t.name}`})=>el(s=>s instanceof t,e),tl=$t.create,sl=As.create,Dh=ir.create,Nh=Ts.create,il=Vn.create,Lh=ti.create,Mh=er.create,Bh=Fn.create,$h=zn.create,Vh=Zi.create,Fh=Ks.create,zh=ys.create,Qh=tr.create,Wh=Ft.create,Uh=ke.create,Zh=ke.strictCreate,Xh=Qn.create,Yh=_r.create,jh=Wn.create,Hh=ds.create,Gh=Un.create,qh=sr.create,Kh=si.create,Jh=Mi.create,ep=Zn.create,tp=Xn.create,sp=Es.create,ip=Yn.create,np=Xi.create,uc=zt.create,ap=rs.create,rp=Rs.create,op=zt.createWithPreprocess,cp=ia.create,lp=()=>tl().optional(),dp=()=>sl().optional(),up=()=>il().optional(),hp={string:t=>$t.create({...t,coerce:!0}),number:t=>As.create({...t,coerce:!0}),boolean:t=>Vn.create({...t,coerce:!0}),bigint:t=>Ts.create({...t,coerce:!0}),date:t=>ti.create({...t,coerce:!0})},pp=z;var Q=Object.freeze({__proto__:null,defaultErrorMap:Ui,setErrorMap:ph,getErrorMap:qa,makeIssue:Ka,EMPTY_PATH:fh,addIssueToContext:I,ParseStatus:at,INVALID:z,DIRTY:Ri,OK:ut,isAborted:so,isDirty:io,isValid:Bn,isAsync:$n,get util(){return se},get objectUtil(){return to},ZodParsedType:A,getParsedType:Cs,ZodType:H,datetimeRegex:Kc,ZodString:$t,ZodNumber:As,ZodBigInt:Ts,ZodBoolean:Vn,ZodDate:ti,ZodSymbol:er,ZodUndefined:Fn,ZodNull:zn,ZodAny:Zi,ZodUnknown:Ks,ZodNever:ys,ZodVoid:tr,ZodArray:Ft,ZodObject:ke,ZodUnion:Qn,ZodDiscriminatedUnion:_r,ZodIntersection:Wn,ZodTuple:ds,ZodRecord:Un,ZodMap:sr,ZodSet:si,ZodFunction:Mi,ZodLazy:Zn,ZodLiteral:Xn,ZodEnum:Es,ZodNativeEnum:Yn,ZodPromise:Xi,ZodEffects:zt,ZodTransformer:zt,ZodOptional:rs,ZodNullable:Rs,ZodDefault:jn,ZodCatch:Hn,ZodNaN:ir,BRAND:Th,ZodBranded:Ao,ZodPipeline:ia,ZodReadonly:Gn,custom:el,Schema:H,ZodSchema:H,late:Eh,get ZodFirstPartyTypeKind(){return V},coerce:hp,any:Vh,array:Wh,bigint:Nh,boolean:il,date:Lh,discriminatedUnion:Yh,effect:uc,enum:sp,function:Jh,instanceof:Rh,intersection:jh,lazy:ep,literal:tp,map:qh,nan:Dh,nativeEnum:ip,never:zh,null:$h,nullable:rp,number:sl,object:Uh,oboolean:up,onumber:dp,optional:ap,ostring:lp,pipeline:cp,preprocess:op,promise:np,record:Gh,set:Kh,strictObject:Zh,string:tl,symbol:Mh,transformer:uc,tuple:Hh,undefined:Bh,union:Xh,unknown:Fh,void:Qh,NEVER:pp,ZodIssueCode:S,quotelessJson:hh,ZodError:It});const $s=new Map,Ys={clear:()=>{localStorage.clear(),window.location.reload()},load:(t,e,s)=>{try{const i=localStorage.getItem(t);return i===null?e:s(JSON.parse(i))}catch{return localStorage.removeItem(t),e}},save:(t,e)=>{var s;localStorage.setItem(t,JSON.stringify(e)),(s=$s.get(t))==null||s.forEach(i=>i(e))},subscribe:(t,e)=>($s.has(t)||$s.set(t,new Set),$s.get(t).add(e),()=>{var s,i;(s=$s.get(t))==null||s.delete(e),((i=$s.get(t))==null?void 0:i.size)===0&&$s.delete(t)})},fp=t=>typeof t=="function";function Ie(t,e,s){const[i,a]=St(()=>Ys.load(t,e,s));tn(()=>{a(Ys.load(t,e,s));const o=l=>a(l);return Ys.subscribe(t,o)},[t,e,s]);const r=w(o=>{Ys.save(t,fp(o)?o(Ys.load(t,e,s)):o)},[t,e,s]);return[i,r]}const mp=Q.boolean().parse;function be(t,e){return Ie(t,e,mp)}const gp=Q.number().parse;function Ns(t,e){return Ie(t,e,gp)}const bp=Q.string().parse;function ni(t,e){return Ie(t,e,bp)}const To="AppInfo",_p=()=>be(`${To}.tab.about.isVisible`,!0),yp=()=>be(`${To}.tab.changelog.isVisible`,!1),vp=()=>be(`${To}.tab.license.isVisible`,!1),nl=[{version:"1.2.0",date:"2024-10-03",added:["Add <b>Emulator</b> widget to write, assemble, and execute ASM code.","<b>Emulator:</b> Add code editor with syntax highlight.","<b>Emulator:</b> Add button and hotkey (<kbd>Ctrl+E</kbd>) to assemble and execute ASM code.","<b>Emulator:</b> Add button to clear editor.","<b>Emulator:</b> Add button to copy code to clipboard.","<b>Emulator:</b> Support all opcodes during compilation.","<b>Emulator:</b> Support defining labels and using them in instructions during compilation.","<b>Emulator:</b> Support defining data tables during compilation.","<b>Emulator:</b> Support changing code's program counter.","<b>Emulator:</b> Support multiple instructions on the same line during compilation.","<b>Emulator:</b> Allow to configure the maximum number of instructions to execute.","<b>Emulator:</b> Allow to configure the initial state of the processor.","<b>Emulator:</b> Execute all opcodes, but interrupt-related ones, during emulation.","<b>Emulator:</b> Display the result of the execution instruction-by-instruction.","<b>Emulator:</b> Display the bare instruction (all args in hexadecimal) for each instruction.","<b>Emulator:</b> Display the state of the processor, cycles taken, and amount of bytes for each instruction.","<b>Emulator:</b> Show the instruction's bytes and effective address (if applicable) on hover.","<b>Emulator:</b> Display the total amount of cycles and bytes.","<b>Emulator:</b> Highlight registers that changed compared to the previous instruction.","<b>Emulator:</b> Show registers' values in decimal, binary, and hexadecimal on hover.","<b>Emulator:</b> Dim registers' high bytes when in 8-bit mode and cleared processor flags.","<b>Emulator:</b> Display the state of memory at the end of execution.","<b>Emulator:</b> Display the state of memory at a given instruction by selecting it.","<b>Emulator:</b> Add input to manually specify which memory address to display.","<b>Emulator:</b> Add buttons to decrement/increment the memory address to display by 0x10.","<b>Emulator:</b> Add buttons to select beginning of RAM, beginning of ROM, and Stack Pointer","<b>Emulator:</b> Highlight Stack Pointer in memory view.","<b>Emulator:</b> Dim uninitialized addresses in memory view.","<b>Emulator:</b> Allow to search opcodes by mnemonic, displaying hex, mode, example, affected flags, cycles, and length.","<b>Emulator:</b> Add instructions detailing the emulator's usage."],changed:["<b>Table Editor:</b> Move actions into section header."],fixed:["Restore small-caps in non-collapsible section headers."],removed:["<b>Table Editor:</b> Remove table name above table."]},{version:"1.0.1",date:"2024-09-08",fixed:["Fix broken small-caps by replacing Inter with system font."]},{version:"1.0.0",date:"2024-02-06",added:["Add <b>Calculator</b> widget to display and edit numbers in binary, decimal, and hexadecimal formats.","<b>Calculator:</b> Add button and hotkey (<kbd>Ctrl+C</kbd>) to copy the selected value to the clipboard.","<b>Calculator:</b> Add button and hotkey (<kbd>Ctrl+V</kbd>) to paste the selected value from the clipboard.","<b>Calculator:</b> Add hotkey (<kbd>Space/Shift+Space</kbd>) to increment/decrement the selected digit by 1.","<b>Calculator:</b> Add hotkey (<kbd>&lt;/&gt;</kbd>) to shift the selected value left and right.","<b>Calculator:</b> Add hotkey (<kbd>{/}</kbd>) to rotate the selected value left and right.","<b>Calculator:</b> Add hotkey (<kbd>!</kbd>) to negate the selected value.","<b>Calculator:</b> Add hotkey (<kbd>Shift+Backspace/Shift+Delete</kbd>) to clear the selected value.","<b>Calculator:</b> Add setting and hotkey (<kbd>Q</kbd>) to toggle advanced mode, which allows to perform operations between two values.","<b>Calculator (advanced):</b> Add hotkey (<kbd>+</kbd>) to switch to addition operation.","<b>Calculator (advanced):</b> Add hotkey (<kbd>-</kbd>) to switch to subtraction operation.","<b>Calculator (advanced):</b> Add hotkey (<kbd>&</kbd>) to switch to logical AND operation.","<b>Calculator (advanced):</b> Add hotkey (<kbd>|</kbd>) to switch to logical OR operation.","<b>Calculator (advanced):</b> Add hotkey (<kbd>^</kbd>) to switch to logical XOR operation.","<b>Calculator (advanced):</b> Add hotkey (<kbd>=</kbd>) to move the result of the operation in operand 2.","<b>Calculator (advanced):</b> Add hotkey (<kbd>;</kbd>) to swap the two operands.","<b>Calculator (advanced):</b> Add hotkey (<kbd>Ctrl+Backspace/Ctrl+Delete</kbd>) to clear all operands.","<b>Calculator:</b> Add buttons to toggle values' visibility.","<b>Calculator:</b> Add setting and hotkeys (<kbd>Y/W</kbd>) to choose between byte (8 bits) or word (16 bits).","<b>Calculator:</b> Add setting and hotkeys (<kbd>I/O</kbd>) to choose how digits are inserted while typing (insert or overwrite).","<b>Calculator:</b> Add setting and hotkeys (<kbd>L/R</kbd>) to choose typing direction (left or right).","<b>Calculator:</b> Add setting and hotkey (<kbd>M</kbd>) to disable movement after typing a digit.","<b>Calculator:</b> Add setting and hotkey (<kbd>T</kbd>) to flip binary bits when clicking on a digit.","<b>Calculator:</b> Add setting to customize caret appearance (bar, box, underline).","<b>Calculator:</b> Add setting and hotkey (<kbd>N</kbd>) to display values as signed (they can be negative). The hotkey works only for decimals.","<b>Calculator:</b> Add setting to add some space every 4 or 8 digits.","<b>Calculator:</b> Add setting to display an on-screen keyboard, in compact or full mode (on mobile it's always in full mode).","<b>Calculator:</b> Add instructions detailing actions, operations, and settings, with their corresponding keybindings.","Add <b>Table Editor</b> widget to edit an ASM data table.","<b>Table Editor:</b> Add Multi-selection while holding <kbd>Shift/Ctrl/Cmd</kbd>.","<b>Table Editor:</b> Add Background colors for cells, with every value having a different corresponding color.","<b>Table Editor:</b> Add button and hotkey (<kbd>Ctrl+C</kbd>) to copy the content of the table into the clipboard.","<b>Table Editor:</b> Add button and hotkey (<kbd>Ctrl+V</kbd>) to paste the content of the clipboard into the table.","<b>Table Editor:</b> Add Arrow movement in the table.","<b>Table Editor:</b> Add setting to display the values in binary, decimal, or hexadecimal format.","<b>Table Editor:</b> Add setting and hotkey (<kbd>Y/W</kbd>) to choose between byte (8 bits) or word (16 bits).","<b>Table Editor:</b> Add settings to customize the width and height of the table (min 1x1, max 50x50).","<b>Table Editor:</b> Add setting to customize the table's name.","<b>Table Editor:</b> Add setting to choose the comment type for columns (number dec, number hex, value hex), applied on paste to clipboard.","<b>Table Editor:</b> Add setting to choose the comment type for rows (number dec, number hex, range hex), applied on paste to clipboard.","<b>Table Editor:</b> Add setting to choose the indentation for rows, applied on paste to clipboard.","<b>Table Editor:</b> Add setting to choose whether to add a space between row values or not, applied on paste to clipboard.","<b>Table Editor:</b> Add setting to select a background image for the table.","<b>Table Editor:</b> Add setting to toggle the background image's visibility.","<b>Table Editor:</b> Add setting to control the background image's opacity.","<b>Table Editor:</b> Add setting to change the background color associated with a decimal value.","<b>Table Editor:</b> Add button to reset the background color associated with a decimal value to its default.","<b>Table Editor:</b> Add setting to control the background color's opacity.","<b>Table Editor:</b> Add an on-screen keyboard, visible only on mobile","<b>Table Editor:</b> Add instructions detailing actions and settings, with their corresponding keybindings.","Add <b>App Settings</b> tab defining settings that affect all widgets.","<b>App Settings:</b> Add setting to enable/disable (most) hotkeys.","<b>App Settings:</b> Add setting to select between system, dark, or light mode.","<b>App Settings:</b> Add setting to select color palette for accents, including the disco palette.","<b>App Settings:</b> Add button to reset all settings and data.","Add <b>App Info</b> tab containing generic information about the application.","<b>App Info:</b> Add info section with app name, version, date, and author, and link to source code.","<b>App Info:</b> Add changelog.","<b>App Info:</b> Add license.","Add hotkeys (<kbd>Ctrl+Digit</kbd>) to select tab.","Add hotkeys (<kbd>Tab/Shift+Tab</kbd>) to navigate through focusable elements.","Add navigation through URL tags."]}],hc=nl[0]??{version:"<empty>",date:"<empty>"};function wp(){const[t,e]=_p();return c(Ct,{isVisible:t,label:"Info",onChange:e,children:[c("div",{children:c("b",{children:"SMW Toolbox: Tools for hacking Super Mario World"})}),c("div",{children:`Version ${hc.version}  ${hc.date}`}),c("div",{children:"2024 zuccha"}),c("div",{children:c(Oa,{href:"https://github.com/zuccha/smw-toolbox",label:"Source code"})}),c("br",{}),c("div",{children:c("b",{children:"Contributing"})}),c("div",{children:c(Oa,{href:"https://github.com/zuccha/smw-toolbox/issues/new?assignees=&labels=bug&projects=&template=bug_report.md&title=",label:"Report a bug"})}),c("div",{children:c(Oa,{href:"https://github.com/zuccha/smw-toolbox/issues/new?assignees=&labels=enhancement&projects=&template=feature_request.md&title=",label:"Suggest a feature"})})]})}function fa({items:t,title:e}){return!t||t.length===0?null:c("div",{class:"Changelog_Release_Section",children:[c("div",{children:`${e}:`}),c("ul",{children:t.map(s=>c("li",{dangerouslySetInnerHTML:{__html:s}}))})]})}function xp({changelog:t}){return c("div",{class:"Changelog",children:t.map(e=>c("div",{class:"Changelog_Release",children:[c("div",{class:"Changelog_Release_Title",children:e.date?`[${e.version}]  ${e.date}`:`[${e.version}]`}),c(fa,{items:e.added,title:"Added"}),c(fa,{items:e.changed,title:"Changed"}),c(fa,{items:e.removed,title:"Removed"}),c(fa,{items:e.fixed,title:"Fixed"})]},e.version))})}function kp(){const[t,e]=yp();return c(Ct,{isVisible:t,label:"Changelog",onChange:e,children:c(xp,{changelog:nl})})}function Sp(){const[t,e]=vp();return c(Ct,{isVisible:t,label:"License",onChange:e,children:c("div",{class:"App_SectionCol",children:[c("div",{children:'The SMW Toolbox program (hereafter referred to as the "Software") is not official or supported by Nintendo, nor any other commercial entity.'}),c("div",{children:"The Software is freeware thus it can be distributed freely provided the following conditions hold: (1) The Software is not distributed with or as part of any ROM image in any format, and (2) No goods, services, or money can be charged for the Software in any form, nor may it be included in conjunction with any other offer or monetary exchange."}),c("div",{children:"The Software is provided AS IS, and its use is at your own risk. Anyone mentioned in its documentation will not be held liable for any damages, direct or otherwise, arising from its use or presence."})]})})}function Cp(){return c("div",{class:"App_Module",children:c("div",{class:"App_ModuleBlock",children:[c(wp,{}),c(kp,{}),c(Sp,{})]})})}var wt=(t=>(t[t.System=0]="System",t[t.Dark=1]="Dark",t[t.Light=2]="Light",t))(wt||{});const Op=Q.nativeEnum(wt);var ge=(t=>(t[t.Blue=0]="Blue",t[t.Cyan=1]="Cyan",t[t.Green=2]="Green",t[t.Orange=3]="Orange",t[t.Pink=4]="Pink",t[t.Purple=5]="Purple",t[t.Red=6]="Red",t[t.Yellow=7]="Yellow",t[t.Disco=8]="Disco",t))(ge||{});const Pp=Q.nativeEnum(ge),Yi={1:{mode:1,background1:"#3b3b3b",background2:"#242424",background3:"#141414",background4:"#4c4c4c",error1:"#F56565",neutral1:"#f4f4f4",neutral2:"#a1a1a1",color:{5:{primary1:"#D6BCFA",primary2:"#9F7AEA",primary3:"#322659",highlight1:"#D6BCFA55",highlight2:"#D6BCFA22"},0:{primary1:"#90CDF4",primary2:"#4299E1",primary3:"#1A365D",highlight1:"#90CDF455",highlight2:"#90CDF422"},1:{primary1:"#76E4F7",primary2:"#0BC5EA",primary3:"#065666",highlight1:"#76E4F755",highlight2:"#76E4F722"},2:{primary1:"#68D391",primary2:"#48BB78",primary3:"#1C4532",highlight1:"#68D39155",highlight2:"#68D39122"},7:{primary1:"#FAF089",primary2:"#ECC94B",primary3:"#975A16",highlight1:"#FAF08955",highlight2:"#FAF08922"},3:{primary1:"#F6AD55",primary2:"#ED8936",primary3:"#652B19",highlight1:"#F6AD5555",highlight2:"#F6AD5522"},6:{primary1:"#FC8181",primary2:"#F56565",primary3:"#63171B",highlight1:"#FC818155",highlight2:"#FC818122"},4:{primary1:"#F687B3",primary2:"#ED64A6",primary3:"#521B41",highlight1:"#F687B355",highlight2:"#F687B322"}}},2:{mode:2,background1:"#e4e4e4",background2:"#f9f9f9",background3:"#dddddd",background4:"#e0e0e0",error1:"#C53030",neutral1:"#222222",neutral2:"#777777",color:{5:{primary1:"#9F7AEA",primary2:"#6B46C1",primary3:"#E9D8FD",highlight1:"#9F7AEA55",highlight2:"#9F7AEA22"},0:{primary1:"#4299E1",primary2:"#2B6CB0",primary3:"#BEE3F8",highlight1:"#4299E155",highlight2:"#4299E122"},1:{primary1:"#0BC5EA",primary2:"#248DA2",primary3:"#C4F1F9",highlight1:"#0BC5EA55",highlight2:"#0BC5EA22"},2:{primary1:"#48BB78",primary2:"#2F855A",primary3:"#C6F6D5",highlight1:"#48BB7855",highlight2:"#48BB7822"},7:{primary1:"#ECC94B",primary2:"#A47519",primary3:"#FEFCBF",highlight1:"#ECC94B55",highlight2:"#ECC94B22"},3:{primary1:"#ED8936",primary2:"#C05621",primary3:"#FEEBC8",highlight1:"#ED893655",highlight2:"#ED893622"},6:{primary1:"#F56565",primary2:"#C53030",primary3:"#FED7D7",highlight1:"#F5656555",highlight2:"#F5656522"},4:{primary1:"#ED64A6",primary2:"#B83280",primary3:"#FED7E2",highlight1:"#ED64A655",highlight2:"#ED64A622"}}}},al=100,Wr=window.matchMedia("(prefers-color-scheme: dark)"),pc=t=>t?wt.Dark:wt.Light;function rl(t){return Ie(`${t}.color`,ge.Orange,Pp.parse)}function ol(t){return Ie(`${t}.mode`,wt.System,Op.parse)}function cl(t){const[e]=ol(t),[s,i]=St(pc(Wr.matches));return tn(()=>{const a=r=>i(pc(r.matches));return Wr.addEventListener("change",a),()=>Wr.removeEventListener("change",a)},[]),e===wt.System?Yi[s]:Yi[e]}function Ip(t){const e=Oe(0),[s]=rl(t),i=cl(t);Wt(()=>{const a=document.documentElement.style;if(a.setProperty("--color-background-1",i.background1),a.setProperty("--color-background-2",i.background2),a.setProperty("--color-background-3",i.background3),a.setProperty("--color-background-4",i.background4),a.setProperty("--color-error-1",i.error1),a.setProperty("--color-neutral-1",i.neutral1),a.setProperty("--color-neutral-2",i.neutral2),s===ge.Disco){const r=Object.values(i.color),o=r.map(({primary1:g})=>g),l=r.map(({primary2:g})=>g),u=r.map(({primary3:g})=>g),d=r.map(({highlight1:g})=>g),p=r.map(({highlight2:g})=>g);let f=0;const h=()=>{a.setProperty("--color-primary-1",o[f]),a.setProperty("--color-primary-2",l[f]),a.setProperty("--color-primary-3",u[f]),a.setProperty("--color-highlight-1",d[f]),a.setProperty("--color-highlight-2",p[f]),f=(f+1)%r.length};return clearInterval(e.current),e.current=setInterval(h,al),()=>clearInterval(e.current)}else a.setProperty("--color-primary-1",i.color[s].primary1),a.setProperty("--color-primary-2",i.color[s].primary2),a.setProperty("--color-primary-3",i.color[s].primary3),a.setProperty("--color-highlight-1",i.color[s].highlight1),a.setProperty("--color-highlight-2",i.color[s].highlight2)},[s,i])}const rn="App",Eo=()=>be(`${rn}.hotkeys.isEnabled`,!0),ll=()=>cl(`${rn}.theme`),dl=()=>rl(`${rn}.theme`),Ap=()=>ol(`${rn}.theme`),Tp=()=>Ip(`${rn}.theme`),Ep=()=>ni(`${rn}.selectedModule.id`,""),on=[{label:"On",value:!0},{label:"Off",value:!1}];function ot({onChange:t,options:e,value:s}){return c("div",{class:"RadioGroup",children:e.map(i=>{const a=()=>t(i.value);return c(Pt,{isSelected:i.value===s,label:i.label,onClick:a},i.value)})})}function G({align:t="center",children:e,hotkey:s,inline:i=!1,label:a,size:r="lg"}){const o=vt([["Setting",!0],[`inline ${t}`,i]]);let l=a;return s&&(l+=` (${s})`),i&&(l+=":"),c("div",{class:o,children:[c("span",{class:"Setting_Label",children:l}),c("div",{class:`Setting_Input ${r}`,children:e})]})}const Rp=[{label:"On",value:!0},{label:"Off",value:!1}];function Dp(){const[t,e]=Eo();return c(G,{hotkey:"K",label:"Hotkeys",children:c(ot,{onChange:e,options:Rp,value:t})})}const Ro="AppSettings",Np=()=>be(`${Ro}.tab.general.isVisible`,!0),Lp=()=>be(`${Ro}.tab.reset.isVisible`,!0),Mp=()=>be(`${Ro}.tab.theme.isVisible`,!0);function Bp(){const[t,e]=Np();return c(Ct,{isVisible:t,label:"General",onChange:e,children:c(Dp,{})})}function $p(){const[t,e]=Lp();return c(Ct,{isVisible:t,label:"Reset",onChange:e,children:c("div",{class:"App_SectionCol",children:["This operation will restore all settings to their default values and clear all data from the application (e.g., images, tables, calculator, etc.).",c("div",{class:"App_SectionActions font-size_l",children:c(Pt,{label:"Reset",onClick:Ys.clear})})]})})}function ul({backgroundColor:t,isSelected:e,onClick:s}){return c("input",{class:e?"selected":void 0,onClick:s,style:{backgroundColor:t},type:"button"})}function Vp({colors:t,...e}){const[s,i]=St(t[0]),a=Oe(0);return tn(()=>{let r=0;const o=()=>{i(t[r]),r=(r+1)%t.length};return clearInterval(a.current),a.current=setInterval(o,al),()=>clearInterval(a.current)},[t]),c(ul,{...e,backgroundColor:s})}function Fp({onChange:t,options:e,value:s}){const i=ie(()=>{const a=e.map(r=>r.color);return a.length>0?a:["transparent"]},[e]);return c("div",{class:"PalettePicker",children:e.map(a=>a.color==="disco"?c(Vp,{colors:i,isSelected:a.value===s,onClick:()=>t(a.value)},a.value):c(ul,{backgroundColor:a.color,isSelected:a.value===s,onClick:()=>t(a.value)},a.value))})}function zp(){const[t,e]=dl(),s=ll(),i=ie(()=>[{color:s.color[ge.Purple].primary2,value:ge.Purple},{color:s.color[ge.Blue].primary2,value:ge.Blue},{color:s.color[ge.Cyan].primary2,value:ge.Cyan},{color:s.color[ge.Green].primary2,value:ge.Green},{color:s.color[ge.Yellow].primary2,value:ge.Yellow},{color:s.color[ge.Orange].primary2,value:ge.Orange},{color:s.color[ge.Red].primary2,value:ge.Red},{color:s.color[ge.Pink].primary2,value:ge.Pink},{color:"disco",value:ge.Disco}],[s]);return c(G,{label:"Palette",children:c(Fp,{onChange:e,options:i,value:t})})}function Do({onChange:t,options:e,placeholder:s,value:i}){const a=w(r=>{t(Number.parseInt(r.currentTarget.value))},[t]);return c("div",{class:"Select",children:[c("select",{onChange:a,placeholder:s,value:i,children:e.map(r=>c("option",{value:r.value,children:r.label},r.value))}),c("div",{class:"Select_Labels",children:e.map(r=>{const o=vt([["Select_Label",!0],["hidden",r.value!==i]]);return c("div",{class:o,children:r.label},r.value)})}),e.some(r=>r.value===i)?c("div",{class:"Select_Placeholder",children:""}):c("div",{class:"Select_Placeholder",children:s}),c("div",{class:"Select_Icon",children:c(Zc,{size:"1em"})})]})}const Qp=[{label:"System",value:wt.System},{label:"Dark",value:wt.Dark},{label:"Light",value:wt.Light}];function Wp(){const[t,e]=Ap();return c(G,{label:"Mode",children:c(Do,{onChange:e,options:Qp,placeholder:"Color Mode",value:t})})}function Up(){const[t,e]=Mp();return c(Ct,{isVisible:t,label:"Theme",onChange:e,children:c("div",{class:"App_SectionRow",children:[c(Wp,{}),c(zp,{})]})})}function Zp(){return c("div",{class:"App_Module",children:c("div",{class:"App_ModuleBlock",children:[c(Bp,{}),c(Up,{}),c($p,{})]})})}function ao({id:t,keybindings:e,rowSpan:s}){return c("td",{rowSpan:s,children:e.length>0?e.map((i,a)=>c(Wi,{children:[c("kbd",{children:i}),a<e.length-1&&", "]},`${t}-${i}`)):"-"})}function Xp({actions:t}){const e=t.some(s=>s.keybindings.length>0);return c("table",{children:[c("thead",{children:c("tr",{children:[c("th",{children:"Name"}),c("th",{children:"Description"}),e&&c("th",{children:"Keybindings"})]})}),c("tbody",{children:t.map((s,i)=>c("tr",{children:[c("td",{class:"Tutorial_Action_Name",dangerouslySetInnerHTML:{__html:s.name}}),c("td",{class:"Tutorial_Action_Description",dangerouslySetInnerHTML:{__html:s.description}}),e&&c(ao,{id:s.name,keybindings:s.keybindings})]},i))})]})}const fc=t=>"keybindings"in t;function Yp({settings:t}){const e=t.some(i=>fc(i)?i.keybindings.length>0:i.values.some(a=>a.keybindings.length>0)),s=i=>i.startsWith("#")?c("i",{children:i.substring(1)}):i;return c("table",{children:[c("thead",{children:c("tr",{children:[c("th",{children:"Name"}),c("th",{children:"Value"}),c("th",{children:"Description"}),e&&c("th",{children:"Keybindings"})]})}),c("tbody",{children:t.map(i=>fc(i)?i.values.map((a,r)=>c("tr",{children:[r===0&&c("td",{class:"Tutorial_Setting_Name",rowSpan:i.values.length,children:i.name}),c("td",{children:s(a.type)}),c("td",{class:"Tutorial_Setting_Description",children:a.description}),r===0&&e&&c(ao,{id:a.type,keybindings:i.keybindings,rowSpan:i.values.length})]},a.type)):i.values.map((a,r)=>c("tr",{children:[r===0&&c("td",{class:"Tutorial_Setting_Name",rowSpan:i.values.length,children:i.name}),c("td",{children:s(a.type)}),c("td",{class:"Tutorial_Setting_Description",children:a.description}),e&&c(ao,{id:a.type,keybindings:a.keybindings})]},a.type)))})]})}function jp({children:t,title:e}){return c("div",{class:"Tutorial_Section",children:[c("div",{class:"Tutorial_Section_Title",children:`${e}:`}),t]})}function ee({children:t,isVisible:e,onChangeVisibility:s}){return c("div",{class:"Tutorial",children:c(Ct,{isVisible:e,label:"Instructions",onChange:s,children:c("div",{class:"Tutorial_Sections",children:t})})})}ee.Section=jp;ee.Actions=Xp;ee.Settings=Yp;function yr(t=[],e=[],s=[]){return(i,a)=>[...i?t.map(r=>i[r]):[],...e.map(r=>a[r]),...s.flatMap(r=>r.deps(i,a))]}var re=(t=>(t[t.Byte=0]="Byte",t[t.Word=1]="Word",t[t.Long=2]="Long",t))(re||{});const hl=Q.nativeEnum(re);var F=(t=>(t[t.Bin=0]="Bin",t[t.Dec=1]="Dec",t[t.Hex=2]="Hex",t))(F||{});const Hp=Q.nativeEnum(F),pl={0:1,1:2,2:3},nr={0:{min:0,max:255},1:{min:0,max:65535},2:{min:0,max:16777215}},ar={0:{min:-129,max:127},1:{min:-32768,max:32767},2:{min:-8388608,max:8388607}},fl={0:{hide:16776960,show:255},1:{hide:16711680,show:65535},2:{hide:0,show:16777215}},vr=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"];Q.enum(vr);function ml(t){return vr[t]??"0"}function Gp(t){return Number.parseInt(t.length===1?t:"0",16)??0}const qp={0:/^[0-1]*$/,1:/^[0-9]*$/,2:/^[0-9a-fA-F]*$/},Kp={0:/^[0-1]$/,1:/^[0-9]$/,2:/^[0-9a-fA-F]$/};function wr(t,e){return Kp[e].test(t)}const vs={0:{0:8,1:3,2:2},1:{0:16,1:5,2:4},2:{0:24,1:8,2:6}},ji={0:2,1:10,2:16},qn={0:"%",1:"",2:"$"},No={0:"0b",1:"",2:"0x"};var Ue=(t=>(t[t.Add=0]="Add",t[t.And=1]="And",t[t.Or=2]="Or",t[t.Subtract=3]="Subtract",t[t.Xor=4]="Xor",t))(Ue||{});const Jp=Q.nativeEnum(Ue),ef=Q.object({value:Q.number(),valueRaw:Q.number()}),Kn={value:0,valueRaw:0},Lo=yr;function tf(t){return t.startsWith(qn[0])?[0,t.substring(1)]:t.startsWith(qn[2])?[2,t.substring(1)]:[1,t]}function sf(t){return t.startsWith("-")?[!0,t.substring(1)]:[!1,t]}function Mo(t,e){const[s,i]=sf(t),[a,r]=tf(i),o=ji[a],{min:l,max:u}=s?ar[e.unit]:nr[e.unit],d=sn(Number.parseInt(r,o),l,u);if(Number.isNaN(d))return;const p=s||d<0?2*(ar[e.unit].max+1)+d:d;return Jn(p,e)}Mo.deps=Lo([],["unit"]);function Jn(t,e){const s=fl[e.unit],i=t&s.hide|t&s.show;return{value:i&s.show,valueRaw:i}}Jn.deps=Lo([],["unit"]);function gl(t,e,s,i,a){const{unit:r}=a,{min:o,max:l}=nr[r],u=vs[r][e],d=ji[e],p=sn(t.value,o,l),f=s&&p>ar[r].max?-(2*(ar[r].max+1)-p):p,h=f.toString(d).toUpperCase(),g=nn(h.replace("-",""),u,"0"),m=i?`${qn[e]}${g}`:g;return f<0?`-${m}`:m}function bl(t,e,s){const i=fl[e.unit],a=t.valueRaw&i.hide|s&i.show;return{value:a&i.show,valueRaw:a}}bl.deps=Lo(["value","valueRaw"],["unit"]);const nf={setValue:bl};var _l=(t=>(t.Positive="+",t.Negative="-",t))(_l||{});function af(t){return t==="-"||t==="+"}var dt=(t=>(t[t.Left=0]="Left",t[t.Right=1]="Right",t))(dt||{});const rf=Q.nativeEnum(dt);var ws=(t=>(t[t.Insert=0]="Insert",t[t.Overwrite=1]="Overwrite",t))(ws||{});const of=Q.nativeEnum(ws),ct=yr;function ro(t,e){const s=gl(t,e.encoding,e.isSigned,!1,e),i=s.replace("-","").split(""),a=e.isSigned?s.startsWith("-")?"-":"+":void 0,r=e.typingDirection===1?0:i.length-1;return{sign:a,digits:i,index:r}}ro.deps=ct([],["encoding","isSigned","typingDirection","unit"]);function rr(t,e){const s=t.sign==="-"?"-":"",i=qn[e.encoding],a=`${s}${i}${t.digits.join("")}`;return Mo(a,e)}rr.deps=ct(["digits","sign"],["encoding","unit"]);function At(t,e){const[s,i]=e.typingDirection===0?[t.digits.slice().reverse(),t.digits.length-t.index-1]:[t.digits,t.index];return{...t,digits:s,index:i}}At.deps=ct(["digits","index"],["typingDirection"]);function ht(t,e,s){const i=r=>r===t.index?t:{...t,index:r},a=e.shouldAllowOutOfBoundsCursor?1:0;return s<0?i(0):s>t.digits.length-1+a?i(t.digits.length-1):i(s)}ht.deps=ct(["digits"],["isSigned","shouldAllowOutOfBoundsCursor"]);function yl(t,e){const{encoding:s,isSigned:i,unit:a}=e;return{sign:i?"+":void 0,digits:"0".repeat(vs[a][s]).split(""),index:e.typingDirection===1?0:vs[a][s]-1}}yl.deps=ct([],["encoding","isSigned","unit"]);function xr(t,e){if(!gr(t.index,0,t.digits.length-1))return ht(t,e,t.index);const s=At(t,e),i=zc(s.digits,s.index,"0"),a=s.index;return At({...s,digits:i,index:a},e)}xr.deps=ct(["digits","index"],[],[ht,At]);function vl(t,e,s){if(!gr(t.index,0,t.digits.length-1))return ht(t,e,t.index);if(!wr(s,e.encoding))return t;const i=At(t,e),a=ju(i.digits,i.index,s),r=e.shouldMoveAfterTyping?e.shouldAllowOutOfBoundsCursor?Math.min(i.digits.length,i.index+1):Math.min(i.digits.length-1,i.index+1):i.index;return At({...i,digits:a,index:r},e)}vl.deps=ct(["digits","index"],["encoding","shouldMoveAfterTyping","shouldAllowOutOfBoundsCursor"],[ht,At]);function wl(t,e,s){return ht(t,e,s)}wl.deps=ct([],[],[ht]);function xl(t,e){return ht(t,e,t.index-1)}xl.deps=ct([],[],[ht]);function kl(t,e){return ht(t,e,t.index+1)}kl.deps=ct([],[],[ht]);function Sl(t,e){return t.sign==="-"?{...t,sign:"+"}:t.sign==="+"?{...t,sign:"-"}:t}Sl.deps=ct(["sign"],[],[]);function Cl(t,e){if(!gr(t.index,0,t.digits.length))return ht(t,e,t.index);const s=At(t,e);if(s.index===0)return xr(t,e);const i=zc(s.digits,s.index-1,"0"),a=s.index-1;return At({...s,digits:i,index:a},e)}Cl.deps=ct(["digits","index"],[],[xr,ht,At]);function Ol(t,e,s){if(!gr(t.index,0,t.digits.length-1))return ht(t,e,t.index);if(!wr(s,e.encoding))return t;const i=At(t,e),a=Oo(i.digits,i.index,s),r=e.shouldMoveAfterTyping?e.shouldAllowOutOfBoundsCursor?Math.min(i.digits.length,i.index+1):Math.min(i.digits.length-1,i.index+1):i.index;return At({...i,digits:a,index:r},e)}Ol.deps=ct(["digits","index"],["encoding","shouldMoveAfterTyping","shouldAllowOutOfBoundsCursor"],[ht,At]);function Pl(t,e,s,i){i=i??t.index;const a=ji[e.encoding],r=ml(Ha(Gp(t.digits[i])+s,a)),o=Oo(t.digits,i,r);return{...t,digits:o,index:i}}Pl.deps=ct(["digits","index"],["encoding"]);function Il(t,e,s=!1){const i=s?t.digits[0]:"0",a=[...t.digits.slice(1),i];return{...t,digits:a}}Il.deps=ct(["digits"]);function Al(t,e,s=!1){const a=[s?t.digits[t.digits.length-1]:"0",...t.digits.slice(0,t.digits.length-1)];return{...t,digits:a}}Al.deps=ct(["digits"]);const Rt={clear:yl,deleteDigit:xr,insertDigit:vl,jumpTo:wl,moveLeft:xl,moveRight:kl,negate:Sl,removeDigit:Cl,replaceDigit:Ol,shiftDigit:Pl,shiftLeft:Il,shiftRight:Al};function mc(t,e){const{obj:s,context:i}=e;return w((...a)=>t(s,i,...a),t.deps(s,i))}function Pe(t,e){const{obj:s,setObj:i,context:a}=e;return w((...r)=>{const o=t(s,a,...r);return i(o),o},t.deps(s,a))}const Tl={encoding:F.Bin,isSigned:!1,shouldAllowOutOfBoundsCursor:!1,shouldMoveAfterTyping:!0,typingDirection:dt.Right,unit:re.Byte};function gc(t,e,s){return s===dt.Right?0:vs[e][t]-1}function Bo(t,e,s={}){const i={...Tl,...s},{encoding:a,unit:r,typingDirection:o}=i,l=Oe(gc(a,r,o)),u=ie(()=>({...ro(t,i),index:l.current}),[t,...ro.deps(void 0,i)]),d=w(we=>{const Be=rr(we,i);Be&&(e(Be),l.current=we.index)},[e,...rr.deps(void 0,i)]),p={obj:u,setObj:d,context:i},f=Pe(Rt.clear,p),h=Pe(Rt.deleteDigit,p),g=Pe(Rt.insertDigit,p),m=Pe(Rt.jumpTo,p),y=Pe(Rt.moveLeft,p),_=Pe(Rt.moveRight,p),Z=Pe(Rt.negate,p),B=Pe(Rt.removeDigit,p),k=Pe(Rt.replaceDigit,p),O=Pe(Rt.shiftDigit,p),D=Pe(Rt.shiftLeft,p),te=Pe(Rt.shiftRight,p);return Wt(()=>{l.current=gc(a,r,o),m(l.current)},[a,o,r]),[u,{clear:f,deleteDigit:h,insertDigit:g,jumpTo:m,moveLeft:y,moveRight:_,negate:Z,removeDigit:B,replaceDigit:k,shiftDigit:O,shiftLeft:D,shiftRight:te}]}var Bi=(t=>(t[t.Bar=0]="Bar",t[t.Box=1]="Box",t[t.Underline=2]="Underline",t))(Bi||{});const cf=Q.nativeEnum(Bi);var Is=(t=>(t[t.Digits4=0]="Digits4",t[t.Digits8=1]="Digits8",t[t.None=2]="None",t))(Is||{});const lf=Q.nativeEnum(Is),Ur=ii(function({autoFocus:e=!1,caret:s=1,encoding:i,integer:a,isDisabled:r=!1,isSigned:o=!1,shouldFlipBitOnClick:l=!1,shouldMoveAfterTyping:u,onChangeValue:d,spaceFrequency:p,typingDirection:f,typingMode:h,unit:g},m){const y=Oe(null),_=w($=>d($.value),[d]),[{sign:Z,digits:B,index:k},{deleteDigit:O,insertDigit:D,jumpTo:te,moveLeft:we,moveRight:Be,negate:ne,removeDigit:he,replaceDigit:We,shiftDigit:je,shiftLeft:xe,shiftRight:$e}]=Bo(a,_,{encoding:i,isSigned:o,shouldMoveAfterTyping:u,typingDirection:f,unit:g}),Ae=w(()=>(navigator.clipboard.writeText(`${Z??""}${B.join("")}`),!0),[B,Z]),Ve=w(()=>r?!1:(navigator.clipboard.readText().then($=>{const X=ji[i],Te=Number.parseInt($,X);if(!Number.isNaN(Te))return d(Te)}),!0),[i,r,d]),_e=ie(()=>f===dt.Right?Math.max(Yu(B,lc),k-1):Math.min(Xu(B,lc),k),[B,k,f]),et=w($=>f===dt.Right?$<=_e:$>=_e,[_e,f]),Fe=w($=>f===dt.Right?$>_e:$<_e,[_e,f]),ue=vt([["IntegerStringInput",!0],[{0:"caret-bar",1:"caret-box",2:"caret-underline"}[s],!0],["disabled",r],["space-4",p===0],["space-8",p===1]]),Se=vt([["IntegerStringInput_Char",!0],["solid",f===dt.Right],["empty",f===dt.Left]]),He=w($=>{const X=Ut=>!0;(()=>{if(($.ctrlKey||$.metaKey)&&$.key==="c")return Ae();if(($.ctrlKey||$.metaKey)&&$.key==="v")return Ve();if($.ctrlKey||$.metaKey)return!1;if($.key==="ArrowLeft")return X(we());if($.key==="ArrowRight")return X(Be());if(r)return!1;if($.shiftKey&&$.key==="Backspace"||$.shiftKey&&$.key==="Delete")return X(d(0));if($.key===">")return X($e());if($.key==="<")return X(xe());if($.key==="}")return X($e(!0));if($.key==="{")return X(xe(!0));if($.key===" ")return X(je($.shiftKey?-1:1));if($.key==="!")return X(d(a.value*-1));if($.key==="Delete")return X(O());if($.key==="Backspace")return X(he());if(wr($.key,i))switch(h){case ws.Insert:return X(D($.key));case ws.Overwrite:return X(We($.key))}return!1})()&&$.preventDefault()},[Ae,O,i,r,D,a.value,we,Be,ne,d,he,We,xe,$e,h]),tt=w(()=>y.current?(y.current.focus(),!0):!1,[]),Et=w(()=>document.activeElement===y.current,[]);return mr(m,()=>({copy:Ae,focus:tt,hasFocus:Et,paste:Ve}),[Ae,tt,Et,Ve]),c("div",{autoFocus:e,class:ue,onKeyDown:He,ref:y,tabIndex:0,children:[af(Z)&&c("div",{class:Se,children:Z===_l.Negative?"-":"+"}),B.map(($,X)=>{const Te=vt([["IntegerStringInput_Char",!0],["selected",X===k],["solid",et(X)],["empty",Fe(X)]]);return c("div",{class:Te,onMouseDown:Ut=>{Ut.preventDefault(),tt(),!r&&(l&&i===F.Bin?je(1,X):te(X))},children:[$,!r&&X===k&&c("div",{class:"IntegerStringInput_Caret"})]},X)})]})});var ns=(t=>(t[t.Compact=0]="Compact",t[t.Full=1]="Full",t[t.None=2]="None",t))(ns||{});const df=Q.nativeEnum(ns);function El({actions:t,rowSize:e=8}){const s=w(a=>a.preventDefault(),[]),i=ie(()=>({gridTemplateColumns:`repeat(${e}, max-content)`}),[e]);return c("div",{class:"Keyboard",onMouseDown:s,style:i,children:t.map((a,r)=>a?c("div",{class:"Keyboard_Key",style:a.colSpan?{gridColumn:`span ${a.colSpan}`,width:"100%"}:void 0,children:c(Pt,{isSelected:a.isActive,label:c("div",{class:`Keyboard_Key_${a.size}`,children:a.label}),onClick:a.isActive?Fc:a.onClick},r)}):c("div",{},r))})}function Rl(t,e,s){Wt(()=>{e(Jn(t.valueRaw,s))},Jn.deps(void 0,s));const i={obj:t,setObj:e,context:s},a=Pe(nf.setValue,i);return[t,{setValue:a}]}function uf(t,e){const[s,i]=St(t);return Rl(s,i,e)}function $o(t,e,s){const[i,a]=Ie(t,e,ef.parse);return Rl(i,a,s)}const Ye="Calculator",Vo=Q.tuple([Q.boolean(),Q.boolean(),Q.boolean()]).parse,Fo=[!0,!0,!0],kr=()=>be(`${Ye}.editor.bin.isSigned`,!1),na=()=>be(`${Ye}.editor.dec.isSigned`,!1),Sr=()=>be(`${Ye}.editor.hex.isSigned`,!1),Cr=()=>Ie(`${Ye}.editors.caret`,Bi.Box,cf.parse),aa=()=>be(`${Ye}.editors.shouldFlipBitOnClick`,!1),ra=()=>be(`${Ye}.editors.shouldMoveAfterTyping`,!1),Or=()=>Ie(`${Ye}.editors.spaceFrequency`,Is.Digits8,lf.parse),oa=()=>Ie(`${Ye}.editors.typingDirection`,dt.Left,rf.parse),ca=()=>Ie(`${Ye}.editors.typingMode`,ws.Insert,of.parse),Pr=()=>be(`${Ye}.isAdvanced`,!0),Dl=()=>Ie(`${Ye}.keyboard.mode`,ns.Compact,df.parse),zo=t=>$o("Calculator.operand1",Kn,t),hf=()=>Ie(`${Ye}.operand1.visibility`,Fo,Vo),Qo=t=>$o("Calculator.operand2",Kn,t),pf=()=>Ie(`${Ye}.operand2.visibility`,Fo,Vo),ff=()=>Ie(`${Ye}.result.visibility`,Fo,Vo),Ir=()=>Ie(`${Ye}.operation`,Ue.Add,Jp.parse),Nl=()=>be(`${Ye}.tab.settings.isVisible`,!0),Ll=()=>be(`${Ye}.tab.tutorial.isVisible`,!1),cn=()=>Ie(`${Ye}.unit`,re.Word,hl.parse),mf=[{name:"Type",description:"Type a valid digit in the editor. The digit will either be inserted to the right of the cursor, or replace the selected digit depending on which typing mode is selected. Afterwards, the cursor moves to the right.",keybindings:["Digit"]},{name:"Delete (DEL)",description:"Delete the digit on the right of the cursor.",keybindings:["Delete"]},{name:"Backspace ()",description:"Delete the digit on the left of the cursor, then move the cursor to the left. If the cursors is already all the way to the left, then it will behave like Delete.",keybindings:["Backspace"]},{name:"Negate (NEG)",description:"If the selected editor is negative it becomes positive and vice-versa.",keybindings:["!"]},{name:"Shift Left ()",description:"Shift the digits of the selected editor to the left. The left-most digit is lost.",keybindings:["<"]},{name:"Shift Right ()",description:"Shift the digits of the selected editor to the right. The right-most digit is lost.",keybindings:[">"]},{name:"Rotate Left (ROL)",description:"Shift the digits of the selected editor to the left. The left-most digit is carried on the right side.",keybindings:["{"]},{name:"Rotate Right (ROR)",description:"Shift the digits of the selected editor to the right. The right-most digit is carried on the left side.",keybindings:["}"]},{name:"Clear (Cl)",description:"Set the value of the selected editor to zero.",keybindings:["Shift+Backspace","Shift+Delete"]},{name:"Increase (INC)",description:"Increase the selected digit by one. It wraps around if it exceeds the maximum. In binary, this is the equivalent of a bit flip.",keybindings:["Space"]},{name:"Decrease (DEC)",description:"Decrease the selected digit by one. It wraps around if it goes below zero. In binary, this is the equivalent of a bit flip.",keybindings:["Shift+Space"]},{name:"Movement",description:"Move across editors.",keybindings:["Arrow"]},{name:"Navigate",keybindings:["TAB","Shift+Tab"],description:"Navigate to the next/previous focusable element."},{name:"Copy",keybindings:["Ctrl+C","Cmd+C"],description:"Copy the value of the focused editor in the clipboard. You can also use the button on the right of the editor."},{name:"Paste",keybindings:["Ctrl+V","Cmd+V"],description:"Paste a value from the clipboard in the focused editor. You can also use the button on the right of the editor. It won't do anything if the clipboard doesn't contain a valid value."}],gf=[{name:"Add (+)",description:"Add the two operands together.",keybindings:["+"]},{name:"Subtract (-)",description:"Subtract operand 2 from operand 1.",keybindings:["-"]},{name:"AND",description:"Logical AND between the two operands.",keybindings:["&"]},{name:"OR",description:"Logical OR between the two operands.",keybindings:["|"]},{name:"XOR",description:"Logical XOR between the two operands.",keybindings:["^"]},{name:"Finalize (=)",description:"Transfer the result in operand 2.",keybindings:["="]},{name:"Clear All (CA)",description:"Clear all values (set them to 0).",keybindings:["Ctrl+Backspace","Ctrl+Delete"]},{name:"Swap Operands (SWAP)",description:"Swap operand 1 with operand 2.",keybindings:[";"]}],bf=[{name:"Advanced",values:[{type:"On",description:"Calculator mode."},{type:"Off",description:"Converter-only mode."}],keybindings:["Q"]},{name:"Unit",values:[{type:"Byte",description:"8-bit editing mode. The high byte is preserved and restored once switching back to 16-bit.",keybindings:["Y"]},{type:"Word",description:"16-bit editing mode.",keybindings:["W"]}]},{name:"Keyboard",values:[{type:"None",description:"Display no keyboard."},{type:"Compact",description:"Display keys corresponding to different operations."},{type:"Full",description:"Display all keys, including digits and arrows. This is a forced option on mobile."}],keybindings:[]},{name:"Typing Mode",values:[{type:"Insert",description:"Insert the typed digit where the cursor is.",keybindings:["I"]},{type:"Overwrite",description:"Replace the selected digit with the typed digit.",keybindings:["O"]}]},{name:"Typing Direction",values:[{type:"Left",description:"Move the cursors to the left after typing. Backspace moves to the right.",keybindings:["L"]},{type:"Right",description:"Move the cursors to the right after typing. Backspace moves to the left.",keybindings:["R"]}]},{name:"Move Cursor",values:[{type:"On",description:"Move cursor after typing."},{type:"Off",description:"Don't move cursor after typing."}],keybindings:["M"]},{name:"Flip Bit",values:[{type:"On",description:"Flip a bit of the binary editor when clicking on it."},{type:"Off",description:"Don't flip any bit when clicking on the editors."}],keybindings:["T"]},{name:"Signed Binary",values:[{type:"On",description:"Binary numbers are signed (they can be negative)."},{type:"Off",description:"Binary numbers are always positive."}],keybindings:[]},{name:"Signed Decimal",values:[{type:"On",description:"Decimal numbers are signed (they can be negative)."},{type:"Off",description:"Decimal numbers are always positive."}],keybindings:["N"]},{name:"Signed Hexadecimal",values:[{type:"On",description:"Hexadecimal numbers are signed (they can be negative)."},{type:"Off",description:"Hexadecimal numbers are always positive."}],keybindings:[]},{name:"Caret",values:[{type:"Bar",description:"Display a bar between digits, to the left of the selected digit."},{type:"Box",description:"Display a box around the selected digit."},{type:"Underline",description:"Display a dash below the selected digit."}],keybindings:[]},{name:"Space Frequency",values:[{type:"None",description:"No space between digits."},{type:"8 Digits",description:"Add a space every 8 digits."},{type:"4 Digits",description:"Add a space every 4 digits."}],keybindings:[]}],_f=[{name:"Settings",description:"Toggle settings tab visibility.",keybindings:["S"]},{name:"Instructions",description:"Toggle instructions tab visibility.",keybindings:["H"]}];function yf(){const[t,e]=Ll();return c(ee,{isVisible:t,onChangeVisibility:e,children:[c(ee.Section,{title:"General",children:[c("div",{children:"Click on a number to edit it. In a group (bin/dec/hex), the numbers are connected, editing one will cause the others to update. To hide numbers, click on the three toggle buttons on the top-right of the group."}),c("div",{children:["The calculator can be in two modes: ",c("i",{children:"basic"})," or ",c("i",{children:"advanced"}),". Basic mode allows to insert one value and instantly see it's binary, decimal, and hexadecimal counterparts. Advanced mode allows to performs basic logical and arithmetical operations between two values."]})]}),c(ee.Section,{title:"Typing Configurations",children:[c("div",{children:"You can customize how you type the digits of the numbers in different ways. However, I suggest sticking to one of these two presets, that reflect the most common or intuitive way of typing:"}),c("div",{children:[c("b",{children:"Number (default):"})," Typing Direction = Left, Typing Mode = Insert, Move Cursor = Off.",c("br",{}),"This is, in my opinion, the most intuitive way to type numbers: the digits will be inserted from right to left, without moving the cursor."]}),c("div",{children:[c("b",{children:"Text:"})," Typing Direction = Right, Typing Mode = Insert, Move Cursor = On.",c("br",{}),"This is how one usually types normal text, from left to right, shifting the cursor after typing."]})]}),c(ee.Section,{title:"Basic Actions",children:[c("div",{children:"Actions that can be performed while an editor is selected. Between parenthesis, you find the equivalent of the command on the visual keyboard."}),c(ee.Actions,{actions:mf})]}),c(ee.Section,{title:"Advanced Mode",children:[c("div",{children:"Calculator mode allows to perform operations between two values. The widget is divided in three groups (separated by lines): the first two are the operands, the last one holds the result of the operation (it cannot be modified manually)."}),c(ee.Actions,{actions:gf})]}),c(ee.Section,{title:"Settings",children:[c("div",{children:"Settings to customize the appearance and behavior of the calculator."}),c(ee.Settings,{settings:bf})]}),c(ee.Section,{title:"Visibility",children:[c("div",{children:"Shortcuts to toggle sections' visibility."}),c(ee.Actions,{actions:_f})]})]})}function vf(){const[t,e]=Pr();return c(G,{hotkey:"Q",label:"Advanced",children:c(ot,{onChange:e,options:on,value:t})})}const wf=[{label:"Bar",value:Bi.Bar},{label:"Box",value:Bi.Box},{label:"Underline",value:Bi.Underline}];function xf(){const[t,e]=Cr();return c(G,{label:"Caret",children:c(ot,{onChange:e,options:wf,value:t})})}function kf(){const[t,e]=aa();return c(G,{hotkey:"T",label:"Flip Bit",children:c(ot,{onChange:e,options:on,value:t})})}var Sf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cf(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var s=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var a=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(s,i,a.get?a:{enumerable:!0,get:function(){return t[i]}})}),s}var E={};const Of=Cf(Du);var oo={exports:{}};(function(t,e){(function(s,i){var a="1.0.37",r="",o="?",l="function",u="undefined",d="object",p="string",f="major",h="model",g="name",m="type",y="vendor",_="version",Z="architecture",B="console",k="mobile",O="tablet",D="smarttv",te="wearable",we="embedded",Be=500,ne="Amazon",he="Apple",We="ASUS",je="BlackBerry",xe="Browser",$e="Chrome",Ae="Edge",Ve="Firefox",_e="Google",et="Huawei",Fe="LG",ue="Microsoft",Se="Motorola",He="Opera",tt="Samsung",Et="Sharp",$="Sony",X="Xiaomi",Te="Zebra",Ut="Facebook",M="Chromium OS",ae="Mac OS",pe=function(J,de){var Y={};for(var fe in J)de[fe]&&de[fe].length%2===0?Y[fe]=de[fe].concat(J[fe]):Y[fe]=J[fe];return Y},le=function(J){for(var de={},Y=0;Y<J.length;Y++)de[J[Y].toUpperCase()]=J[Y];return de},Ge=function(J,de){return typeof J===p?Lt(de).indexOf(Lt(J))!==-1:!1},Lt=function(J){return J.toLowerCase()},hn=function(J){return typeof J===p?J.replace(/[^\d\.]/g,r).split(".")[0]:i},$r=function(J,de){if(typeof J===p)return J=J.replace(/^\s\s*/,r),typeof de===u?J:J.substring(0,Be)},pn=function(J,de){for(var Y=0,fe,ks,Zt,oe,U,Xt;Y<de.length&&!U;){var Fr=de[Y],oc=de[Y+1];for(fe=ks=0;fe<Fr.length&&!U&&Fr[fe];)if(U=Fr[fe++].exec(J),U)for(Zt=0;Zt<oc.length;Zt++)Xt=U[++ks],oe=oc[Zt],typeof oe===d&&oe.length>0?oe.length===2?typeof oe[1]==l?this[oe[0]]=oe[1].call(this,Xt):this[oe[0]]=oe[1]:oe.length===3?typeof oe[1]===l&&!(oe[1].exec&&oe[1].test)?this[oe[0]]=Xt?oe[1].call(this,Xt,oe[2]):i:this[oe[0]]=Xt?Xt.replace(oe[1],oe[2]):i:oe.length===4&&(this[oe[0]]=Xt?oe[3].call(this,Xt.replace(oe[1],oe[2])):i):this[oe]=Xt||i;Y+=2}},Vr=function(J,de){for(var Y in de)if(typeof de[Y]===d&&de[Y].length>0){for(var fe=0;fe<de[Y].length;fe++)if(Ge(de[Y][fe],J))return Y===o?i:Y}else if(Ge(de[Y],J))return Y===o?i:Y;return J},Au={"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},ac={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},rc={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[_,[g,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[_,[g,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[g,_],[/opios[\/ ]+([\w\.]+)/i],[_,[g,He+" Mini"]],[/\bopr\/([\w\.]+)/i],[_,[g,He]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[_,[g,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[g,_],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[_,[g,"UC"+xe]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[_,[g,"WeChat"]],[/konqueror\/([\w\.]+)/i],[_,[g,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[_,[g,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[_,[g,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[_,[g,"Smart Lenovo "+xe]],[/(avast|avg)\/([\w\.]+)/i],[[g,/(.+)/,"$1 Secure "+xe],_],[/\bfocus\/([\w\.]+)/i],[_,[g,Ve+" Focus"]],[/\bopt\/([\w\.]+)/i],[_,[g,He+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[_,[g,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[_,[g,"Dolphin"]],[/coast\/([\w\.]+)/i],[_,[g,He+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[_,[g,"MIUI "+xe]],[/fxios\/([-\w\.]+)/i],[_,[g,Ve]],[/\bqihu|(qi?ho?o?|360)browser/i],[[g,"360 "+xe]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[g,/(.+)/,"$1 "+xe],_],[/samsungbrowser\/([\w\.]+)/i],[_,[g,tt+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[g,/_/g," "],_],[/metasr[\/ ]?([\d\.]+)/i],[_,[g,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[g,"Sogou Mobile"],_],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[g,_],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[g],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[g,Ut],_],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[g,_],[/\bgsa\/([\w\.]+) .*safari\//i],[_,[g,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[_,[g,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[_,[g,$e+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[g,$e+" WebView"],_],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[_,[g,"Android "+xe]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[g,_],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[_,[g,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[_,g],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[g,[_,Vr,Au]],[/(webkit|khtml)\/([\w\.]+)/i],[g,_],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[g,"Netscape"],_],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[_,[g,Ve+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[g,_],[/(cobalt)\/([\w\.]+)/i],[g,[_,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[Z,"amd64"]],[/(ia32(?=;))/i],[[Z,Lt]],[/((?:i[346]|x)86)[;\)]/i],[[Z,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[Z,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[Z,"armhf"]],[/windows (ce|mobile); ppc;/i],[[Z,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[Z,/ower/,r,Lt]],[/(sun4\w)[;\)]/i],[[Z,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[Z,Lt]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[h,[y,tt],[m,O]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[h,[y,tt],[m,k]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[h,[y,he],[m,k]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[h,[y,he],[m,O]],[/(macintosh);/i],[h,[y,he]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[h,[y,Et],[m,k]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[h,[y,et],[m,O]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[h,[y,et],[m,k]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[h,/_/g," "],[y,X],[m,k]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[h,/_/g," "],[y,X],[m,O]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[h,[y,"OPPO"],[m,k]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[h,[y,"Vivo"],[m,k]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[h,[y,"Realme"],[m,k]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[h,[y,Se],[m,k]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[h,[y,Se],[m,O]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[h,[y,Fe],[m,O]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[h,[y,Fe],[m,k]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[h,[y,"Lenovo"],[m,O]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[h,/_/g," "],[y,"Nokia"],[m,k]],[/(pixel c)\b/i],[h,[y,_e],[m,O]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[h,[y,_e],[m,k]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[h,[y,$],[m,k]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[h,"Xperia Tablet"],[y,$],[m,O]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[h,[y,"OnePlus"],[m,k]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[h,[y,ne],[m,O]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[h,/(.+)/g,"Fire Phone $1"],[y,ne],[m,k]],[/(playbook);[-\w\),; ]+(rim)/i],[h,y,[m,O]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[h,[y,je],[m,k]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[h,[y,We],[m,O]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[h,[y,We],[m,k]],[/(nexus 9)/i],[h,[y,"HTC"],[m,O]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[y,[h,/_/g," "],[m,k]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[h,[y,"Acer"],[m,O]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[h,[y,"Meizu"],[m,k]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[h,[y,"Ulefone"],[m,k]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[y,h,[m,k]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[y,h,[m,O]],[/(surface duo)/i],[h,[y,ue],[m,O]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[h,[y,"Fairphone"],[m,k]],[/(u304aa)/i],[h,[y,"AT&T"],[m,k]],[/\bsie-(\w*)/i],[h,[y,"Siemens"],[m,k]],[/\b(rct\w+) b/i],[h,[y,"RCA"],[m,O]],[/\b(venue[\d ]{2,7}) b/i],[h,[y,"Dell"],[m,O]],[/\b(q(?:mv|ta)\w+) b/i],[h,[y,"Verizon"],[m,O]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[h,[y,"Barnes & Noble"],[m,O]],[/\b(tm\d{3}\w+) b/i],[h,[y,"NuVision"],[m,O]],[/\b(k88) b/i],[h,[y,"ZTE"],[m,O]],[/\b(nx\d{3}j) b/i],[h,[y,"ZTE"],[m,k]],[/\b(gen\d{3}) b.+49h/i],[h,[y,"Swiss"],[m,k]],[/\b(zur\d{3}) b/i],[h,[y,"Swiss"],[m,O]],[/\b((zeki)?tb.*\b) b/i],[h,[y,"Zeki"],[m,O]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[y,"Dragon Touch"],h,[m,O]],[/\b(ns-?\w{0,9}) b/i],[h,[y,"Insignia"],[m,O]],[/\b((nxa|next)-?\w{0,9}) b/i],[h,[y,"NextBook"],[m,O]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[y,"Voice"],h,[m,k]],[/\b(lvtel\-)?(v1[12]) b/i],[[y,"LvTel"],h,[m,k]],[/\b(ph-1) /i],[h,[y,"Essential"],[m,k]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[h,[y,"Envizen"],[m,O]],[/\b(trio[-\w\. ]+) b/i],[h,[y,"MachSpeed"],[m,O]],[/\btu_(1491) b/i],[h,[y,"Rotor"],[m,O]],[/(shield[\w ]+) b/i],[h,[y,"Nvidia"],[m,O]],[/(sprint) (\w+)/i],[y,h,[m,k]],[/(kin\.[onetw]{3})/i],[[h,/\./g," "],[y,ue],[m,k]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[h,[y,Te],[m,O]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[h,[y,Te],[m,k]],[/smart-tv.+(samsung)/i],[y,[m,D]],[/hbbtv.+maple;(\d+)/i],[[h,/^/,"SmartTV"],[y,tt],[m,D]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[y,Fe],[m,D]],[/(apple) ?tv/i],[y,[h,he+" TV"],[m,D]],[/crkey/i],[[h,$e+"cast"],[y,_e],[m,D]],[/droid.+aft(\w+)( bui|\))/i],[h,[y,ne],[m,D]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[h,[y,Et],[m,D]],[/(bravia[\w ]+)( bui|\))/i],[h,[y,$],[m,D]],[/(mitv-\w{5}) bui/i],[h,[y,X],[m,D]],[/Hbbtv.*(technisat) (.*);/i],[y,h,[m,D]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[y,$r],[h,$r],[m,D]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[m,D]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[y,h,[m,B]],[/droid.+; (shield) bui/i],[h,[y,"Nvidia"],[m,B]],[/(playstation [345portablevi]+)/i],[h,[y,$],[m,B]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[h,[y,ue],[m,B]],[/((pebble))app/i],[y,h,[m,te]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[h,[y,he],[m,te]],[/droid.+; (glass) \d/i],[h,[y,_e],[m,te]],[/droid.+; (wt63?0{2,3})\)/i],[h,[y,Te],[m,te]],[/(quest( 2| pro)?)/i],[h,[y,Ut],[m,te]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[y,[m,we]],[/(aeobc)\b/i],[h,[y,ne],[m,we]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[h,[m,k]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[h,[m,O]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[m,O]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[m,k]],[/(android[-\w\. ]{0,9});.+buil/i],[h,[y,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[_,[g,Ae+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[_,[g,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[g,_],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[_,g]],os:[[/microsoft (windows) (vista|xp)/i],[g,_],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[g,[_,Vr,ac]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[_,Vr,ac],[g,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[_,/_/g,"."],[g,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[g,ae],[_,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[_,g],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[g,_],[/\(bb(10);/i],[_,[g,je]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[_,[g,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[_,[g,Ve+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[_,[g,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[_,[g,"watchOS"]],[/crkey\/([\d\.]+)/i],[_,[g,$e+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[g,M],_],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[g,_],[/(sunos) ?([\w\.\d]*)/i],[[g,"Solaris"],_],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[g,_]]},Mt=function(J,de){if(typeof J===d&&(de=J,J=i),!(this instanceof Mt))return new Mt(J,de).getResult();var Y=typeof s!==u&&s.navigator?s.navigator:i,fe=J||(Y&&Y.userAgent?Y.userAgent:r),ks=Y&&Y.userAgentData?Y.userAgentData:i,Zt=de?pe(rc,de):rc,oe=Y&&Y.userAgent==fe;return this.getBrowser=function(){var U={};return U[g]=i,U[_]=i,pn.call(U,fe,Zt.browser),U[f]=hn(U[_]),oe&&Y&&Y.brave&&typeof Y.brave.isBrave==l&&(U[g]="Brave"),U},this.getCPU=function(){var U={};return U[Z]=i,pn.call(U,fe,Zt.cpu),U},this.getDevice=function(){var U={};return U[y]=i,U[h]=i,U[m]=i,pn.call(U,fe,Zt.device),oe&&!U[m]&&ks&&ks.mobile&&(U[m]=k),oe&&U[h]=="Macintosh"&&Y&&typeof Y.standalone!==u&&Y.maxTouchPoints&&Y.maxTouchPoints>2&&(U[h]="iPad",U[m]=O),U},this.getEngine=function(){var U={};return U[g]=i,U[_]=i,pn.call(U,fe,Zt.engine),U},this.getOS=function(){var U={};return U[g]=i,U[_]=i,pn.call(U,fe,Zt.os),oe&&!U[g]&&ks&&ks.platform!="Unknown"&&(U[g]=ks.platform.replace(/chrome os/i,M).replace(/macos/i,ae)),U},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return fe},this.setUA=function(U){return fe=typeof U===p&&U.length>Be?$r(U,Be):U,this},this.setUA(fe),this};Mt.VERSION=a,Mt.BROWSER=le([g,_,f]),Mt.CPU=le([Z]),Mt.DEVICE=le([h,y,m,B,k,D,O,te,we]),Mt.ENGINE=Mt.OS=le([g,_]),t.exports&&(e=t.exports=Mt),e.UAParser=Mt;var ri=typeof s!==u&&(s.jQuery||s.Zepto);if(ri&&!ri.ua){var pa=new Mt;ri.ua=pa.getResult(),ri.ua.get=function(){return pa.getUA()},ri.ua.set=function(J){pa.setUA(J);var de=pa.getResult();for(var Y in de)ri.ua[Y]=de[Y]}}})(typeof window=="object"?window:Sf)})(oo,oo.exports);var Pf=oo.exports;Object.defineProperty(E,"__esModule",{value:!0});function If(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var nt=Of,me=If(nt),Ml=Pf,Ls=new Ml,lt=Ls.getBrowser(),Af=Ls.getCPU(),Tt=Ls.getDevice(),Wo=Ls.getEngine(),Ms=Ls.getOS(),la=Ls.getUA(),Bl=function(e){return Ls.setUA(e)},da=function(e){if(!e){console.error("No userAgent string was provided");return}var s=new Ml(e);return{UA:s,browser:s.getBrowser(),cpu:s.getCPU(),device:s.getDevice(),engine:s.getEngine(),os:s.getOS(),ua:s.getUA(),setUserAgent:function(a){return s.setUA(a)}}},$l=Object.freeze({ClientUAInstance:Ls,browser:lt,cpu:Af,device:Tt,engine:Wo,os:Ms,ua:la,setUa:Bl,parseUserAgent:da});function bc(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,i)}return s}function Tf(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?bc(Object(s),!0).forEach(function(i){Nf(t,i,s[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):bc(Object(s)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(s,i))})}return t}function Ln(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ln=function(e){return typeof e}:Ln=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ln(t)}function Ef(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Rf(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Df(t,e,s){return e&&Rf(t.prototype,e),t}function Nf(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function co(){return co=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},co.apply(this,arguments)}function Lf(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&uo(t,e)}function lo(t){return lo=Object.setPrototypeOf?Object.getPrototypeOf:function(s){return s.__proto__||Object.getPrototypeOf(s)},lo(t)}function uo(t,e){return uo=Object.setPrototypeOf||function(i,a){return i.__proto__=a,i},uo(t,e)}function Mf(t,e){if(t==null)return{};var s={},i=Object.keys(t),a,r;for(r=0;r<i.length;r++)a=i[r],!(e.indexOf(a)>=0)&&(s[a]=t[a]);return s}function Dt(t,e){if(t==null)return{};var s=Mf(t,e),i,a;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(s[i]=t[i])}return s}function Pa(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Bf(t,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pa(t)}function $f(t,e){return Vf(t)||Ff(t,e)||zf(t,e)||Qf()}function Vf(t){if(Array.isArray(t))return t}function Ff(t,e){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var i=[],a=!0,r=!1,o,l;try{for(s=s.call(t);!(a=(o=s.next()).done)&&(i.push(o.value),!(e&&i.length===e));a=!0);}catch(u){r=!0,l=u}finally{try{!a&&s.return!=null&&s.return()}finally{if(r)throw l}}return i}}function zf(t,e){if(t){if(typeof t=="string")return _c(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return _c(t,e)}}function _c(t,e){(e==null||e>t.length)&&(e=t.length);for(var s=0,i=new Array(e);s<e;s++)i[s]=t[s];return i}function Qf(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var st={Mobile:"mobile",Tablet:"tablet",SmartTv:"smarttv",Console:"console",Wearable:"wearable",Embedded:"embedded",Browser:void 0},xt={Chrome:"Chrome",Firefox:"Firefox",Opera:"Opera",Yandex:"Yandex",Safari:"Safari",InternetExplorer:"Internet Explorer",Edge:"Edge",Chromium:"Chromium",Ie:"IE",MobileSafari:"Mobile Safari",EdgeChromium:"Edge Chromium",MIUI:"MIUI Browser",SamsungBrowser:"Samsung Browser"},ln={IOS:"iOS",Android:"Android",WindowsPhone:"Windows Phone",Windows:"Windows",MAC_OS:"Mac OS"},Wf={isMobile:!1,isTablet:!1,isBrowser:!1,isSmartTV:!1,isConsole:!1,isWearable:!1},Uf=function(e){switch(e){case st.Mobile:return{isMobile:!0};case st.Tablet:return{isTablet:!0};case st.SmartTv:return{isSmartTV:!0};case st.Console:return{isConsole:!0};case st.Wearable:return{isWearable:!0};case st.Browser:return{isBrowser:!0};case st.Embedded:return{isEmbedded:!0};default:return Wf}},Zf=function(e){return Bl(e)},W=function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none";return e||s},Uo=function(){return typeof window<"u"&&(window.navigator||navigator)?window.navigator||navigator:!1},Zo=function(e){var s=Uo();return s&&s.platform&&(s.platform.indexOf(e)!==-1||s.platform==="MacIntel"&&s.maxTouchPoints>1&&!window.MSStream)},Xf=function(e,s,i,a,r){return{isBrowser:e,browserMajorVersion:W(s.major),browserFullVersion:W(s.version),browserName:W(s.name),engineName:W(i.name),engineVersion:W(i.version),osName:W(a.name),osVersion:W(a.version),userAgent:W(r)}},yc=function(e,s,i,a){return Tf({},e,{vendor:W(s.vendor),model:W(s.model),os:W(i.name),osVersion:W(i.version),ua:W(a)})},Yf=function(e,s,i,a){return{isSmartTV:e,engineName:W(s.name),engineVersion:W(s.version),osName:W(i.name),osVersion:W(i.version),userAgent:W(a)}},jf=function(e,s,i,a){return{isConsole:e,engineName:W(s.name),engineVersion:W(s.version),osName:W(i.name),osVersion:W(i.version),userAgent:W(a)}},Hf=function(e,s,i,a){return{isWearable:e,engineName:W(s.name),engineVersion:W(s.version),osName:W(i.name),osVersion:W(i.version),userAgent:W(a)}},Gf=function(e,s,i,a,r){return{isEmbedded:e,vendor:W(s.vendor),model:W(s.model),engineName:W(i.name),engineVersion:W(i.version),osName:W(a.name),osVersion:W(a.version),userAgent:W(r)}};function qf(t){var e=t?da(t):$l,s=e.device,i=e.browser,a=e.engine,r=e.os,o=e.ua,l=Uf(s.type),u=l.isBrowser,d=l.isMobile,p=l.isTablet,f=l.isSmartTV,h=l.isConsole,g=l.isWearable,m=l.isEmbedded;if(u)return Xf(u,i,a,r,o);if(f)return Yf(f,a,r,o);if(h)return jf(h,a,r,o);if(d||p)return yc(l,s,r,o);if(g)return Hf(g,a,r,o);if(m)return Gf(m,s,a,r,o)}var Vl=function(e){var s=e.type;return s===st.Mobile},Fl=function(e){var s=e.type;return s===st.Tablet},zl=function(e){var s=e.type;return s===st.Mobile||s===st.Tablet},Ql=function(e){var s=e.type;return s===st.SmartTv},or=function(e){var s=e.type;return s===st.Browser},Wl=function(e){var s=e.type;return s===st.Wearable},Ul=function(e){var s=e.type;return s===st.Console},Zl=function(e){var s=e.type;return s===st.Embedded},Xl=function(e){var s=e.vendor;return W(s)},Yl=function(e){var s=e.model;return W(s)},jl=function(e){var s=e.type;return W(s,"browser")},Hl=function(e){var s=e.name;return s===ln.Android},Gl=function(e){var s=e.name;return s===ln.Windows},ql=function(e){var s=e.name;return s===ln.MAC_OS},Kl=function(e){var s=e.name;return s===ln.WindowsPhone},Jl=function(e){var s=e.name;return s===ln.IOS},ed=function(e){var s=e.version;return W(s)},td=function(e){var s=e.name;return W(s)},sd=function(e){var s=e.name;return s===xt.Chrome},id=function(e){var s=e.name;return s===xt.Firefox},nd=function(e){var s=e.name;return s===xt.Chromium},cr=function(e){var s=e.name;return s===xt.Edge},ad=function(e){var s=e.name;return s===xt.Yandex},rd=function(e){var s=e.name;return s===xt.Safari||s===xt.MobileSafari},od=function(e){var s=e.name;return s===xt.MobileSafari},cd=function(e){var s=e.name;return s===xt.Opera},ld=function(e){var s=e.name;return s===xt.InternetExplorer||s===xt.Ie},dd=function(e){var s=e.name;return s===xt.MIUI},ud=function(e){var s=e.name;return s===xt.SamsungBrowser},hd=function(e){var s=e.version;return W(s)},pd=function(e){var s=e.major;return W(s)},fd=function(e){var s=e.name;return W(s)},md=function(e){var s=e.name;return W(s)},gd=function(e){var s=e.version;return W(s)},bd=function(){var e=Uo(),s=e&&e.userAgent&&e.userAgent.toLowerCase();return typeof s=="string"?/electron/.test(s):!1},$i=function(e){return typeof e=="string"&&e.indexOf("Edg/")!==-1},_d=function(){var e=Uo();return e&&(/iPad|iPhone|iPod/.test(e.platform)||e.platform==="MacIntel"&&e.maxTouchPoints>1)&&!window.MSStream},Ht=function(){return Zo("iPad")},yd=function(){return Zo("iPhone")},vd=function(){return Zo("iPod")},wd=function(e){return W(e)};function xd(t){var e=t||$l,s=e.device,i=e.browser,a=e.os,r=e.engine,o=e.ua;return{isSmartTV:Ql(s),isConsole:Ul(s),isWearable:Wl(s),isEmbedded:Zl(s),isMobileSafari:od(i)||Ht(),isChromium:nd(i),isMobile:zl(s)||Ht(),isMobileOnly:Vl(s),isTablet:Fl(s)||Ht(),isBrowser:or(s),isDesktop:or(s),isAndroid:Hl(a),isWinPhone:Kl(a),isIOS:Jl(a)||Ht(),isChrome:sd(i),isFirefox:id(i),isSafari:rd(i),isOpera:cd(i),isIE:ld(i),osVersion:ed(a),osName:td(a),fullBrowserVersion:hd(i),browserVersion:pd(i),browserName:fd(i),mobileVendor:Xl(s),mobileModel:Yl(s),engineName:md(r),engineVersion:gd(r),getUA:wd(o),isEdge:cr(i)||$i(o),isYandex:ad(i),deviceType:jl(s),isIOS13:_d(),isIPad13:Ht(),isIPhone13:yd(),isIPod13:vd(),isElectron:bd(),isEdgeChromium:$i(o),isLegacyEdge:cr(i)&&!$i(o),isWindows:Gl(a),isMacOs:ql(a),isMIUI:dd(i),isSamsungBrowser:ud(i)}}var kd=Ql(Tt),Sd=Ul(Tt),Cd=Wl(Tt),Kf=Zl(Tt),Jf=od(lt)||Ht(),em=nd(lt),Ar=zl(Tt)||Ht(),Od=Vl(Tt),Pd=Fl(Tt)||Ht(),Id=or(Tt),tm=or(Tt),Ad=Hl(Ms),Td=Kl(Ms),Ed=Jl(Ms)||Ht(),sm=sd(lt),im=id(lt),nm=rd(lt),am=cd(lt),Rd=ld(lt),rm=ed(Ms),om=td(Ms),cm=hd(lt),lm=pd(lt),dm=fd(lt),um=Xl(Tt),hm=Yl(Tt),pm=md(Wo),fm=gd(Wo),mm=wd(la),gm=cr(lt)||$i(la),bm=ad(lt),_m=jl(Tt),ym=_d(),vm=Ht(),wm=yd(),xm=vd(),km=bd(),Sm=$i(la),Cm=cr(lt)&&!$i(la),Om=Gl(Ms),Pm=ql(Ms),Im=dd(lt),Am=ud(lt),Tm=function(e){if(!e||typeof e!="string"){console.error("No valid user agent string was provided");return}var s=da(e),i=s.device,a=s.browser,r=s.os,o=s.engine,l=s.ua;return xd({device:i,browser:a,os:r,engine:o,ua:l})},Em=function(e){var s=e.renderWithFragment,i=e.children,a=Dt(e,["renderWithFragment","children"]);return Ad?s?me.createElement(nt.Fragment,null,i):me.createElement("div",a,i):null},Rm=function(e){var s=e.renderWithFragment,i=e.children,a=Dt(e,["renderWithFragment","children"]);return Id?s?me.createElement(nt.Fragment,null,i):me.createElement("div",a,i):null},Dm=function(e){var s=e.renderWithFragment,i=e.children,a=Dt(e,["renderWithFragment","children"]);return Rd?s?me.createElement(nt.Fragment,null,i):me.createElement("div",a,i):null},Nm=function(e){var s=e.renderWithFragment,i=e.children,a=Dt(e,["renderWithFragment","children"]);return Ed?s?me.createElement(nt.Fragment,null,i):me.createElement("div",a,i):null},Lm=function(e){var s=e.renderWithFragment,i=e.children,a=Dt(e,["renderWithFragment","children"]);return Ar?s?me.createElement(nt.Fragment,null,i):me.createElement("div",a,i):null},Mm=function(e){var s=e.renderWithFragment,i=e.children,a=Dt(e,["renderWithFragment","children"]);return Pd?s?me.createElement(nt.Fragment,null,i):me.createElement("div",a,i):null},Bm=function(e){var s=e.renderWithFragment,i=e.children,a=Dt(e,["renderWithFragment","children"]);return Td?s?me.createElement(nt.Fragment,null,i):me.createElement("div",a,i):null},$m=function(e){var s=e.renderWithFragment,i=e.children;e.viewClassName,e.style;var a=Dt(e,["renderWithFragment","children","viewClassName","style"]);return Od?s?me.createElement(nt.Fragment,null,i):me.createElement("div",a,i):null},Vm=function(e){var s=e.renderWithFragment,i=e.children,a=Dt(e,["renderWithFragment","children"]);return kd?s?me.createElement(nt.Fragment,null,i):me.createElement("div",a,i):null},Fm=function(e){var s=e.renderWithFragment,i=e.children,a=Dt(e,["renderWithFragment","children"]);return Sd?s?me.createElement(nt.Fragment,null,i):me.createElement("div",a,i):null},zm=function(e){var s=e.renderWithFragment,i=e.children,a=Dt(e,["renderWithFragment","children"]);return Cd?s?me.createElement(nt.Fragment,null,i):me.createElement("div",a,i):null},Qm=function(e){var s=e.renderWithFragment,i=e.children;e.viewClassName,e.style;var a=e.condition,r=Dt(e,["renderWithFragment","children","viewClassName","style","condition"]);return a?s?me.createElement(nt.Fragment,null,i):me.createElement("div",r,i):null};function Wm(t){return function(e){Lf(s,e);function s(i){var a;return Ef(this,s),a=Bf(this,lo(s).call(this,i)),a.isEventListenerAdded=!1,a.handleOrientationChange=a.handleOrientationChange.bind(Pa(a)),a.onOrientationChange=a.onOrientationChange.bind(Pa(a)),a.onPageLoad=a.onPageLoad.bind(Pa(a)),a.state={isLandscape:!1,isPortrait:!1},a}return Df(s,[{key:"handleOrientationChange",value:function(){this.isEventListenerAdded||(this.isEventListenerAdded=!0);var a=window.innerWidth>window.innerHeight?90:0;this.setState({isPortrait:a===0,isLandscape:a===90})}},{key:"onOrientationChange",value:function(){this.handleOrientationChange()}},{key:"onPageLoad",value:function(){this.handleOrientationChange()}},{key:"componentDidMount",value:function(){(typeof window>"u"?"undefined":Ln(window))!==void 0&&Ar&&(this.isEventListenerAdded?window.removeEventListener("load",this.onPageLoad,!1):(this.handleOrientationChange(),window.addEventListener("load",this.onPageLoad,!1)),window.addEventListener("resize",this.onOrientationChange,!1))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onOrientationChange,!1)}},{key:"render",value:function(){return me.createElement(t,co({},this.props,{isLandscape:this.state.isLandscape,isPortrait:this.state.isPortrait}))}}]),s}(me.Component)}function Um(){var t=nt.useState(function(){var r=window.innerWidth>window.innerHeight?90:0;return{isPortrait:r===0,isLandscape:r===90,orientation:r===0?"portrait":"landscape"}}),e=$f(t,2),s=e[0],i=e[1],a=nt.useCallback(function(){var r=window.innerWidth>window.innerHeight?90:0,o={isPortrait:r===0,isLandscape:r===90,orientation:r===0?"portrait":"landscape"};s.orientation!==o.orientation&&i(o)},[s.orientation]);return nt.useEffect(function(){return(typeof window>"u"?"undefined":Ln(window))!==void 0&&Ar&&(a(),window.addEventListener("load",a,!1),window.addEventListener("resize",a,!1)),function(){window.removeEventListener("resize",a,!1),window.removeEventListener("load",a,!1)}},[a]),s}function Dd(t){var e=t||window.navigator.userAgent;return da(e)}function Zm(t){var e=t||window.navigator.userAgent,s=Dd(e),i=xd(s);return[i,s]}E.AndroidView=Em;E.BrowserTypes=xt;E.BrowserView=Rm;E.ConsoleView=Fm;E.CustomView=Qm;E.IEView=Dm;E.IOSView=Nm;E.MobileOnlyView=$m;E.MobileView=Lm;E.OsTypes=ln;E.SmartTVView=Vm;E.TabletView=Mm;E.WearableView=zm;E.WinPhoneView=Bm;E.browserName=dm;E.browserVersion=lm;E.deviceDetect=qf;E.deviceType=_m;E.engineName=pm;E.engineVersion=fm;E.fullBrowserVersion=cm;E.getSelectorsByUserAgent=Tm;E.getUA=mm;E.isAndroid=Ad;E.isBrowser=Id;E.isChrome=sm;E.isChromium=em;E.isConsole=Sd;E.isDesktop=tm;E.isEdge=gm;E.isEdgeChromium=Sm;E.isElectron=km;E.isEmbedded=Kf;E.isFirefox=im;E.isIE=Rd;E.isIOS=Ed;E.isIOS13=ym;E.isIPad13=vm;E.isIPhone13=wm;E.isIPod13=xm;E.isLegacyEdge=Cm;E.isMIUI=Im;E.isMacOs=Pm;var Di=E.isMobile=Ar;E.isMobileOnly=Od;E.isMobileSafari=Jf;E.isOpera=am;E.isSafari=nm;E.isSamsungBrowser=Am;E.isSmartTV=kd;E.isTablet=Pd;E.isWearable=Cd;E.isWinPhone=Td;E.isWindows=Om;E.isYandex=bm;E.mobileModel=hm;E.mobileVendor=um;E.osName=om;E.osVersion=rm;E.parseUserAgent=da;E.setUserAgent=Zf;E.useDeviceData=Dd;E.useDeviceSelectors=Zm;E.useMobileOrientation=Um;E.withOrientationChange=Wm;const Xm=[{label:"None",value:ns.None},{label:"Compact",value:ns.Compact},{label:"Full",value:ns.Full}];function Ym(){const[t,e]=Dl();return Di?null:c(G,{label:"Keyboard",children:c(ot,{onChange:e,options:Xm,value:t})})}function jm(){const[t,e]=ra();return c(G,{hotkey:"M",label:"Move Cursor",children:c(ot,{onChange:e,options:on,value:t})})}function Hm(){const[t,e]=kr();return c(G,{label:"Signed Binary",children:c(ot,{onChange:e,options:on,value:t})})}function Gm(){const[t,e]=na();return c(G,{hotkey:"N",label:"Signed Decimal",children:c(ot,{onChange:e,options:on,value:t})})}function qm(){const[t,e]=Sr();return c(G,{label:"Signed Hexadecimal",children:c(ot,{onChange:e,options:on,value:t})})}const Km=[{label:"None",value:Is.None},{label:"8 Digits",value:Is.Digits8},{label:"4 Digits",value:Is.Digits4}];function Jm(){const[t,e]=Or();return c(G,{label:"Space Frequency",children:c(ot,{onChange:e,options:Km,value:t})})}const eg=[{label:"Left",value:dt.Left},{label:"Right",value:dt.Right}];function tg(){const[t,e]=oa();return c(G,{hotkey:"L/R",label:"Typing Direction",children:c(ot,{onChange:e,options:eg,value:t})})}const sg=[{label:"Insert",value:ws.Insert},{label:"Overwrite",value:ws.Overwrite}];function ig(){const[t,e]=ca();return c(G,{hotkey:"I/O",label:"Typing Mode",children:c(ot,{onChange:e,options:sg,value:t})})}const ng=[{label:"Byte",value:re.Byte},{label:"Word",value:re.Word}];function ag(){const[t,e]=cn();return c(G,{hotkey:"Y/W",label:"Unit",children:c(ot,{onChange:e,options:ng,value:t})})}function rg(){const[t,e]=Nl();return c(Ct,{isVisible:t,label:"Settings",onChange:e,children:c("div",{class:"App_SectionCol",children:[c("div",{class:"App_SectionRow",children:[c(vf,{}),c(ag,{}),c(Ym,{}),c(kf,{})]}),c("div",{class:"App_SectionRow",children:[c(ig,{}),c(tg,{}),c(jm,{})]}),c("div",{class:"App_SectionRow",children:[c(Hm,{}),c(Gm,{}),c(qm,{})]}),c("div",{class:"App_SectionRow",children:[c(xf,{}),c(Jm,{})]})]})})}const og={[Ue.And]:"AND",[Ue.Add]:"+",[Ue.Or]:"OR",[Ue.Subtract]:"-",[Ue.Xor]:"XOR"};function Nd(){const[,t]=Ir(),e=w(l=>t(l),[t]),s=w(()=>e(Ue.Add),[e]),i=w(()=>e(Ue.Subtract),[e]),a=w(()=>e(Ue.And),[e]),r=w(()=>e(Ue.Or),[e]),o=w(()=>e(Ue.Xor),[e]);return{add:s,and:a,or:r,subtract:i,xor:o}}function Ld(t,e,s,i){return ie(()=>{const a=(()=>{switch(s){case Ue.Add:return Ha(t.value+e.value,nr[i].max+1);case Ue.And:return t.value&e.value;case Ue.Or:return t.value|e.value;case Ue.Subtract:return Ha(t.value-e.value,nr[i].max+1);case Ue.Xor:return t.value^e.value}})(),r=Jn(a,{unit:i});return[r,()=>r]},[t.value,e.value,s,i])}function Md(){const[t]=cn(),e=ie(()=>({encoding:F.Bin,isSigned:!1,unit:t}),[t]),[s,{setValue:i}]=zo(e),[a,{setValue:r}]=Qo(e),[o]=Ir(),[l]=Ld(s,a,o,t),u=w(()=>{r(l.value)},[l.value]),d=w(()=>{i(0),r(0)},[i,r]),p=w(()=>{i(a.value),r(s.value)},[s.value,a.value,i,r]);return{clear:d,finalize:u,swap:p}}function cg(){const[t]=Eo(),[e,s]=Pr(),{add:i,and:a,or:r,subtract:o,xor:l}=Nd(),[,u]=na(),[,d]=aa(),[,p]=ra(),[,f]=oa(),[,h]=ca(),[,g]=Nl(),[,m]=Ll(),[,y]=cn(),{clear:_,finalize:Z,swap:B}=Md(),k=ie(()=>{const O=[];return t&&(O.push({key:"q",onPress:()=>s(jt)}),O.push({key:"s",onPress:()=>g(jt)}),O.push({key:"h",onPress:()=>m(jt)}),O.push({key:"t",onPress:()=>d(jt)}),O.push({key:"y",onPress:()=>y(re.Byte)}),O.push({key:"w",onPress:()=>y(re.Word)}),O.push({key:"i",onPress:()=>h(ws.Insert)}),O.push({key:"o",onPress:()=>h(ws.Overwrite)}),O.push({key:"l",onPress:()=>f(dt.Left)}),O.push({key:"r",onPress:()=>f(dt.Right)}),O.push({key:"m",onPress:()=>p(jt)}),O.push({key:"n",onPress:()=>u(jt)}),e&&(O.push({key:"Backspace",ctrl:!0,onPress:()=>Ke(_())}),O.push({key:"Delete",ctrl:!0,onPress:()=>Ke(_())}),O.push({key:";",onPress:B}),O.push({key:"+",onPress:i}),O.push({key:"-",onPress:o}),O.push({key:"&",onPress:a}),O.push({key:"|",onPress:r}),O.push({key:"^",onPress:l}),O.push({key:"=",onPress:Z}))),O},[i,a,e,_,Z,t,r,h,y,o,B,l]);return an(k),null}function ea({Icon:t,isSelected:e=!1,onClick:s,tooltip:i,tooltipPosition:a}){return c("div",{class:"IconButton",children:c(Pt,{isBorderless:!0,isSelected:e,label:c(t,{size:"1em"}),onClick:s,tooltip:i,tooltipPosition:a})})}function Xo({actions:t,children:e,label:s}){return c(Yc,{header:c("div",{class:"Section_Header",children:[c("span",{children:s}),c("div",{class:"Section_Header_Actions App_SectionCluster",children:t==null?void 0:t.map(i=>c(ea,{Icon:i.icon,onClick:i.onClick,tooltip:i.tooltip}))})]}),children:e})}function Yo(t,e,s){const[i,a]=St({item:t}),r=Oe(0),o=w(()=>(a({item:e}),clearTimeout(r.current),r.current=setTimeout(()=>a({item:t}),s),()=>clearTimeout(r.current)),[t,s,i]);return[i.item,o]}function lg({encoding:t,isSigned:e,spaceFrequency:s,unit:i}){const a=ie(()=>{const o=t!==void 0?vs[i][t]:0;return as(o).reverse()},[t,i]),r=vt([["Caption",!0],["space-4",s===Is.Digits4],["space-8",s===Is.Digits8]]);return c("div",{class:r,children:[e&&c("div",{class:"Caption_Char",children:c("span",{children:""})}),a.map(o=>c("div",{class:"Caption_Char",children:c("span",{children:ml(o)})},o))]})}function dg({labels:t,onChange:e,values:s}){return c("div",{class:"CheckGroup",children:t.map((i,a)=>{const r=s[a];return r===void 0?null:c(Pt,{isSelected:r,label:i,onClick:()=>{const l=Oo(s,a,!r);e(l)}},i)})})}const ug=["B","D","H"];function Zr({children:t,isPasteIconHidden:e=!1,label:s,onCopy:i,onPaste:a}){const[r,o]=Yo(Io,Po,1e3),l=w(()=>{o(),i()},[i,o]);return c(Wi,{children:[c("span",{class:"IntegerInput_Label",children:s}),c("div",{class:"IntegerInput_Input",children:t}),c("div",{class:"IntegerInput_Actions",children:[c(ea,{Icon:r,onClick:l,tooltip:"Copy"}),!e&&c(ea,{Icon:Xc,onClick:a,tooltip:"Paste"})]})]})}const Xr=t=>{const e=w(()=>{var i;return(i=t.current)==null?void 0:i.copy()},[t]),s=w(()=>{var i;return(i=t.current)==null?void 0:i.paste()},[t]);return{copy:e,paste:s,ref:t}},jo=ii(function({autoFocus:e,caret:s,integer:i,isDisabled:a=!1,isPasteIconHidden:r=!1,isSignedBin:o=!1,isSignedDec:l=!1,isSignedHex:u=!1,minCaptionEncoding:d,onChangeValue:p,onChangeVisibility:f,prefixBin:h="",prefixDec:g="",prefixHex:m="",shouldFlipBitOnClick:y,shouldMoveAfterTyping:_,shouldShowLine:Z=!1,spaceFrequency:B,typingDirection:k,typingMode:O,unit:D,visibility:te},we){const Be={caret:s,integer:i,isDisabled:a,onChangeValue:p,shouldFlipBitOnClick:y,shouldMoveAfterTyping:_,spaceFrequency:B,typingDirection:k,typingMode:O,unit:D},ne=Oe(null),he=Oe(null),We=Oe(null),je=Xr(ne),xe=Xr(he),$e=Xr(We),Ae=te[0]?ne:void 0,Ve=te[1]?he:void 0,_e=te[2]?We:void 0,et=Ve??_e,Fe=Ae,ue=_e,Se=Ve??Ae,He=Ae??Ve??_e,tt=_e??Ve??Ae;mr(we,()=>({focusFirst:()=>He!=null&&He.current?Ke(He.current.focus()):!1,focusLast:()=>tt!=null&&tt.current?Ke(tt.current.focus()):!1,hasFocus:()=>{var X,Te,Ut;return((X=ne.current)==null?void 0:X.hasFocus())||((Te=he.current)==null?void 0:Te.hasFocus())||((Ut=We.current)==null?void 0:Ut.hasFocus())||!1},isVisible:()=>te.some(X=>X),moveDown:()=>{var X,Te;return(X=ne.current)!=null&&X.hasFocus()?et!=null&&et.current?Ke(et==null?void 0:et.current.focus()):!1:(Te=he.current)!=null&&Te.hasFocus()&&ue!=null&&ue.current?Ke(ue==null?void 0:ue.current.focus()):!1},moveUp:()=>{var X,Te;return(X=We.current)!=null&&X.hasFocus()?Se!=null&&Se.current?Ke(Se==null?void 0:Se.current.focus()):!1:(Te=he.current)!=null&&Te.hasFocus()&&Fe!=null&&Fe.current?Ke(Fe==null?void 0:Fe.current.focus()):!1}}),[et,ue,Fe,He,Se,tt]);const Et=te[0]||d===F.Bin?F.Bin:te[1]||d===F.Dec?F.Dec:te[2]||d===F.Hex?F.Hex:d,$=Et!==void 0?{[F.Bin]:o,[F.Dec]:l,[F.Hex]:u}[Et]:!1;return c("div",{class:"IntegerInput",children:[c(Wi,{children:[Z?c("div",{class:"IntegerInput_Line"}):c(Wi,{children:[c("div",{class:"IntegerInput_Label",children:""}),c(lg,{encoding:Et,isSigned:$,spaceFrequency:B,unit:D})]}),c("div",{class:"IntegerInput_Visibility",children:c(dg,{labels:ug,onChange:f,values:te})})]}),te[0]&&c(Zr,{isPasteIconHidden:r,label:h,onCopy:je.copy,onPaste:je.paste,children:c(Ur,{...Be,...je,autoFocus:e,encoding:F.Bin,isSigned:o})}),te[1]&&c(Zr,{isPasteIconHidden:r,label:g,onCopy:xe.copy,onPaste:xe.paste,children:c(Ur,{...Be,...xe,encoding:F.Dec,isSigned:l})}),te[2]&&c(Zr,{isPasteIconHidden:r,label:m,onCopy:$e.copy,onPaste:$e.paste,children:c(Ur,{...Be,...$e,encoding:F.Hex,isSigned:u})})]})}),hg=ii(function(e,s){const[i]=kr(),[a]=na(),[r]=Sr(),[o]=Cr(),[l]=aa(),[u]=ra(),[d]=Or(),[p]=oa(),[f]=ca(),[h]=cn(),g=ie(()=>({encoding:F.Bin,isSigned:!1,unit:h}),[h]),[m,{setValue:y}]=zo(g),[_,Z]=hf();return c(jo,{autoFocus:!0,caret:o,integer:m,isSignedBin:i,isSignedDec:a,isSignedHex:r,onChangeValue:y,onChangeVisibility:Z,minCaptionEncoding:F.Bin,prefixBin:"BIN",prefixDec:"DEC",prefixHex:"HEX",ref:s,shouldFlipBitOnClick:l,shouldMoveAfterTyping:u,spaceFrequency:d,typingDirection:p,typingMode:f,unit:h,visibility:_})}),pg=ii(function(e,s){const[i]=kr(),[a]=na(),[r]=Sr(),[o]=Cr(),[l]=aa(),[u]=ra(),[d]=Or(),[p]=oa(),[f]=ca(),[h]=cn(),g=ie(()=>({encoding:F.Bin,isSigned:!1,unit:h}),[h]),[m,{setValue:y}]=Qo(g),[_,Z]=pf(),[B]=Ir(),k=nn(og[B],3," "),[O,D,te]=_[0]?[k,"   ","   "]:_[1]?["   ",k,"   "]:_[2]?["   ","   ",k]:["   ","   ","   "];return c(jo,{autoFocus:!0,caret:o,integer:m,isSignedBin:i,isSignedDec:a,isSignedHex:r,onChangeValue:y,onChangeVisibility:Z,minCaptionEncoding:F.Bin,prefixBin:O,prefixDec:D,prefixHex:te,ref:s,shouldFlipBitOnClick:l,shouldMoveAfterTyping:u,shouldShowLine:!0,spaceFrequency:d,typingDirection:p,typingMode:f,unit:h,visibility:_})}),fg=ii(function(e,s){const[i]=kr(),[a]=na(),[r]=Sr(),[o]=Cr(),[l]=aa(),[u]=ra(),[d]=Or(),[p]=oa(),[f]=ca(),[h]=cn(),g=ie(()=>({encoding:F.Bin,isSigned:!1,unit:h}),[h]),[m]=zo(g),[y]=Qo(g),[_]=Ir(),[Z,B]=Ld(m,y,_,h),[k,O]=ff(),[D,te,we]=k[0]?["  =","   ","   "]:k[1]?["   ","  =","   "]:k[2]?["   ","   ","  ="]:["   ","   ","   "];return c(jo,{autoFocus:!0,caret:o,integer:Z,isPasteIconHidden:!0,isDisabled:!0,isSignedBin:i,isSignedDec:a,isSignedHex:r,onChangeValue:B,onChangeVisibility:O,minCaptionEncoding:F.Bin,prefixBin:D,prefixDec:te,prefixHex:we,ref:s,shouldFlipBitOnClick:l,shouldMoveAfterTyping:u,shouldShowLine:!0,spaceFrequency:d,typingDirection:p,typingMode:f,unit:h,visibility:k})}),pt=(t,e)=>()=>{document.activeElement&&document.activeElement.dispatchEvent(new KeyboardEvent("keydown",{key:t,shiftKey:e}))};function mg({onMoveDown:t,onMoveUp:e}){const[s]=Pr(),[i]=Dl(),{add:a,and:r,or:o,subtract:l,xor:u}=Nd(),{clear:d,finalize:p,swap:f}=Md(),h=ie(()=>{if(!Di&&i===ns.None)return[];const g=[];return(Di||i!==ns.None&&s)&&g.push({label:"+",onClick:a},{label:"-",onClick:l},{label:"AND",onClick:r,size:"xs"},{label:"OR",onClick:o,size:"xs"},{label:"XOR",onClick:u,size:"xs"},{label:"=",onClick:p},{label:"SWAP",onClick:f,size:"xs"},{label:"AC",onClick:d,size:"s"}),(Di||i!==ns.None)&&g.push({label:"NEG",onClick:pt("!"),size:"xs"},{label:"",onClick:pt("<")},{label:"",onClick:pt(">")},{label:"ROL",onClick:pt("{"),size:"xs"},{label:"ROR",onClick:pt("}"),size:"xs"},{label:"DEL",onClick:pt("Delete"),size:"xs"},{label:"",onClick:pt("Backspace")},{label:"Cl",onClick:pt("Delete",!0),size:"s"}),(Di||i===ns.Full)&&g.push(...vr.map(m=>({label:m,onClick:pt(m)})),{label:"INC",onClick:pt(" "),size:"xs"},{label:"DEC",onClick:pt(" ",!0),size:"xs"},{label:" ",onClick:pt(" "),colSpan:2},{label:"",onClick:pt("ArrowLeft")},{label:"",onClick:e},{label:"",onClick:t},{label:"",onClick:pt("ArrowRight")}),g},[a,r,s,d,p,i,t,e,o,l,f,u]);return h.length>0?c(El,{actions:h}):null}function gg(){const[t]=Pr(),e=Oe(null),s=Oe(null),i=Oe(null),a=w(()=>{var l,u,d,p,f,h,g,m,y;return(l=i.current)!=null&&l.hasFocus()?i.current.moveDown():(u=s.current)!=null&&u.hasFocus()?s.current.moveDown()||((d=i.current)!=null&&d.isVisible()?(p=i.current)==null?void 0:p.focusFirst():!1):(f=e.current)!=null&&f.hasFocus()?e.current.moveDown()||((h=s.current)!=null&&h.isVisible()?(g=s.current)==null?void 0:g.focusFirst():(m=i.current)!=null&&m.isVisible()?(y=i.current)==null?void 0:y.focusFirst():!1):!1},[]),r=w(()=>{var l,u,d,p,f,h,g,m,y;return(l=e.current)!=null&&l.hasFocus()?e.current.moveUp():(u=s.current)!=null&&u.hasFocus()?s.current.moveUp()||((d=e.current)!=null&&d.isVisible()?(p=e.current)==null?void 0:p.focusLast():!1):(f=i.current)!=null&&f.hasFocus()?i.current.moveUp()||((h=s.current)!=null&&h.isVisible()?(g=s.current)==null?void 0:g.focusLast():(m=e.current)!=null&&m.isVisible()?(y=e.current)==null?void 0:y.focusLast():!1):!1},[]),o=ie(()=>[{key:"Tab",onPress:()=>{var l,u,d,p,f,h;return Uc()?((l=e.current)==null?void 0:l.isVisible())&&((u=e.current)==null?void 0:u.focusFirst())||((d=s.current)==null?void 0:d.isVisible())&&((p=s.current)==null?void 0:p.focusFirst())||((f=i.current)==null?void 0:f.isVisible())&&((h=i.current)==null?void 0:h.focusFirst()):!1}},{key:"ArrowDown",onPress:a},{key:"ArrowUp",onPress:r}],[a,r]);return an(o),c(Xo,{label:"Calculator",children:c("div",{class:"App_SectionCol align-items_center",children:[c("div",{class:"App_SectionCol",children:[c(hg,{ref:e}),t&&c(Wi,{children:[c(pg,{ref:s}),c(fg,{ref:i})]})]}),c(mg,{onMoveDown:a,onMoveUp:r})]})})}function bg(){return c("div",{class:"App_Module",children:[c(cg,{}),c("div",{class:"App_ModuleBlock",children:c(gg,{})}),c("div",{class:"App_ModuleBlock",children:[c(rg,{}),c(yf,{})]})]})}class oi extends Error{constructor(s,i){super(s);n(this,"range");this.range=i}}var vc={};class lr{constructor(e,s,i,a,r,o,l,u,d,p=0,f){this.p=e,this.stack=s,this.state=i,this.reducePos=a,this.pos=r,this.score=o,this.buffer=l,this.bufferBase=u,this.curContext=d,this.lookAhead=p,this.parent=f}toString(){return`[${this.stack.filter((e,s)=>s%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,s,i=0){let a=e.parser.context;return new lr(e,[],s,i,i,0,[],0,a?new wc(a,a.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,s){this.stack.push(this.state,s,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var s;let i=e>>19,a=e&65535,{parser:r}=this.p,o=this.reducePos<this.pos-25;o&&this.setLookAhead(this.pos);let l=r.dynamicPrecedence(a);if(l&&(this.score+=l),i==0){this.pushState(r.getGoto(this.state,a,!0),this.reducePos),a<r.minRepeatTerm&&this.storeNode(a,this.reducePos,this.reducePos,o?8:4,!0),this.reduceContext(a,this.reducePos);return}let u=this.stack.length-(i-1)*3-(e&262144?6:0),d=u?this.stack[u-2]:this.p.ranges[0].from,p=this.reducePos-d;p>=2e3&&!(!((s=this.p.parser.nodeSet.types[a])===null||s===void 0)&&s.isAnonymous)&&(d==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=p):this.p.lastBigReductionSize<p&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=d,this.p.lastBigReductionSize=p));let f=u?this.stack[u-1]:0,h=this.bufferBase+this.buffer.length-f;if(a<r.minRepeatTerm||e&131072){let g=r.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(a,d,g,h+4,!0)}if(e&262144)this.state=this.stack[u];else{let g=this.stack[u-3];this.state=r.getGoto(g,a,!0)}for(;this.stack.length>u;)this.stack.pop();this.reduceContext(a,d)}storeNode(e,s,i,a=4,r=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,l=this.buffer.length;if(l==0&&o.parent&&(l=o.bufferBase-o.parent.bufferBase,o=o.parent),l>0&&o.buffer[l-4]==0&&o.buffer[l-1]>-1){if(s==i)return;if(o.buffer[l-2]>=s){o.buffer[l-2]=i;return}}}if(!r||this.pos==i)this.buffer.push(e,s,i,a);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0){let l=!1;for(let u=o;u>0&&this.buffer[u-2]>i;u-=4)if(this.buffer[u-1]>=0){l=!0;break}if(l)for(;o>0&&this.buffer[o-2]>i;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,a>4&&(a-=4)}this.buffer[o]=e,this.buffer[o+1]=s,this.buffer[o+2]=i,this.buffer[o+3]=a}}shift(e,s,i,a){if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=a,this.shiftContext(s,i),s<=this.p.parser.maxNode&&this.buffer.push(s,i,a,4);else{let r=e,{parser:o}=this.p;(a>this.pos||s<=o.maxNode)&&(this.pos=a,o.stateFlag(r,1)||(this.reducePos=a)),this.pushState(r,i),this.shiftContext(s,i),s<=o.maxNode&&this.buffer.push(s,i,a,4)}}apply(e,s,i,a){e&65536?this.reduce(e):this.shift(e,s,i,a)}useNode(e,s){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let a=this.pos;this.reducePos=this.pos=a+e.length,this.pushState(s,a),this.buffer.push(i,a,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,s=e.buffer.length;for(;s>0&&e.buffer[s-2]>e.reducePos;)s-=4;let i=e.buffer.slice(s),a=e.bufferBase+s;for(;e&&a==e.bufferBase;)e=e.parent;return new lr(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,a,this.curContext,this.lookAhead,e)}recoverByDelete(e,s){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,s,4),this.storeNode(0,this.pos,s,i?8:4),this.pos=this.reducePos=s,this.score-=190}canShift(e){for(let s=new _g(this);;){let i=this.p.parser.stateSlot(s.state,4)||this.p.parser.hasAction(s.state,e);if(i==0)return!1;if(!(i&65536))return!0;s.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let s=this.p.parser.nextStates(this.state);if(s.length>8||this.stack.length>=120){let a=[];for(let r=0,o;r<s.length;r+=2)(o=s[r+1])!=this.state&&this.p.parser.hasAction(o,e)&&a.push(s[r],o);if(this.stack.length<120)for(let r=0;a.length<8&&r<s.length;r+=2){let o=s[r+1];a.some((l,u)=>u&1&&l==o)||a.push(s[r],o)}s=a}let i=[];for(let a=0;a<s.length&&i.length<4;a+=2){let r=s[a+1];if(r==this.state)continue;let o=this.split();o.pushState(r,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(s[a],this.pos),o.reducePos=this.pos,o.score-=200,i.push(o)}return i}forceReduce(){let{parser:e}=this.p,s=e.stateSlot(this.state,5);if(!(s&65536))return!1;if(!e.validAction(this.state,s)){let i=s>>19,a=s&65535,r=this.stack.length-i*3;if(r<0||e.getGoto(this.stack[r],a,!1)<0){let o=this.findForcedReduction();if(o==null)return!1;s=o}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(s),!0}findForcedReduction(){let{parser:e}=this.p,s=[],i=(a,r)=>{if(!s.includes(a))return s.push(a),e.allActions(a,o=>{if(!(o&393216))if(o&65536){let l=(o>>19)-r;if(l>1){let u=o&65535,d=this.stack.length-l*3;if(d>=0&&e.getGoto(this.stack[d],u,!1)>=0)return l<<19|65536|u}}else{let l=i(o,r+1);if(l!=null)return l}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let s=0;s<this.stack.length;s+=3)if(this.stack[s]!=e.stack[s])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,s){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(s)))}reduceContext(e,s){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(s)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let s=new wc(this.curContext.tracker,e);s.hash!=this.curContext.hash&&this.emitContext(),this.curContext=s}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class wc{constructor(e,s){this.tracker=e,this.context=s,this.hash=e.strict?e.hash(s):0}}class _g{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let s=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let a=this.start.p.parser.getGoto(this.stack[this.base-3],s,!0);this.state=a}}class dr{constructor(e,s,i){this.stack=e,this.pos=s,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,s=e.bufferBase+e.buffer.length){return new dr(e,s,s-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new dr(this.stack,this.pos,this.index)}}function ma(t,e=Uint16Array){if(typeof t!="string")return t;let s=null;for(let i=0,a=0;i<t.length;){let r=0;for(;;){let o=t.charCodeAt(i++),l=!1;if(o==126){r=65535;break}o>=92&&o--,o>=34&&o--;let u=o-32;if(u>=46&&(u-=46,l=!0),r+=u,l)break;r*=46}s?s[a++]=r:s=new e(r)}return s}class Ia{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const xc=new Ia;class yg{constructor(e,s){this.input=e,this.ranges=s,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=xc,this.rangeIndex=0,this.pos=this.chunkPos=s[0].from,this.range=s[0],this.end=s[s.length-1].to,this.readNext()}resolveOffset(e,s){let i=this.range,a=this.rangeIndex,r=this.pos+e;for(;r<i.from;){if(!a)return null;let o=this.ranges[--a];r-=i.from-o.to,i=o}for(;s<0?r>i.to:r>=i.to;){if(a==this.ranges.length-1)return null;let o=this.ranges[++a];r+=o.from-i.to,i=o}return r}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let s of this.ranges)if(s.to>e)return Math.max(e,s.from);return this.end}peek(e){let s=this.chunkOff+e,i,a;if(s>=0&&s<this.chunk.length)i=this.pos+e,a=this.chunk.charCodeAt(s);else{let r=this.resolveOffset(e,1);if(r==null)return-1;if(i=r,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)a=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let o=this.rangeIndex,l=this.range;for(;l.to<=i;)l=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>l.to&&(this.chunk2=this.chunk2.slice(0,l.to-i)),a=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),a}acceptToken(e,s=0){let i=s?this.resolveOffset(s,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}acceptTokenTo(e,s){this.token.value=e,this.token.end=s}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:s}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=s,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),s=this.pos+e.length;this.chunk=s>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,s){if(s?(this.token=s,s.start=e,s.lookAhead=e+1,s.value=s.extended=-1):this.token=xc,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,s){if(e>=this.chunkPos&&s<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,s-this.chunkPos);if(e>=this.chunk2Pos&&s<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,s-this.chunk2Pos);if(e>=this.range.from&&s<=this.range.to)return this.input.read(e,s);let i="";for(let a of this.ranges){if(a.from>=s)break;a.to>e&&(i+=this.input.read(Math.max(a.from,e),Math.min(a.to,s)))}return i}}class Vi{constructor(e,s){this.data=e,this.id=s}token(e,s){let{parser:i}=s.p;vg(this.data,e,s,this.id,i.data,i.tokenPrecTable)}}Vi.prototype.contextual=Vi.prototype.fallback=Vi.prototype.extend=!1;Vi.prototype.fallback=Vi.prototype.extend=!1;function vg(t,e,s,i,a,r){let o=0,l=1<<i,{dialect:u}=s.p.parser;e:for(;l&t[o];){let d=t[o+1];for(let g=o+3;g<d;g+=2)if((t[g+1]&l)>0){let m=t[g];if(u.allows(m)&&(e.token.value==-1||e.token.value==m||wg(m,e.token.value,a,r))){e.acceptToken(m);break}}let p=e.next,f=0,h=t[o+2];if(e.next<0&&h>f&&t[d+h*3-3]==65535){o=t[d+h*3-1];continue e}for(;f<h;){let g=f+h>>1,m=d+g+(g<<1),y=t[m],_=t[m+1]||65536;if(p<y)h=g;else if(p>=_)f=g+1;else{o=t[m+2],e.advance();continue e}}break}}function kc(t,e,s){for(let i=e,a;(a=t[i])!=65535;i++)if(a==s)return i-e;return-1}function wg(t,e,s,i){let a=kc(s,i,e);return a<0||kc(s,i,t)<a}const Ot=typeof process<"u"&&vc&&/\bparse\b/.test(vc.LOG);let Yr=null;function Sc(t,e,s){let i=t.cursor(zu.IncludeAnonymous);for(i.moveTo(e);;)if(!(s<0?i.childBefore(e):i.childAfter(e)))for(;;){if((s<0?i.to<e:i.from>e)&&!i.type.isError)return s<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(t.length,Math.max(i.from+1,e+25));if(s<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return s<0?0:t.length}}class xg{constructor(e,s){this.fragments=e,this.nodeSet=s,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?Sc(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?Sc(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let s=this.trees.length-1;if(s<0)return this.nextFragment(),null;let i=this.trees[s],a=this.index[s];if(a==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let r=i.children[a],o=this.start[s]+i.positions[a];if(o>e)return this.nextStart=o,null;if(r instanceof Ca){if(o==e){if(o<this.safeFrom)return null;let l=o+r.length;if(l<=this.safeTo){let u=r.prop(Co.lookAhead);if(!u||l+u<this.fragment.to)return r}}this.index[s]++,o+r.length>=Math.max(this.safeFrom,e)&&(this.trees.push(r),this.start.push(o),this.index.push(0))}else this.index[s]++,this.nextStart=o+r.length}}}class kg{constructor(e,s){this.stream=s,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new Ia)}getActions(e){let s=0,i=null,{parser:a}=e.p,{tokenizers:r}=a,o=a.stateSlot(e.state,3),l=e.curContext?e.curContext.hash:0,u=0;for(let d=0;d<r.length;d++){if(!(1<<d&o))continue;let p=r[d],f=this.tokens[d];if(!(i&&!p.fallback)&&((p.contextual||f.start!=e.pos||f.mask!=o||f.context!=l)&&(this.updateCachedToken(f,p,e),f.mask=o,f.context=l),f.lookAhead>f.end+25&&(u=Math.max(f.lookAhead,u)),f.value!=0)){let h=s;if(f.extended>-1&&(s=this.addActions(e,f.extended,f.end,s)),s=this.addActions(e,f.value,f.end,s),!p.extend&&(i=f,s>h))break}}for(;this.actions.length>s;)this.actions.pop();return u&&e.setLookAhead(u),!i&&e.pos==this.stream.end&&(i=new Ia,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,s=this.addActions(e,i.value,i.end,s)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let s=new Ia,{pos:i,p:a}=e;return s.start=i,s.end=Math.min(i+1,a.stream.end),s.value=i==a.stream.end?a.parser.eofTerm:0,s}updateCachedToken(e,s,i){let a=this.stream.clipPos(i.pos);if(s.token(this.stream.reset(a,e),i),e.value>-1){let{parser:r}=i.p;for(let o=0;o<r.specialized.length;o++)if(r.specialized[o]==e.value){let l=r.specializers[o](this.stream.read(e.start,e.end),i);if(l>=0&&i.p.parser.dialect.allows(l>>1)){l&1?e.extended=l>>1:e.value=l>>1;break}}}else e.value=0,e.end=this.stream.clipPos(a+1)}putAction(e,s,i,a){for(let r=0;r<a;r+=3)if(this.actions[r]==e)return a;return this.actions[a++]=e,this.actions[a++]=s,this.actions[a++]=i,a}addActions(e,s,i,a){let{state:r}=e,{parser:o}=e.p,{data:l}=o;for(let u=0;u<2;u++)for(let d=o.stateSlot(r,u?2:1);;d+=3){if(l[d]==65535)if(l[d+1]==1)d=bs(l,d+2);else{a==0&&l[d+1]==2&&(a=this.putAction(bs(l,d+2),s,i,a));break}l[d]==s&&(a=this.putAction(bs(l,d+1),s,i,a))}return a}}class Sg{constructor(e,s,i,a){this.parser=e,this.input=s,this.ranges=a,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new yg(s,a),this.tokens=new kg(e,this.stream),this.topTerm=e.top[1];let{from:r}=a[0];this.stacks=[lr.start(this,e.top[0],r)],this.fragments=i.length&&this.stream.end-r>e.bufferLength*4?new xg(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,s=this.minStackPos,i=this.stacks=[],a,r;if(this.bigReductionCount>300&&e.length==1){let[o]=e;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<e.length;o++){let l=e[o];for(;;){if(this.tokens.mainToken=null,l.pos>s)i.push(l);else{if(this.advanceStack(l,i,e))continue;{a||(a=[],r=[]),a.push(l);let u=this.tokens.getMainToken(l);r.push(u.value,u.end)}}break}}if(!i.length){let o=a&&Og(a);if(o)return Ot&&console.log("Finish with "+this.stackID(o)),this.stackToTree(o);if(this.parser.strict)throw Ot&&a&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+s);this.recovering||(this.recovering=5)}if(this.recovering&&a){let o=this.stoppedAt!=null&&a[0].pos>this.stoppedAt?a[0]:this.runRecovery(a,r,i);if(o)return Ot&&console.log("Force-finish "+this.stackID(o)),this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(i.length>o)for(i.sort((l,u)=>u.score-l.score);i.length>o;)i.pop();i.some(l=>l.reducePos>s)&&this.recovering--}else if(i.length>1){e:for(let o=0;o<i.length-1;o++){let l=i[o];for(let u=o+1;u<i.length;u++){let d=i[u];if(l.sameState(d)||l.buffer.length>500&&d.buffer.length>500)if((l.score-d.score||l.buffer.length-d.buffer.length)>0)i.splice(u--,1);else{i.splice(o--,1);continue e}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let o=1;o<i.length;o++)i[o].pos<this.minStackPos&&(this.minStackPos=i[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,s,i){let a=e.pos,{parser:r}=this,o=Ot?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&a>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let d=e.curContext&&e.curContext.tracker.strict,p=d?e.curContext.hash:0;for(let f=this.fragments.nodeAt(a);f;){let h=this.parser.nodeSet.types[f.type.id]==f.type?r.getGoto(e.state,f.type.id):-1;if(h>-1&&f.length&&(!d||(f.prop(Co.contextHash)||0)==p))return e.useNode(f,h),Ot&&console.log(o+this.stackID(e)+` (via reuse of ${r.getName(f.type.id)})`),!0;if(!(f instanceof Ca)||f.children.length==0||f.positions[0]>0)break;let g=f.children[0];if(g instanceof Ca&&f.positions[0]==0)f=g;else break}}let l=r.stateSlot(e.state,4);if(l>0)return e.reduce(l),Ot&&console.log(o+this.stackID(e)+` (via always-reduce ${r.getName(l&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let u=this.tokens.getActions(e);for(let d=0;d<u.length;){let p=u[d++],f=u[d++],h=u[d++],g=d==u.length||!i,m=g?e:e.split(),y=this.tokens.mainToken;if(m.apply(p,f,y?y.start:m.pos,h),Ot&&console.log(o+this.stackID(m)+` (via ${p&65536?`reduce of ${r.getName(p&65535)}`:"shift"} for ${r.getName(f)} @ ${a}${m==e?"":", split"})`),g)return!0;m.pos>a?s.push(m):i.push(m)}return!1}advanceFully(e,s){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return Cc(e,s),!0}}runRecovery(e,s,i){let a=null,r=!1;for(let o=0;o<e.length;o++){let l=e[o],u=s[o<<1],d=s[(o<<1)+1],p=Ot?this.stackID(l)+" -> ":"";if(l.deadEnd&&(r||(r=!0,l.restart(),Ot&&console.log(p+this.stackID(l)+" (restarted)"),this.advanceFully(l,i))))continue;let f=l.split(),h=p;for(let g=0;f.forceReduce()&&g<10&&(Ot&&console.log(h+this.stackID(f)+" (via force-reduce)"),!this.advanceFully(f,i));g++)Ot&&(h=this.stackID(f)+" -> ");for(let g of l.recoverByInsert(u))Ot&&console.log(p+this.stackID(g)+" (via recover-insert)"),this.advanceFully(g,i);this.stream.end>l.pos?(d==l.pos&&(d++,u=0),l.recoverByDelete(u,d),Ot&&console.log(p+this.stackID(l)+` (via recover-delete ${this.parser.getName(u)})`),Cc(l,i)):(!a||a.score<l.score)&&(a=l)}return a}stackToTree(e){return e.close(),Ca.build({buffer:dr.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let s=(Yr||(Yr=new WeakMap)).get(e);return s||Yr.set(e,s=String.fromCodePoint(this.nextStackID++)),s+e}}function Cc(t,e){for(let s=0;s<e.length;s++){let i=e[s];if(i.pos==t.pos&&i.sameState(t)){e[s].score<t.score&&(e[s]=t);return}}e.push(t)}class Cg{constructor(e,s,i){this.source=e,this.flags=s,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}class ur extends Bu{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let s=e.nodeNames.split(" ");this.minRepeatTerm=s.length;for(let l=0;l<e.repeatNodeCount;l++)s.push("");let i=Object.keys(e.topRules).map(l=>e.topRules[l][1]),a=[];for(let l=0;l<s.length;l++)a.push([]);function r(l,u,d){a[l].push([u,u.deserialize(String(d))])}if(e.nodeProps)for(let l of e.nodeProps){let u=l[0];typeof u=="string"&&(u=Co[u]);for(let d=1;d<l.length;){let p=l[d++];if(p>=0)r(p,u,l[d++]);else{let f=l[d+-p];for(let h=-p;h>0;h--)r(l[d++],u,f);d++}}}this.nodeSet=new $u(s.map((l,u)=>Vu.define({name:u>=this.minRepeatTerm?void 0:l,id:u,props:a[u],top:i.indexOf(u)>-1,error:u==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(u)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=Fu;let o=ma(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let l=0;l<this.specializerSpecs.length;l++)this.specialized[l]=this.specializerSpecs[l].term;this.specializers=this.specializerSpecs.map(Oc),this.states=ma(e.states,Uint32Array),this.data=ma(e.stateData),this.goto=ma(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(l=>typeof l=="number"?new Vi(o,l):l),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,s,i){let a=new Sg(this,e,s,i);for(let r of this.wrappers)a=r(a,e,s,i);return a}getGoto(e,s,i=!1){let a=this.goto;if(s>=a[0])return-1;for(let r=a[s+1];;){let o=a[r++],l=o&1,u=a[r++];if(l&&i)return u;for(let d=r+(o>>1);r<d;r++)if(a[r]==e)return u;if(l)return-1}}hasAction(e,s){let i=this.data;for(let a=0;a<2;a++)for(let r=this.stateSlot(e,a?2:1),o;;r+=3){if((o=i[r])==65535)if(i[r+1]==1)o=i[r=bs(i,r+2)];else{if(i[r+1]==2)return bs(i,r+2);break}if(o==s||o==0)return bs(i,r+1)}return 0}stateSlot(e,s){return this.states[e*6+s]}stateFlag(e,s){return(this.stateSlot(e,0)&s)>0}validAction(e,s){return!!this.allActions(e,i=>i==s?!0:null)}allActions(e,s){let i=this.stateSlot(e,4),a=i?s(i):void 0;for(let r=this.stateSlot(e,1);a==null;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=bs(this.data,r+2);else break;a=s(bs(this.data,r+1))}return a}nextStates(e){let s=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=bs(this.data,i+2);else break;if(!(this.data[i+2]&1)){let a=this.data[i+1];s.some((r,o)=>o&1&&r==a)||s.push(this.data[i],a)}}return s}configure(e){let s=Object.assign(Object.create(ur.prototype),this);if(e.props&&(s.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);s.top=i}return e.tokenizers&&(s.tokenizers=this.tokenizers.map(i=>{let a=e.tokenizers.find(r=>r.from==i);return a?a.to:i})),e.specializers&&(s.specializers=this.specializers.slice(),s.specializerSpecs=this.specializerSpecs.map((i,a)=>{let r=e.specializers.find(l=>l.from==i.external);if(!r)return i;let o=Object.assign(Object.assign({},i),{external:r.to});return s.specializers[a]=Oc(o),o})),e.contextTracker&&(s.context=e.contextTracker),e.dialect&&(s.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(s.strict=e.strict),e.wrap&&(s.wrappers=s.wrappers.concat(e.wrap)),e.bufferLength!=null&&(s.bufferLength=e.bufferLength),s}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let s=this.dynamicPrecedences;return s==null?0:s[e]||0}parseDialect(e){let s=Object.keys(this.dialects),i=s.map(()=>!1);if(e)for(let r of e.split(" ")){let o=s.indexOf(r);o>=0&&(i[o]=!0)}let a=null;for(let r=0;r<s.length;r++)if(!i[r])for(let o=this.dialects[s[r]],l;(l=this.data[o++])!=65535;)(a||(a=new Uint8Array(this.maxTerm+1)))[l]=1;return new Cg(e,i,a)}static deserialize(e){return new ur(e)}}function bs(t,e){return t[e]|t[e+1]<<16}function Og(t){let e=null;for(let s of t){let i=s.p.stoppedAt;(s.pos==s.p.stream.end||i!=null&&s.pos>i)&&s.p.parser.stateFlag(s.state,2)&&(!e||e.score<s.score)&&(e=s)}return e}function Oc(t){if(t.external){let e=t.extend?1:0;return(s,i)=>t.external(s,i)<<1|e}return t.get}const Pg=ur.deserialize({version:14,states:"+vQYQPOOOqQPO'#C_OvQQO'#DvO{QQO'#DwO!QQQO'#DxOOQO'#Du'#DuO!VQQO'#CcOOQO'#Cc'#CcOOQO'#Dr'#DrO#TQPO'#DqOOQO'#Dq'#DqOOQO'#Di'#DiQYQPOOOOQO,58y,58yO#`QPO,5:bO#nQPO,5:cO#|QPO,5:dOOQO'#Ce'#CeOOQO'#Cg'#CgOOQO'#Ci'#CiO$[QQO'#CkO$pQQO'#CsO${QQO'#CxO%WQQO'#CzO%iQQO'#DROOQO'#DX'#DXO%wQQO'#DZO%|QQO'#D]OOQO'#Ds'#DsOOQO,58},58}O&_QPO'#DmO&sQPO,5:]OOQO,5:],5:]OOQO-E7g-E7gO'OQQO'#DjO'TQPO1G/|O'cQQO'#DkO'hQPO1G/}O'vQQO'#DlO'{QPO1G0OOOQO,59X,59XOOQO,59Z,59ZOOQO,59p,59pO(ZQQO,59_O(fQQO,59jO(nQQO,59zO(vQPO,59dO({QPO,59lO)QQPO,59}OOQO,59h,59hOOQO,59i,59iOOQO,59o,59oOOQO,59u,59uOOQO,59x,59xOOQO,59y,59yOOQO,5:X,5:XOOQO-E7k-E7kOOQO1G/w1G/wOOQO,5:U,5:UOOQO-E7h-E7hOOQO,5:V,5:VOOQO-E7i-E7iOOQO,5:W,5:WOOQO-E7j-E7jO)VQQO1G.yO)eQPO1G.zO)jQPO1G/^OOQO1G/U1G/UO)oQPO1G/VO)tQQO1G/fO*SQPO1G/gO*XQQO1G/OOOQO1G/W1G/WO*gQQO1G/iOOQO7+$g7+$gOOQO7+$f7+$fO*uQQO7+$xOOQO7+$q7+$qOOQO7+%S7+%SOOQO7+%R7+%ROOQO7+$k7+$kOOQO7+%U7+%UOOQO<<Hd<<Hd",stateData:"*z~OPOS!dOS~OSPOUWOWUO!XQO!ZRO![SO!nYO~OT]O~O`^O~Oo_O~Ov`O~OYaO[bO^cO`dOfeOkfOogOvhO|iO!OkO!hjO!mVX!nVX!oVX~O!mnO!npO!opO~O!YrO!m!ja!n!ja!o!ja~O!YtO!m!ka!n!ka!o!ka~O!YvO!m!la!n!la!o!la~ObxOdyOyzO!m_X!n_X!o_X~O`{Oo|O!O}O~O`!OOo!PO!O!QO~Ob!ROd!SO!mnX!nnX!onX~Ob!TO!muX!nuX!ouX~O!O!UO~Ob!VOd!WO!m!PX!n!PX!o!PX~OSPOUWOWUO!XQO!ZRO![SO~O!mnO!n!ZO!o!ZO~O`![O~O!YrO!m!ji!n!ji!o!ji~Oo!^O~O!YtO!m!ki!n!ki!o!ki~Ov!`O~O!YvO!m!li!n!li!o!li~Ob!cOe!bOy!dO~Ob!fOe!eO~Ob!hOe!gO~Oj!iO~Oj!jO~Oj!kO~Od!lO!mgi!ngi!ogi~Oe!mO~Oe!nO~Oe!oO~Od!pO!m!Si!n!Si!o!Si~Oe!qO~Od!rO!mli!nli!oli~Od!sO!m!Vi!n!Vi!o!Vi~Od!tO~O",goto:"$O!mPPP!nPPP!nP!sP!sP!sP!sP!sP!sPPP!s!s!sPP!s!s!sP!s!s!s!s!s!sP!s!sP!s!sP!sP!s!s!s!s!s!s!s!sPPPP!v!|#S#Y#`PPP#f#j#qP#t#y#y#yVWO[nRlUQ[ORq[Qs^R!]sQu_R!_uQw`R!awQoXR!YoTZO[SXO[R!XnRmUVVO[nVTO[n",nodeNames:" Comment Program OrgDefinition ORG Origin LabelDefinition Instruction Opcode Mode_Accumulator A Mode_Immediate_Byte ConstByte Mode_Immediate_Word ConstWord Mode_DirectPage Byte Mode_DirectPage_X X Mode_DirectPage_Y Y ) ( Mode_DirectPage_Indirect Mode_DirectPage_X_Indirect Mode_DirectPage_Indirect_Y ] [ Mode_DirectPage_IndirectLong Mode_DirectPage_IndirectLong_Y Mode_Absolute Word Mode_Absolute_X Mode_Absolute_Y Mode_Absolute_Indirect Mode_Absolute_X_Indirect Mode_Absolute_IndirectLong Mode_AbsoluteLong Long Mode_AbsoluteLong_X Mode_StackRelative S Mode_StackRelative_Indirect_Y Mode_BlockMove MoveBanks Mode_Immediate_Label LabelUsage Mode_Label Mode_Label_X Mode_Label_Y Mode_Label_Indirect Mode_Label_X_Indirect Mode_Label_Indirect_Y Mode_Label_IndirectLong Mode_Label_IndirectLong_Y DB , DW DL",maxTerm:77,nodeProps:[["openedBy",21,"(",26,"["],["closedBy",22,")",27,"]"]],skippedNodes:[0,1],repeatNodeCount:5,tokenData:"Nk~R!TXY$bYZ$m]^$mpq$bst$rtu*Tuv.txy3myz3r|}3w!O!P4o!Q![5f![!]6}!]!^7S!c!d7k!d!e8b!e!f9|!f!g:{!g!h;_!k!l;k!l!m;q!n!o<^!o!p<s!p!q=S!q!r=Y!r!s=f!t!u>}!u!v?g!v!w@f!y!zBQ!z!{Ba!}#OBj#P#QBo#T#UBt#U#VCf#V#WEQ#W#XFP#X#YF{#]#^GX#^#_G_#`#aGz#a#bHa#b#cHp#c#dHv#d#eI[#f#gJs#g#hK]#h#iL[#k#lMv#l#mNV~~Nf~$gQ!d~XY$bpq$b~$rO!n~~$wR!h~tu%Quv&Z!Q![)c~%TR!Q![%^!c!i%^#T#Z%^~%aR!Q![%j!c!i%j#T#Z%j~%oR[~!Q![%x!c!i%x#T#Z%x~%{R!Q![&U!c!i&U#T#Z&U~&ZO^~~&^Q!Q!R&d!R!S&d~&gQ!Q!R&m!R!S&m~&pQ!Q!R&v!R!S&v~&yQ!Q!R'P!R!S'P~'SQ!Q!R'Y!R!S'Y~']Q!Q!R'c!R!S'c~'fQ!Q!R'l!R!S'l~'oQ!Q!R'u!R!S'u~'zQ[~!Q!R(Q!R!S(Q~(TQ!Q!R(Z!R!S(Z~(^Q!Q!R(d!R!S(d~(gQ!Q!R(m!R!S(m~(pQ!Q!R(v!R!S(v~(yQ!Q!R)P!R!S)P~)SQ!Q!R)Y!R!S)Y~)]Q!Q!R&U!R!S&U~)hP[~!Q![)k~)pP[~!Q![)s~)xP[~!Q![){~*QP^~!Q![&U~*WR!Q![*a!c!i*a#T#Z*a~*dR!Q![*m!c!i*m#T#Z*m~*rS`Q|}+O!Q![-u!c!i-u#T#Z-u~+RRtu+[uv+y!Q![-e~+_R!Q![+h!c!i+h#T#Z+h~+kR!Q![+t!c!i+t#T#Z+t~+yO|~~+|Q!Q!R,S!R!S,S~,VQ!Q!R,]!R!S,]~,`Q!Q!R,f!R!S,f~,iQ!Q!R,o!R!S,o~,rQ!Q!R,x!R!S,x~,{Q!Q!R-R!R!S-R~-UQ!Q!R-[!R!S-[~-_Q!Q!R+t!R!S+t~-jP|~!Q![-m~-rP|~!Q![+tR-xR!Q![.R!c!i.R#T#Z.RR.WRoQ!Q![.a!c!i.a#T#Z.aR.dR!Q![.m!c!i.m#T#Z.mR.tOvQTP~.wQ!Q!R.}!R!S.}~/QQ!Q!R/W!R!S/W~/ZQ!Q!R/a!R!S/a~/dQ!Q!R/j!R!S/j~/mQ!Q!R/s!R!S/s~/vQ!Q!R/|!R!S/|~0PQ!Q!R0V!R!S0V~0YQ!Q!R0`!R!S0`~0eR`Q|}+O!Q!R0n!R!S0nR0qQ!Q!R0w!R!S0wR0zQ!Q!R1Q!R!S1QR1TQ!Q!R1Z!R!S1ZR1^Q!Q!R1d!R!S1dR1gQ!Q!R1m!R!S1mR1pQ!Q!R1v!R!S1vR1yQ!Q!R2P!R!S2PR2UQoQ!Q!R2[!R!S2[R2_Q!Q!R2e!R!S2eR2hQ!Q!R2n!R!S2nR2qQ!Q!R2w!R!S2wR2zQ!Q!R3Q!R!S3QR3TQ!Q!R3Z!R!S3ZR3^Q!Q!R3d!R!S3dR3gQ!Q!R.m!R!S.m~3rOf~~3wOe~R3|U!YP!u!v4`!z!{4e!{!|4j#g#h4`#l#m4e#m#n4jQ4eOyQQ4jObQQ4oOdQR4rR!c!}4{#R#S4{#T#o4{R5QT!OQ!Q![4{![!]5a!c!}4{#R#S4{#T#o4{P5fOUP~5kQ`Q|}+O!Q![5q~5vQ`Q|}+O!Q![5|~6RQ`Q|}+O!Q![6XR6^PoQ!Q![6aR6fPoQ!Q![6iR6pPvQTP!Q![6sR6zPvQTP!Q![.m~7SO!m~~7XSP~OY7SZ;'S7S;'S;=`7e<%lO7S~7hP;=`<%l7SR7pRYQ!f!g7y!p!q8U!u!v8[P7|P!e!f8PP8UOWPP8XP!f!g8PP8_P!n!o8PP8eW!e!f8}!g!h9W!k!l9^!o!p9d!p!q9j!r!s8[!t!u9p!x!y8}P9QQ!e!f8P!u!v8PP9ZP!s!t8PP9aP!v!w8PP9gP!k!l8PP9mP!g!h8PP9sR!c!d8P!m!n8P!n!o8PP:PS!n!o:]!o!p:l!q!r:l!r!s:rP:`S!e!f8P!f!g8P!k!l8P!x!y8PP:oP!r!s8PP:uQ!z!{8P!{!|8PP;OP!g!h;RP;UR!e!f8P!z!{8P!{!|8PP;bP!q!r;eP;hP!t!u8PP;nP!p!q;RP;tQ!o!p;z!u!v<TP;}Q!n!o8P!r!s8PP<WQ!n!o8P!t!u8PP<aQ!f!g<g!u!v;eP<jR!c!d8P!z!{8P!{!|8PP<vP!x!y<yP<|Q!p!q8P!r!s8PP=VP!q!r:lP=]P!t!u=`P=cP!c!d8PP=iR!g!h=r!j!k>O!n!o>hP=uR!c!d8P!k!l8P!t!u8PP>RV!c!d8P!d!e8P!f!g8P!m!n8P!r!s8P!z!{8P!{!|8PP>kU!c!d8P!d!e8P!f!g8P!r!s8P!z!{8P!{!|8PP?QR!g!h:l!q!r<T!v!w?ZP?^R!k!l8P!n!o8P!u!v8PP?jR!d!e7y!g!h?s!v!w@SP?vS!e!f8P!f!g8P!k!l8P!r!s8PP@VT!c!d8P!r!s8P!z!{8P!{!|8P!|!}8PP@iV!c!d:r!e!fAO!f!g7y!t!uAX!u!vA_!z!{Ak!{!|AwPARQ!f!g8P!u!v8PPA[P!d!e8PPAbR!d!e8P!e!f8P!z!{8PPAnR!c!d8P!u!v8P!{!|8PPAzQ!c!d8P!z!{8PPBTQ!c!d9d!f!gBZPB^P!o!p8PPBdQ!d!e=`!e!f9j~BoOk~~BtOj~RByRYQ#W#XCS#b#cCY#g#hC`PCVP#V#W8PPC]P#W#X8PPCcP#`#a8PPCiW#V#WDR#X#YD[#]#^Db#a#bDh#b#cDn#d#eC`#f#gDt#j#kDRPDUQ#V#W8P#g#h8PPD_P#e#f8PPDeP#h#i8PPDkP#]#^8PPDqP#X#Y8PPDwR#T#U8P#_#`8P#`#a8PPETS#`#aEa#a#bEp#c#dEp#d#eEvPEdS#V#W8P#W#X8P#]#^8P#j#k8PPEsP#d#e8PPEyQ#l#m8P#m#n8P~FSS#U#VF`#X#YFe#`#aFq#k#lFv~FeO!X~PFhR#V#W8P#l#m8P#m#n8P~FvO![~~F{O!Z~PGOP#c#dGRPGUP#f#g8PPG[P#b#cFePGbQ#a#bGh#g#hGqPGkQ#`#a8P#d#e8PPGtQ#`#a8P#f#g8PPG}Q#W#XHT#g#hGRPHWR#T#U8P#l#m8P#m#n8PPHdP#j#kHgPHjQ#b#c8P#d#e8PPHsP#c#dEp~HyP#f#gH|~IPQ#T#U8P#Z#[IV~I[OS~PI_R#X#YIh#[#]It#`#aJ^PIkR#T#U8P#]#^8P#f#g8PPIwV#T#U8P#U#V8P#W#X8P#_#`8P#d#e8P#l#m8P#m#n8PPJaU#T#U8P#U#V8P#W#X8P#d#e8P#l#m8P#m#n8PPJvR#X#YEp#c#dGq#h#iKPPKSR#]#^8P#`#a8P#g#h8PPK`R#U#VCS#X#YKi#h#iKxPKlS#V#W8P#W#X8P#]#^8P#d#e8PPK{T#T#U8P#d#e8P#l#m8P#m#n8P#n#o8PPL_V#T#UEv#V#WLt#W#XCS#f#gL}#g#hMT#l#mMa#m#nMmPLwQ#W#X8P#g#h8PPMQP#U#V8PPMWR#U#V8P#V#W8P#l#m8PPMdR#T#U8P#g#h8P#m#n8PPMpQ#T#U8P#l#m8PPMyQ#T#UDh#W#XNPPNSP#a#b8PPNYQ#U#VN`#V#WDnPNcP#T#U8P~NkO!o~",tokenizers:[0,1],topRules:{Program:[0,2]},tokenPrec:0}),Ig=Pg.configure({props:[Qu({Comment:ye.lineComment,Opcode:ye.keyword,"A ConstByte ConstWord":ye.number,"Byte Word Long MoveBanks Origin":ye.variableName,"DB DW DL ORG":ye.macroName,"LabelDefinition LabelUsage":ye.labelName,"X Y S ,":ye.derefOperator,"( ) [ ]":ye.paren})]}),Bd=Wu.define({parser:Ig,languageData:{commentTokens:{line:";"}}});function Ag(){return new Uu(Bd,[])}class Ho{constructor(e){n(this,"range");this.range=e}}class Pc extends Ho{constructor(s,i){super(s);n(this,"label");this.label=i}}class Ic extends Ho{constructor(s,i){super(s);n(this,"address");this.address=i}}let Go=class{constructor(e,s,i){n(this,"opcode");n(this,"size");n(this,"range");this.opcode=e&255,this.size=s,this.range=i}};class ua extends Go{constructor(s,i,a,r){super(s,i,a);n(this,"_arg");this._arg=r}}class Tg extends ua{constructor(s,i){super(s,1,i,0);n(this,"bytes",()=>[this.opcode])}}class Eg extends ua{constructor(s,i,a){super(s,2,i,a&255);n(this,"bytes",()=>[this.opcode,ps(this._arg)])}}class Rg extends ua{constructor(s,i,a){super(s,3,i,a&65535);n(this,"bytes",()=>[this.opcode,ps(this._arg),ai(this._arg)])}}class Dg extends ua{constructor(s,i,a){super(s,4,i,a&16777215);n(this,"bytes",()=>[this.opcode,ps(this._arg),ai(this._arg),qo(this._arg)])}}class Tr extends Go{constructor(s,i){super(0,i.length,s);n(this,"_values");this._values=i}}class Ng extends Tr{constructor(){super(...arguments);n(this,"bytes",()=>this._values.flatMap(s=>[ps(s)]))}}class Lg extends Tr{constructor(){super(...arguments);n(this,"bytes",()=>this._values.flatMap(s=>[ps(s),ai(s)]))}}class Mg extends Tr{constructor(){super(...arguments);n(this,"bytes",()=>this._values.flatMap(s=>[ps(s),ai(s),qo(s)]))}}class ha extends Go{constructor(s,i,a,r,o){super(s,i,a);n(this,"_label");n(this,"_pc");this._label=r,this._pc=o}}class Bg extends ha{constructor(s,i,a,r){super(s,2,i,a,r);n(this,"bytes",s=>{const i=s.get(this._label);if(i===void 0)return`Label "${this._label}" is not defined.`;const a=i-(this._pc+2);return a<-128||127<a?`Label "${this._label}" is out of reach.`:[this.opcode,ps(a)]})}}class $g extends ha{constructor(s,i,a,r){super(s,3,i,a,r);n(this,"bytes",s=>{const i=s.get(this._label);if(i===void 0)return`Label "${this._label}" is not defined.`;const a=i-(this._pc+3);return a<-32768||32767<a?`Label "${this._label}" is out of reach.`:[this.opcode,ps(a&65535),ai(a&65535)]})}}class Vg extends ha{constructor(s,i,a){super(s,3,i,a,0);n(this,"bytes",s=>{const i=s.get(this._label);return i===void 0?`Label "${this._label}" is not defined.`:[this.opcode,ps(i),ai(i)]})}}class Fg extends ha{constructor(s,i,a){super(s,4,i,a,0);n(this,"bytes",s=>{const i=s.get(this._label);return i===void 0?`Label "${this._label}" is not defined.`:[this.opcode,ps(i),ai(i),qo(i)]})}}const qo=t=>t>>16&255,ai=t=>t>>8&255,ps=t=>t&255;var hi=(t=>(t[t.None=0]="None",t[t.Relative=1]="Relative",t[t.RelativeLong=2]="RelativeLong",t[t.Absolute=3]="Absolute",t[t.AbsoluteLong=4]="AbsoluteLong",t))(hi||{});const zg={"ADC-Absolute":{opcode:109,label_type:0},"ADC-AbsoluteLong":{opcode:111,label_type:0},"ADC-AbsoluteLong_X":{opcode:127,label_type:0},"ADC-Absolute_X":{opcode:125,label_type:0},"ADC-Absolute_Y":{opcode:121,label_type:0},"ADC-DirectPage":{opcode:101,label_type:0},"ADC-DirectPage_Indirect":{opcode:114,label_type:0},"ADC-DirectPage_IndirectLong":{opcode:103,label_type:0},"ADC-DirectPage_IndirectLong_Y":{opcode:119,label_type:0},"ADC-DirectPage_Indirect_Y":{opcode:113,label_type:0},"ADC-DirectPage_X":{opcode:117,label_type:0},"ADC-DirectPage_X_Indirect":{opcode:97,label_type:0},"ADC-Immediate_Byte":{opcode:105,label_type:0},"ADC-Immediate_Label":{opcode:105,label_type:3},"ADC-Immediate_Word":{opcode:105,label_type:0},"ADC-Label":{opcode:109,label_type:3},"ADC-Label_X":{opcode:125,label_type:3},"ADC-Label_Y":{opcode:121,label_type:3},"ADC-StackRelative":{opcode:99,label_type:0},"ADC-StackRelative_Indirect_Y":{opcode:115,label_type:0},"AND-Absolute":{opcode:45,label_type:0},"AND-AbsoluteLong":{opcode:47,label_type:0},"AND-AbsoluteLong_X":{opcode:63,label_type:0},"AND-Absolute_X":{opcode:61,label_type:0},"AND-Absolute_Y":{opcode:57,label_type:0},"AND-DirectPage":{opcode:37,label_type:0},"AND-DirectPage_Indirect":{opcode:50,label_type:0},"AND-DirectPage_IndirectLong":{opcode:39,label_type:0},"AND-DirectPage_IndirectLong_Y":{opcode:55,label_type:0},"AND-DirectPage_Indirect_Y":{opcode:49,label_type:0},"AND-DirectPage_X":{opcode:53,label_type:0},"AND-DirectPage_X_Indirect":{opcode:33,label_type:0},"AND-Immediate_Byte":{opcode:41,label_type:0},"AND-Immediate_Label":{opcode:41,label_type:3},"AND-Immediate_Word":{opcode:41,label_type:0},"AND-Label":{opcode:45,label_type:3},"AND-Label_X":{opcode:61,label_type:3},"AND-Label_Y":{opcode:57,label_type:3},"AND-StackRelative":{opcode:35,label_type:0},"AND-StackRelative_Indirect_Y":{opcode:51,label_type:0},"ASL-Absolute":{opcode:14,label_type:0},"ASL-Absolute_X":{opcode:30,label_type:0},"ASL-Accumulator":{opcode:10,label_type:0},"ASL-DirectPage":{opcode:6,label_type:0},"ASL-DirectPage_X":{opcode:22,label_type:0},"ASL-Label":{opcode:14,label_type:3},"ASL-Label_X":{opcode:30,label_type:3},"BCC-DirectPage":{opcode:144,label_type:0},"BCC-Label":{opcode:144,label_type:1},"BCS-DirectPage":{opcode:176,label_type:0},"BCS-Label":{opcode:176,label_type:1},"BEQ-DirectPage":{opcode:240,label_type:0},"BEQ-Label":{opcode:240,label_type:1},"BIT-Absolute":{opcode:44,label_type:0},"BIT-Absolute_X":{opcode:60,label_type:0},"BIT-DirectPage":{opcode:36,label_type:0},"BIT-DirectPage_X":{opcode:52,label_type:0},"BIT-Immediate_Byte":{opcode:137,label_type:0},"BIT-Immediate_Label":{opcode:137,label_type:3},"BIT-Immediate_Word":{opcode:137,label_type:0},"BIT-Label":{opcode:44,label_type:3},"BIT-Label_X":{opcode:60,label_type:3},"BMI-DirectPage":{opcode:48,label_type:0},"BMI-Label":{opcode:48,label_type:1},"BNE-DirectPage":{opcode:208,label_type:0},"BNE-Label":{opcode:208,label_type:1},"BPL-DirectPage":{opcode:16,label_type:0},"BPL-Label":{opcode:16,label_type:1},"BRA-DirectPage":{opcode:128,label_type:0},"BRA-Label":{opcode:128,label_type:1},"BRK-Immediate_Byte":{opcode:0,label_type:0},"BRL-Absolute":{opcode:130,label_type:0},"BRL-Label":{opcode:130,label_type:2},"BVC-DirectPage":{opcode:80,label_type:0},"BVC-Label":{opcode:80,label_type:1},"BVS-DirectPage":{opcode:112,label_type:0},"BVS-Label":{opcode:112,label_type:1},"CLC-Implied":{opcode:24,label_type:0},"CLD-Implied":{opcode:216,label_type:0},"CLI-Implied":{opcode:88,label_type:0},"CLV-Implied":{opcode:184,label_type:0},"CMP-Absolute":{opcode:205,label_type:0},"CMP-AbsoluteLong":{opcode:207,label_type:0},"CMP-AbsoluteLong_X":{opcode:223,label_type:0},"CMP-Absolute_X":{opcode:221,label_type:0},"CMP-Absolute_Y":{opcode:217,label_type:0},"CMP-DirectPage":{opcode:197,label_type:0},"CMP-DirectPage_Indirect":{opcode:210,label_type:0},"CMP-DirectPage_IndirectLong":{opcode:199,label_type:0},"CMP-DirectPage_IndirectLong_Y":{opcode:215,label_type:0},"CMP-DirectPage_Indirect_Y":{opcode:209,label_type:0},"CMP-DirectPage_X":{opcode:213,label_type:0},"CMP-DirectPage_X_Indirect":{opcode:193,label_type:0},"CMP-Immediate_Byte":{opcode:201,label_type:0},"CMP-Immediate_Label":{opcode:201,label_type:3},"CMP-Immediate_Word":{opcode:201,label_type:0},"CMP-Label":{opcode:205,label_type:3},"CMP-Label_X":{opcode:221,label_type:3},"CMP-Label_Y":{opcode:217,label_type:3},"CMP-StackRelative":{opcode:195,label_type:0},"CMP-StackRelative_Indirect_Y":{opcode:211,label_type:0},"COP-Immediate_Byte":{opcode:2,label_type:0},"CPX-Absolute":{opcode:236,label_type:0},"CPX-DirectPage":{opcode:228,label_type:0},"CPX-Immediate_Byte":{opcode:224,label_type:0},"CPX-Immediate_Label":{opcode:224,label_type:3},"CPX-Immediate_Word":{opcode:224,label_type:0},"CPX-Label":{opcode:236,label_type:3},"CPY-Absolute":{opcode:204,label_type:0},"CPY-DirectPage":{opcode:196,label_type:0},"CPY-Immediate_Byte":{opcode:192,label_type:0},"CPY-Immediate_Label":{opcode:192,label_type:3},"CPY-Immediate_Word":{opcode:192,label_type:0},"CPY-Label":{opcode:204,label_type:3},"DEC-Absolute":{opcode:206,label_type:0},"DEC-Absolute_X":{opcode:222,label_type:0},"DEC-Accumulator":{opcode:58,label_type:0},"DEC-DirectPage":{opcode:198,label_type:0},"DEC-DirectPage_X":{opcode:214,label_type:0},"DEC-Label":{opcode:206,label_type:3},"DEC-Label_X":{opcode:222,label_type:3},"DEX-Implied":{opcode:202,label_type:0},"DEY-Implied":{opcode:136,label_type:0},"EOR-Absolute":{opcode:77,label_type:0},"EOR-AbsoluteLong":{opcode:79,label_type:0},"EOR-AbsoluteLong_X":{opcode:95,label_type:0},"EOR-Absolute_X":{opcode:93,label_type:0},"EOR-Absolute_Y":{opcode:89,label_type:0},"EOR-DirectPage":{opcode:69,label_type:0},"EOR-DirectPage_Indirect":{opcode:82,label_type:0},"EOR-DirectPage_IndirectLong":{opcode:71,label_type:0},"EOR-DirectPage_IndirectLong_Y":{opcode:87,label_type:0},"EOR-DirectPage_Indirect_Y":{opcode:81,label_type:0},"EOR-DirectPage_X":{opcode:85,label_type:0},"EOR-DirectPage_X_Indirect":{opcode:65,label_type:0},"EOR-Immediate_Byte":{opcode:73,label_type:0},"EOR-Immediate_Label":{opcode:73,label_type:3},"EOR-Immediate_Word":{opcode:73,label_type:0},"EOR-Label":{opcode:77,label_type:3},"EOR-Label_X":{opcode:93,label_type:3},"EOR-Label_Y":{opcode:89,label_type:3},"EOR-StackRelative":{opcode:67,label_type:0},"EOR-StackRelative_Indirect_Y":{opcode:83,label_type:0},"INC-Absolute":{opcode:238,label_type:0},"INC-Absolute_X":{opcode:254,label_type:0},"INC-Accumulator":{opcode:26,label_type:0},"INC-DirectPage":{opcode:230,label_type:0},"INC-DirectPage_X":{opcode:246,label_type:0},"INC-Label":{opcode:238,label_type:3},"INC-Label_X":{opcode:254,label_type:3},"INX-Implied":{opcode:232,label_type:0},"INY-Implied":{opcode:200,label_type:0},"JML-AbsoluteLong":{opcode:92,label_type:0},"JML-Absolute_IndirectLong":{opcode:220,label_type:0},"JML-Label":{opcode:92,label_type:4},"JML-Label_IndirectLong":{opcode:220,label_type:3},"JMP-Absolute":{opcode:76,label_type:0},"JMP-Absolute_Indirect":{opcode:108,label_type:0},"JMP-Absolute_X_Indirect":{opcode:124,label_type:0},"JMP-Label":{opcode:76,label_type:3},"JMP-Label_Indirect":{opcode:108,label_type:3},"JMP-Label_X_Indirect":{opcode:124,label_type:3},"JSL-AbsoluteLong":{opcode:34,label_type:0},"JSL-Label":{opcode:34,label_type:4},"JSR-Absolute":{opcode:32,label_type:0},"JSR-Absolute_X_Indirect":{opcode:252,label_type:0},"JSR-Label":{opcode:32,label_type:3},"JSR-Label_X_Indirect":{opcode:252,label_type:3},"LDA-Absolute":{opcode:173,label_type:0},"LDA-AbsoluteLong":{opcode:175,label_type:0},"LDA-AbsoluteLong_X":{opcode:191,label_type:0},"LDA-Absolute_X":{opcode:189,label_type:0},"LDA-Absolute_Y":{opcode:185,label_type:0},"LDA-DirectPage":{opcode:165,label_type:0},"LDA-DirectPage_Indirect":{opcode:178,label_type:0},"LDA-DirectPage_IndirectLong":{opcode:167,label_type:0},"LDA-DirectPage_IndirectLong_Y":{opcode:183,label_type:0},"LDA-DirectPage_Indirect_Y":{opcode:177,label_type:0},"LDA-DirectPage_X":{opcode:181,label_type:0},"LDA-DirectPage_X_Indirect":{opcode:161,label_type:0},"LDA-Immediate_Byte":{opcode:169,label_type:0},"LDA-Immediate_Label":{opcode:169,label_type:3},"LDA-Immediate_Word":{opcode:169,label_type:0},"LDA-Label":{opcode:173,label_type:3},"LDA-Label_X":{opcode:189,label_type:3},"LDA-Label_Y":{opcode:185,label_type:3},"LDA-StackRelative":{opcode:163,label_type:0},"LDA-StackRelative_Indirect_Y":{opcode:179,label_type:0},"LDX-Absolute":{opcode:174,label_type:0},"LDX-Absolute_Y":{opcode:190,label_type:0},"LDX-DirectPage":{opcode:166,label_type:0},"LDX-DirectPage_Y":{opcode:182,label_type:0},"LDX-Immediate_Byte":{opcode:162,label_type:0},"LDX-Immediate_Label":{opcode:162,label_type:3},"LDX-Immediate_Word":{opcode:162,label_type:0},"LDX-Label":{opcode:174,label_type:3},"LDX-Label_Y":{opcode:190,label_type:3},"LDY-Absolute":{opcode:172,label_type:0},"LDY-Absolute_X":{opcode:188,label_type:0},"LDY-DirectPage":{opcode:164,label_type:0},"LDY-DirectPage_X":{opcode:180,label_type:0},"LDY-Immediate_Byte":{opcode:160,label_type:0},"LDY-Immediate_Label":{opcode:160,label_type:3},"LDY-Immediate_Word":{opcode:160,label_type:0},"LDY-Label":{opcode:172,label_type:3},"LDY-Label_X":{opcode:188,label_type:3},"LSR-Absolute":{opcode:78,label_type:0},"LSR-Absolute_X":{opcode:94,label_type:0},"LSR-Accumulator":{opcode:74,label_type:0},"LSR-DirectPage":{opcode:70,label_type:0},"LSR-DirectPage_X":{opcode:86,label_type:0},"LSR-Label":{opcode:78,label_type:3},"LSR-Label_X":{opcode:94,label_type:3},"MVN-BlockMove":{opcode:84,label_type:0},"MVP-BlockMove":{opcode:68,label_type:0},"NOP-Implied":{opcode:234,label_type:0},"ORA-Absolute":{opcode:13,label_type:0},"ORA-AbsoluteLong":{opcode:15,label_type:0},"ORA-AbsoluteLong_X":{opcode:31,label_type:0},"ORA-Absolute_X":{opcode:29,label_type:0},"ORA-Absolute_Y":{opcode:25,label_type:0},"ORA-DirectPage":{opcode:5,label_type:0},"ORA-DirectPage_Indirect":{opcode:18,label_type:0},"ORA-DirectPage_IndirectLong":{opcode:7,label_type:0},"ORA-DirectPage_IndirectLong_Y":{opcode:23,label_type:0},"ORA-DirectPage_Indirect_Y":{opcode:17,label_type:0},"ORA-DirectPage_X":{opcode:21,label_type:0},"ORA-DirectPage_X_Indirect":{opcode:1,label_type:0},"ORA-Immediate_Byte":{opcode:9,label_type:0},"ORA-Immediate_Label":{opcode:9,label_type:3},"ORA-Immediate_Word":{opcode:9,label_type:0},"ORA-Label":{opcode:13,label_type:3},"ORA-Label_X":{opcode:29,label_type:3},"ORA-Label_Y":{opcode:25,label_type:3},"ORA-StackRelative":{opcode:3,label_type:0},"ORA-StackRelative_Indirect_Y":{opcode:19,label_type:0},"PEA-Absolute":{opcode:244,label_type:0},"PEA-Label":{opcode:244,label_type:3},"PEI-DirectPage_Indirect":{opcode:212,label_type:0},"PER-Absolute":{opcode:98,label_type:0},"PER-Label":{opcode:98,label_type:2},"PHA-Implied":{opcode:72,label_type:0},"PHB-Implied":{opcode:139,label_type:0},"PHD-Implied":{opcode:11,label_type:0},"PHK-Implied":{opcode:75,label_type:0},"PHP-Implied":{opcode:8,label_type:0},"PHX-Implied":{opcode:218,label_type:0},"PHY-Implied":{opcode:90,label_type:0},"PLA-Implied":{opcode:104,label_type:0},"PLB-Implied":{opcode:171,label_type:0},"PLD-Implied":{opcode:43,label_type:0},"PLP-Implied":{opcode:40,label_type:0},"PLX-Implied":{opcode:250,label_type:0},"PLY-Implied":{opcode:122,label_type:0},"REP-Immediate_Byte":{opcode:194,label_type:0},"ROL-Absolute":{opcode:46,label_type:0},"ROL-Absolute_X":{opcode:62,label_type:0},"ROL-Accumulator":{opcode:42,label_type:0},"ROL-DirectPage":{opcode:38,label_type:0},"ROL-DirectPage_X":{opcode:54,label_type:0},"ROL-Label":{opcode:46,label_type:3},"ROL-Label_X":{opcode:62,label_type:3},"ROR-Absolute":{opcode:110,label_type:0},"ROR-Absolute_X":{opcode:126,label_type:0},"ROR-Accumulator":{opcode:106,label_type:0},"ROR-DirectPage":{opcode:102,label_type:0},"ROR-DirectPage_X":{opcode:118,label_type:0},"ROR-Label":{opcode:110,label_type:3},"ROR-Label_X":{opcode:126,label_type:3},"RTI-Implied":{opcode:64,label_type:0},"RTL-Implied":{opcode:107,label_type:0},"RTS-Implied":{opcode:96,label_type:0},"SBC-Absolute":{opcode:237,label_type:0},"SBC-AbsoluteLong":{opcode:239,label_type:0},"SBC-AbsoluteLong_X":{opcode:255,label_type:0},"SBC-Absolute_X":{opcode:253,label_type:0},"SBC-Absolute_Y":{opcode:249,label_type:0},"SBC-DirectPage":{opcode:229,label_type:0},"SBC-DirectPage_Indirect":{opcode:242,label_type:0},"SBC-DirectPage_IndirectLong":{opcode:231,label_type:0},"SBC-DirectPage_IndirectLong_Y":{opcode:247,label_type:0},"SBC-DirectPage_Indirect_Y":{opcode:241,label_type:0},"SBC-DirectPage_X":{opcode:245,label_type:0},"SBC-DirectPage_X_Indirect":{opcode:225,label_type:0},"SBC-Immediate_Byte":{opcode:233,label_type:0},"SBC-Immediate_Label":{opcode:233,label_type:3},"SBC-Immediate_Word":{opcode:233,label_type:0},"SBC-Label":{opcode:237,label_type:3},"SBC-Label_X":{opcode:253,label_type:3},"SBC-Label_Y":{opcode:249,label_type:3},"SBC-StackRelative":{opcode:227,label_type:0},"SBC-StackRelative_Indirect_Y":{opcode:243,label_type:0},"SEC-Implied":{opcode:56,label_type:0},"SED-Implied":{opcode:248,label_type:0},"SEI-Implied":{opcode:120,label_type:0},"SEP-Immediate_Byte":{opcode:226,label_type:0},"STA-Absolute":{opcode:141,label_type:0},"STA-AbsoluteLong":{opcode:143,label_type:0},"STA-AbsoluteLong_X":{opcode:159,label_type:0},"STA-Absolute_X":{opcode:157,label_type:0},"STA-Absolute_Y":{opcode:153,label_type:0},"STA-DirectPage":{opcode:133,label_type:0},"STA-DirectPage_Indirect":{opcode:146,label_type:0},"STA-DirectPage_IndirectLong":{opcode:135,label_type:0},"STA-DirectPage_IndirectLong_Y":{opcode:151,label_type:0},"STA-DirectPage_Indirect_Y":{opcode:145,label_type:0},"STA-DirectPage_X":{opcode:149,label_type:0},"STA-DirectPage_X_Indirect":{opcode:129,label_type:0},"STA-Label":{opcode:141,label_type:3},"STA-Label_X":{opcode:157,label_type:3},"STA-Label_Y":{opcode:153,label_type:3},"STA-StackRelative":{opcode:131,label_type:0},"STA-StackRelative_Indirect_Y":{opcode:147,label_type:0},"STP-Implied":{opcode:219,label_type:0},"STX-Absolute":{opcode:142,label_type:0},"STX-DirectPage":{opcode:134,label_type:0},"STX-DirectPage_Y":{opcode:150,label_type:0},"STX-Label":{opcode:142,label_type:3},"STY-Absolute":{opcode:140,label_type:0},"STY-DirectPage":{opcode:132,label_type:0},"STY-DirectPage_X":{opcode:148,label_type:0},"STY-Label":{opcode:140,label_type:3},"STZ-Absolute":{opcode:156,label_type:0},"STZ-Absolute_X":{opcode:158,label_type:0},"STZ-DirectPage":{opcode:100,label_type:0},"STZ-DirectPage_X":{opcode:116,label_type:0},"STZ-Label":{opcode:156,label_type:3},"STZ-Label_X":{opcode:158,label_type:3},"TAX-Implied":{opcode:170,label_type:0},"TAY-Implied":{opcode:168,label_type:0},"TCD-Implied":{opcode:91,label_type:0},"TCS-Implied":{opcode:27,label_type:0},"TDC-Implied":{opcode:123,label_type:0},"TRB-Absolute":{opcode:28,label_type:0},"TRB-DirectPage":{opcode:20,label_type:0},"TRB-Label":{opcode:28,label_type:3},"TSB-Absolute":{opcode:12,label_type:0},"TSB-DirectPage":{opcode:4,label_type:0},"TSB-Label":{opcode:12,label_type:3},"TSC-Implied":{opcode:59,label_type:0},"TSX-Implied":{opcode:186,label_type:0},"TXA-Implied":{opcode:138,label_type:0},"TXS-Implied":{opcode:154,label_type:0},"TXY-Implied":{opcode:155,label_type:0},"TYA-Implied":{opcode:152,label_type:0},"TYX-Implied":{opcode:187,label_type:0},"WAI-Implied":{opcode:203,label_type:0},"WDM-Immediate_Byte":{opcode:66,label_type:0},"XBA-Implied":{opcode:235,label_type:0},"XCE-Implied":{opcode:251,label_type:0}},Qg={Implied:{size:0,label:""},Accumulator:{size:0,label:"A"},Immediate_Byte:{size:1,label:"#const"},Immediate_Word:{size:2,label:"#const"},DirectPage:{size:1,label:"dp"},DirectPage_X:{size:1,label:"dp,x"},DirectPage_Y:{size:1,label:"dp,y"},DirectPage_Indirect:{size:1,label:"(dp)"},DirectPage_X_Indirect:{size:1,label:"(dp,x)"},DirectPage_Indirect_Y:{size:1,label:"(dp),y"},DirectPage_IndirectLong:{size:1,label:"[dp]"},DirectPage_IndirectLong_Y:{size:1,label:"[dp],y"},Absolute:{size:2,label:"addr"},Absolute_X:{size:2,label:"addr,x"},Absolute_Y:{size:2,label:"addr,y"},Absolute_Indirect:{size:2,label:"(addr)"},Absolute_X_Indirect:{size:2,label:"(addr,x)"},Absolute_IndirectLong:{size:2,label:"[addr]"},AbsoluteLong:{size:3,label:"long"},AbsoluteLong_X:{size:3,label:"long,x"},StackRelative:{size:1,label:"sr,s"},StackRelative_Indirect_Y:{size:1,label:"(sr,s),y"},BlockMove:{size:2,label:"src:dest"},Label:{size:0,label:"label"},Label_X:{size:0,label:"label,x"},Label_Y:{size:0,label:"label,y"},Label_Indirect:{size:0,label:"(label)"},Label_X_Indirect:{size:0,label:"(label,x)"},Label_Indirect_Y:{size:0,label:"(label),y"},Label_IndirectLong:{size:0,label:"[label]"},Label_IndirectLong_Y:{size:0,label:"[label],y"}};class Ac extends Ho{constructor(s){super(s);n(this,"mnemonic");n(this,"mode");n(this,"arg");n(this,"label");n(this,"bytes");this.bytes=[]}build(s){if(!this.mnemonic)return"Invalid instruction: you must specify an opcode.";const i=this.range;if(this.mnemonic==="DB")return new Ng(i,this.bytes);if(this.mnemonic==="DW")return new Lg(i,this.bytes);if(this.mnemonic==="DL")return new Mg(i,this.bytes);this.mode||(this.mode="Implied");const a=Qg[this.mode];if(!a)return`Instruction mode "${this.mode}" doesn't exist.`;const r=zg[`${this.mnemonic}-${this.mode}`];if(!r)return`Instruction "${this.mnemonic} ${a.label}" doesn't exist.`;const o=r.opcode;if(r.label_type===hi.None){if(a.size>0&&this.arg===void 0)return"Instruction doesn't have the required parameter.";switch(a.size){case 0:return new Tg(o,i);case 1:return new Eg(o,i,this.arg);case 2:return new Rg(o,i,this.arg);case 3:return new Dg(o,i,this.arg)}return`Instruction has invalid size ${a.size+1}.`}const l=this.label;if(l===void 0)return"Instruction doesn't have the required label.";switch(r.label_type){case hi.Relative:return new Bg(o,i,l,s);case hi.RelativeLong:return new $g(o,i,l,s);case hi.Absolute:return new Vg(o,i,l);case hi.AbsoluteLong:return new Fg(o,i,l)}}}class $d{constructor(e=""){n(this,"code","");n(this,"program",{chunks:[]});n(this,"errors",[]);this.code=e}assemble(){this.errors=[];const e=this._parse_code(),{instructionChunks:s,labels:i}=this._generate_chunks_and_labels(e);this.program=this._generate_program(s,i)}_parse_code(){const e=Zu.of(this.code.split(`
`)),i=Bd.parser.parse(this.code).cursor();let a;const r=[],o=()=>{a&&r.push(a),a=void 0};for(i.iterate(l=>{const u=e.lineAt(l.from).number,d=this.code.slice(l.from,l.to),p=h=>{const{from:g,to:m}=l.from===l.to?e.lineAt(l.from):l;this.errors.push(new oi(h,{from:g,to:m,line:u}))};if(i.type.isError){p("Invalid syntax.");return}if(l.name==="Instruction"){o();const h={from:i.from,to:i.to,line:u};a=new Ac(h);return}if(["Opcode","DB","DW","DL"].includes(l.name)){const h=d.toUpperCase();a?a.mnemonic?p(`Mode (${h}): mode already present`):a.mnemonic=h:p(`Mode (${h}): missing instruction builder.`);return}if(l.name.startsWith("Mode_")){const h=l.name.substring(5);a?a.mode?p(`Mode (${h}): mode already present`):a.mode=h:p(`Mode (${h}): missing instruction builder.`);return}const f=(h,g=!1)=>{const[m,y]=g?[`const ${h}`,d.substring(1)]:[h,d];if(!a)return p(`Arg (${m}): missing instruction builder.`);if(!a.mnemonic)return p(`Arg (${m}): missing instruction mnemonic.`);if(a.mnemonic==="DB"){if(h!=="byte")return p(`"db" requires bytes, but you provided a ${m}.`);a.bytes.push(pi(y));return}if(a.mnemonic==="DW"){if(h!=="word")return p(`"dw" requires words, but you provided a ${m}.`);a.bytes.push(pi(y));return}if(a.mnemonic==="DL"){if(h!=="long")return p(`"dl" requires longs, but you provided a ${m}.`);a.bytes.push(pi(y));return}if(a.arg)return p(`Arg (${m}): arg is already defined.`);a.arg=pi(y)};if(l.name=="Byte"){f("byte");return}if(l.name=="Word"){f("word");return}if(l.name=="Long"){f("long");return}if(l.name=="ConstByte"){f("byte",!0);return}if(l.name=="ConstWord"){f("word",!0);return}if(l.name=="LabelUsage"){a?a.arg?p("Arg (label): arg is already defined."):a.label=d:p("Arg (label): missing instruction builder.");return}if(l.name=="MoveBanks"){a?a.arg?p("Arg (block move): arg is already defined."):a.arg=Wg(d):p("Arg (block move): missing instruction builder.");return}if(l.name==="LabelDefinition"){o();const h={from:i.from,to:i.to,line:u},g=d.substring(0,d.length-1);r.push(new Pc(h,g));return}if(l.name==="OrgDefinition"){o();const h={from:i.from,to:i.to,line:u},g=pi(d.replace(/org/,"").trim());r.push(new Ic(h,g));return}});i.next(););return o(),r}_generate_chunks_and_labels(e){let s=8421376,i={origin:s,instructions:[]};const a=[i];let r=new Map;for(const o of e){if(o instanceof Ac){const l=o.build(s);if(typeof l=="string"){this.errors.push(new oi(l,o.range));continue}i.instructions.push(l),s+=l.size;continue}if(o instanceof Pc){if(r.has(o.label)){const l=`Label: label "${o.label}" is already defined.`;this.errors.push(new oi(l,o.range));continue}r.set(o.label,s);continue}if(o instanceof Ic){if(isNaN(o.address)){const l="Origin: invalid origin address.";this.errors.push(new oi(l,o.range));continue}i={origin:o.address,instructions:[]},s=o.address,a.push(i);continue}}return{instructionChunks:a,labels:r}}_generate_program(e,s){return{chunks:e.map(i=>({origin:i.origin,bytes:i.instructions.flatMap(a=>{if(a instanceof ua||a instanceof Tr)return a.bytes();if(a instanceof ha){const l=a.bytes(s);if(typeof l=="string"){const u=new oi(l,a.range);this.errors.push(u);return}return l}const r="Invalid instruction type.",o=new oi(r,a.range);this.errors.push(o)}).filter(a=>a!==void 0)}))}}}function pi(t){return t.startsWith("$")?Number.parseInt(t.substring(1),16):t.startsWith("%")?Number.parseInt(t.substring(1),2):Number.parseInt(t,10)}function Wg(t){const[e=0,s=0]=t.split(",").map(pi);return e|s<<8}const ci=new Map;function Ug(t){const[e,s]=St(0);return Wt(()=>{const a=()=>s(r=>r+1);return ci.has(t)||ci.set(t,new Set),ci.get(t).add(a),()=>{const r=ci.get(t);r&&(r.delete(a),r.size===0&&ci.delete(t))}},[t]),[w(()=>{var a;(a=ci.get(t))==null||a.forEach(r=>r())},[t]),e]}const v=1,Je=2,ce=4,C=8,fs=16,Xe=32,Vd=64,Ko=128,Er=256,Fd=512,ve=1,K=2,os=4,cs=8,Hi=16,Jo=16,Gi=32,Ze=64,P=128;let Bt=class Aa{constructor(e,s=fi){n(this,"_value");this._value=e&s}get byte(){return this._value&Ps}get word(){return this._value&Hs}get long(){return this._value&fi}get page(){return(this._value&jr)>>8}get bank(){return(this._value&Hr)>>16}set byte(e){this._value=this._value&~Ps|e&Ps}set word(e){this._value=this._value&~Hs|e&Hs}set long(e){this._value=this._value&~fi|e&fi}set page(e){this._value=this._value&~jr|e<<8&jr}set bank(e){this._value=this._value&~Hr|e<<16&Hr}format_byte(e=""){return Vs(this.byte,2,e)}format_word(e=""){return Vs(this.word,4,e)}format_long(e=""){return Vs(this.long,6,e)}format_page(e=""){return Vs(this.page,2,e)}format_bank(e=""){return Vs(this.bank,2,e)}format_address(){return`[${Vs(this.bank,2,"")}:${Vs(this.word,4,"")}]`}as_byte(){return new Aa(this._value,Ps)}as_word(){return new Aa(this._value,Hs)}as_long(){return new Aa(this._value,fi)}};const q=t=>new Bt(t,Ps),x=t=>new Bt(t,Hs),T=t=>new Bt(t,fi),Ps=255,Hs=65535,fi=16777215,jr=65280,Hr=16711680;function Zg(t,e,s){return`${s.repeat(e-t.length)}${t}`}function Vs(t,e,s){const i=t.toString(16).toUpperCase();return`${s}${Zg(i,e,"0")}`}class R{constructor(e,s,i,a){n(this,"id");n(this,"_arg");n(this,"_processor");n(this,"_snapshot_before");n(this,"_snapshot_after");n(this,"_memory");n(this,"_effective_addr",T(0));this.id=e,this._arg=s,this._processor=i,this._snapshot_before=i.snapshot(),this._snapshot_after=void 0,this._memory=a}execute(){this._processor.pc=x(this._processor.pc.word+this.length),this._effective_addr=T(this.m.mapping.map_safe(this.addr)),this.execute_effect(),this._snapshot_after=this._processor.snapshot()}get mode(){return this.constructor.mode}get has_addr(){return this.mode.has_address}get addr(){return this.mode.addr(this._mode_context)}get effective_addr(){return this._effective_addr}get text(){const e=this.constructor.mnemonic,s=this.constructor.mode;return`${e} ${s.text}`}get text_with_value(){const e=this.constructor.mnemonic,s=this.constructor.mode;return`${e} ${s.format(this._mode_context)}`}get length(){const e=this.mode;let s=e.base_length;return e.length_modifier&v&&(s-=this._snapshot_before.flag_m),e.length_modifier&ce&&(s-=this._snapshot_before.flag_x),s}get cycles(){const e=this.constructor.cycles_modifier;let s=this.constructor.base_cycles;if(e&v&&(s-=this._snapshot_before.flag_m),e&ce&&(s-=this._snapshot_before.flag_x),e&C&&(s-=this._snapshot_before.dp===0?1:0),e&fs){const i=this._snapshot_before.x;s-=this._snapshot_before.flag_x||this._cross_boundary(i)}if(e&Xe){const i=this._snapshot_before.y;s-=this._snapshot_before.flag_x||this._cross_boundary(i)}return s}get opcode(){return this.constructor.opcode}get bytes(){const e=[this.opcode],s=this.length;return s>1&&e.push(this._arg.byte),s>2&&e.push(this._arg.page),s>3&&e.push(this._arg.bank),e}get pb(){return this._snapshot_before.pb}get pc(){return this._snapshot_before.pc}get snapshot(){return this._snapshot_after}load_m(e){return this._processor.flag_m?this._memory.load_byte(e):this._memory.load_word(e)}load_x(e){return this._processor.flag_x?this._memory.load_byte(e):this._memory.load_word(e)}save_m(e,s){this._processor.flag_m?this._memory.save_byte(e,s):this._memory.save_word(e,s)}save_x(e,s){this._processor.flag_x?this._memory.save_byte(e,s):this._memory.save_word(e,s)}get p(){return this._processor}get m(){return this._memory}_cross_boundary(e){const s=this.addr;return T(s.long+e).page===s.page?0:1}get _mode_context(){return{arg:this._arg,arg_size:this.length-1,p:this._processor,m:this._memory,pc:this._snapshot_before.pc,length:this.length}}}n(R,"cycles_modifier",0),n(R,"affected_flags",0);const L=class L{constructor(e){n(this,"addr");n(this,"format");n(this,"base_length");n(this,"length_modifier");n(this,"has_address");n(this,"text");this.addr=e.addr,this.format=e.format,this.base_length=e.base_length,this.length_modifier=e.length_modifier??0,this.has_address=e.has_address??!0,this.text=e.text}};n(L,"Implied",new L({addr:()=>T(-1),format:()=>"",has_address:!1,base_length:1,text:""})),n(L,"Accumulator",new L({addr:()=>T(-1),format:()=>"A",has_address:!1,base_length:1,text:"A"})),n(L,"Immediate",new L({addr:()=>T(-1),format:({arg:e})=>`#${e.format_byte("$")}`,has_address:!1,base_length:2,text:"#const"})),n(L,"Immediate_VariableA",new L({addr:()=>T(-1),format:({arg:e,arg_size:s})=>`#${s===1?e.format_byte("$"):e.format_word("$")}`,has_address:!1,base_length:3,length_modifier:v,text:"#const"})),n(L,"Immediate_VariableX",new L({addr:()=>T(-1),format:({arg:e,arg_size:s})=>`#${s===1?e.format_byte("$"):e.format_word("$")}`,has_address:!1,base_length:3,length_modifier:ce,text:"#const"})),n(L,"DirectPage",new L({addr:({arg:e,p:s})=>x(e.byte+s.dp.word),format:({arg:e})=>e.format_byte("$"),base_length:2,text:"dp"})),n(L,"DirectPage_X",new L({addr:({arg:e,p:s})=>s.flag_e&&s.dp.byte===0?x(s.dp.word+q(e.byte+s.x.word).byte):x(s.dp.word+e.byte+s.x.word),format:({arg:e})=>`${e.format_byte("$")},x`,base_length:2,text:"dp,x"})),n(L,"DirectPage_Y",new L({addr:({arg:e,p:s})=>s.flag_e&&s.dp.byte===0?x(s.dp.word+q(e.byte+s.y.word).byte):x(s.dp.word+e.byte+s.y.word),format:({arg:e})=>`${e.format_byte("$")},y`,base_length:2,text:"dp,y"})),n(L,"DirectPage_Indirect",new L({addr:({arg:e,p:s,m:i})=>{const a=s.db.byte<<16,r=x(e.byte+s.dp.word);return T(a+i.load_word(r).word)},format:({arg:e})=>`(${e.format_byte("$")})`,base_length:2,text:"(dp)"})),n(L,"DirectPage_X_Indirect",new L({addr:({arg:e,p:s,m:i})=>{const a=s.db.byte<<16,r=s.flag_e&&s.dp.byte===0?x(s.dp.word+q(e.byte+s.x.word).byte):x(s.dp.word+e.byte+s.x.word);return T(a+i.load_word(r).word)},format:({arg:e})=>`(${e.format_byte("$")},x)`,base_length:2,text:"(dp,x)"})),n(L,"DirectPage_Indirect_Y",new L({addr:({arg:e,p:s,m:i})=>{const a=s.db.byte<<16,r=x(e.byte+s.dp.word);return T(a+i.load_word(r).word+s.y.word)},format:({arg:e})=>`(${e.format_byte("$")}),y`,base_length:2,text:"(dp),y"})),n(L,"DirectPage_IndirectLong",new L({addr:({arg:e,p:s,m:i})=>{const a=x(e.byte+s.dp.word);return i.load_long(a)},format:({arg:e})=>`[${e.format_byte("$")}]`,base_length:2,text:"[dp]"})),n(L,"DirectPage_IndirectLong_Y",new L({addr:({arg:e,p:s,m:i})=>{const a=x(e.byte+s.dp.word);return T(i.load_long(a).long+s.y.word)},format:({arg:e})=>`[${e.format_byte("$")}],y`,base_length:2,text:"[dp],y"})),n(L,"Absolute",new L({addr:({arg:e,p:s})=>{const i=s.db.byte<<16;return T(i+e.word)},format:({arg:e})=>`${e.format_word("$")}`,base_length:3,text:"addr"})),n(L,"Absolute_X",new L({addr:({arg:e,p:s})=>{const i=s.db.byte<<16;return T(i+x(e.word+s.x.word).word)},format:({arg:e})=>`${e.format_word("$")},x`,base_length:3,text:"addr,x"})),n(L,"Absolute_Y",new L({addr:({arg:e,p:s})=>{const i=s.db.byte<<16;return T(i+x(e.word+s.y.word).word)},format:({arg:e})=>`${e.format_word("$")},y`,base_length:3,text:"addr,y"})),n(L,"Absolute_Indirect",new L({addr:({arg:e,p:s,m:i})=>{const a=s.db.byte<<16,r=T(a+e.word);return T(a+i.load_word(r).word)},format:({arg:e})=>`(${e.format_word("$")})`,base_length:3,text:"(addr)"})),n(L,"Absolute_X_Indirect",new L({addr:({arg:e,p:s,m:i})=>{const a=s.db.byte<<16,r=T(a+x(e.word+s.x.word).word);return T(a+i.load_word(r).word)},format:({arg:e})=>`(${e.format_word("$")},x)`,base_length:3,text:"(addr,x)"})),n(L,"Absolute_IndirectLong",new L({addr:({arg:e,p:s,m:i})=>{const a=s.db.byte<<16,r=T(a+e.word);return i.load_long(r)},format:({arg:e})=>`[${e.format_word("$")}]`,base_length:3,text:"[addr]"})),n(L,"AbsoluteLong",new L({addr:({arg:e})=>e,format:({arg:e})=>`${e.format_long("$")}`,base_length:4,text:"long"})),n(L,"AbsoluteLong_X",new L({addr:({arg:e,p:s})=>T(e.long+s.x.word),format:({arg:e})=>`${e.format_long("$")},x`,base_length:4,text:"long,x"})),n(L,"StackRelative",new L({addr:({arg:e,p:s})=>x(e.byte+s.sp.word),format:({arg:e})=>`${e.format_byte("$")},s`,base_length:2,text:"sr,s"})),n(L,"StackRelative_Indirect_Y",new L({addr:({arg:e,p:s,m:i})=>{const a=s.db.byte<<16,r=x(e.byte+s.sp.word);return T(a+x(i.load_word(r).word+s.y.word).word)},format:({arg:e})=>`(${e.format_byte("$")},s),y`,base_length:2,text:"(sr,s),y"})),n(L,"Offset",new L({addr:({arg:e,p:s,pc:i,length:a})=>{const r=s.db.byte<<16,o=e.byte,l=o&P?o-256:o;return T(r+x(i+a+l).word)},format:({arg:e})=>e.format_byte("$"),base_length:2,text:"offsetNear"})),n(L,"OffsetLong",new L({addr:({arg:e,p:s,pc:i,length:a})=>{const r=s.db.byte<<16,o=e.word,l=e.page&P?o-65536:o;return T(r+x(i+a+l).word)},format:({arg:e})=>e.format_word("$"),base_length:3,text:"offset"})),n(L,"BlockMove",new L({addr:({arg:e})=>e,format:({arg:e})=>`${e.format_byte("$")},${e.format_page("$")}`,has_address:!1,base_length:3,text:"srcBank,destBank"}));let b=L;class _n extends R{execute_effect(){}get length(){return 0}get bytes(){return[]}}n(_n,"mnemonic","<initial>"),n(_n,"opcode",-1),n(_n,"mode",b.Implied),n(_n,"base_cycles",0);class Xg{constructor(e){n(this,"_memory");n(this,"_mapping");this._memory=new Map,this._mapping=e}as_map(){return new Map(this._memory)}get mapping(){return this._mapping}reset(e){this._memory=new Map,this._mapping=e}_load(e){return(this._memory.get(e)??0)&Ps}_save(e,s){this._memory.set(e,s&Ps)}load_byte(e){return q(this._load(this._mapping.map(e)))}load_word(e){const s=this._load(this._mapping.map(e)),i=this._load(this._mapping.map(T(e.long+1)));return x((i<<8)+s)}load_long(e){const s=this._load(this._mapping.map(e)),i=this._load(this._mapping.map(T(e.long+1))),a=this._load(this._mapping.map(T(e.long+2)));return T((a<<16)+(i<<8)+s)}save_byte(e,s,i=!1){this._save(this._map(e,!i),s.byte)}save_word(e,s,i=!1){this._save(this._map(e,!i),s.byte),this._save(this._map(T(e.long+1),!i),s.page)}save_long(e,s,i=!1){this._save(this._map(e,!i),s.byte),this._save(this._map(T(e.long+1),!i),s.page),this._save(this._map(T(e.long+2),!i),s.bank)}load_byte_raw(e){try{return this._memory.get(this._mapping.map(e))}catch{return}}_map(e,s){return s?this._mapping.map_readonly(e):this._mapping.map(e)}}const Li=class Li{constructor(e,s=i=>i){n(this,"map");n(this,"_ranges");this.map=s,this._ranges=e}get initial_address(){return this._ranges[0].min}contains(e){return this._ranges.some(s=>{const i=e.bank,a=e.word,r=s.min.bank<=i&&i<=s.max.bank,o=s.min.word<=a&&a<=s.max.word;return r&&o})}};n(Li,"WRAM",new Li([{min:T(8257536),max:T(8265727)},{min:T(8265728),max:T(8388607)}])),n(Li,"WRAM_Mirror",new Li([{min:T(0),max:T(4136959)},{min:T(8323072),max:T(8331263)},{min:T(8388608),max:T(12525567)}],e=>T(8257536|e.word)));let Ni=Li;const fr=class fr{constructor(e,s){n(this,"_ram");n(this,"_rom");this._ram=e,this._rom=s}get ram_initial_address(){return this._ram[0].initial_address}get rom_initial_address(){return this._rom[0].initial_address}map(e){for(const i of this._ram)if(i.contains(e))return i.map(e).long;for(const i of this._rom)if(i.contains(e))return i.map(e).long;const s=`Reading from invalid address ${e.format_address()}: unsupported area.`;throw new Error(s)}map_readonly(e){for(const i of this._ram)if(i.contains(e))return i.map(e).long;for(const i of this._rom)if(i.contains(e)){const a=`Writing to invalid address ${e.format_address()}: cannot write in ROM.`;throw new Error(a)}const s=`Writing to invalid address ${e.format_address()}: unsupported area.`;throw new Error(s)}map_safe(e){for(const s of this._ram)if(s.contains(e))return s.map(e).long;for(const s of this._rom)if(s.contains(e))return s.map(e).long;return e.long}};n(fr,"LoROM",new fr([Ni.WRAM,Ni.WRAM_Mirror],[new Ni([{min:T(8421376),max:T(16777215)}]),new Ni([{min:T(32768),max:T(8257535)}],e=>T(q(e.bank+128).byte<<16|e.word))]));let hr=fr;function Tc(t,e,s,i){let a=0;for(let r=0;r<i;++r){const o=t>>r*4&15,l=e>>r*4&15,u=o+l+s;s=Math.floor(u/10),a|=u%10<<r*4}return a+(s<<i*4)}class Ee extends R{adc(e){if(this.p.flag_m){const s=this.p.flag_d?Tc(this.p.a.byte,e.byte,this.p.flag_c,2):this.p.a.byte+e.byte+this.p.flag_c,i=q(s);return this.p.flag_n=i.byte&P,this.p.flag_v=i.byte&Ze,this.p.flag_z=i.byte===0,this.p.flag_c=s>Ps,i}else{const s=this.p.flag_d?Tc(this.p.a.word,e.word,this.p.flag_c,4):this.p.a.word+e.word+this.p.flag_c,i=x(s);return this.p.flag_n=i.page&P,this.p.flag_v=i.page&Ze,this.p.flag_z=i.word===0,this.p.flag_c=s>Hs,i}}}n(Ee,"mnemonic","ADC"),n(Ee,"affected_flags",P|Ze|K|ve);class ft extends Ee{execute_effect(){const e=this.load_m(this.addr);this.p.a=this.adc(e)}}(t=>{class e extends t{execute_effect(){this.p.a=this.adc(this._arg)}}n(e,"opcode",105),n(e,"mode",b.Immediate_VariableA),n(e,"base_cycles",3),n(e,"cycles_modifier",v),t.Immediate_VariableA=e;class s extends ft{}n(s,"opcode",101),n(s,"mode",b.DirectPage),n(s,"base_cycles",4),n(s,"cycles_modifier",v|C),t.DirectPage=s;class i extends ft{}n(i,"opcode",117),n(i,"mode",b.DirectPage_X),n(i,"base_cycles",5),n(i,"cycles_modifier",v|C),t.DirectPage_X=i;class a extends ft{}n(a,"opcode",114),n(a,"mode",b.DirectPage_Indirect),n(a,"base_cycles",6),n(a,"cycles_modifier",v|C),t.DirectPage_Indirect=a;class r extends ft{}n(r,"opcode",97),n(r,"mode",b.DirectPage_X_Indirect),n(r,"base_cycles",7),n(r,"cycles_modifier",v|C),t.DirectPage_X_Indirect=r;class o extends ft{}n(o,"opcode",113),n(o,"mode",b.DirectPage_Indirect_Y),n(o,"base_cycles",6),n(o,"cycles_modifier",v|C|Xe),t.DirectPage_Indirect_Y=o;class l extends ft{}n(l,"opcode",103),n(l,"mode",b.DirectPage_IndirectLong),n(l,"base_cycles",7),n(l,"cycles_modifier",v|C),t.DirectPage_IndirectLong=l;class u extends ft{}n(u,"opcode",119),n(u,"mode",b.DirectPage_IndirectLong_Y),n(u,"base_cycles",7),n(u,"cycles_modifier",v|C),t.DirectPage_IndirectLong_Y=u;class d extends ft{}n(d,"opcode",109),n(d,"mode",b.Absolute),n(d,"base_cycles",5),n(d,"cycles_modifier",v),t.Absolute=d;class p extends ft{}n(p,"opcode",125),n(p,"mode",b.Absolute_X),n(p,"base_cycles",5),n(p,"cycles_modifier",v|fs),t.Absolute_X=p;class f extends ft{}n(f,"opcode",121),n(f,"mode",b.Absolute_Y),n(f,"base_cycles",5),n(f,"cycles_modifier",v|Xe),t.Absolute_Y=f;class h extends ft{}n(h,"opcode",111),n(h,"mode",b.AbsoluteLong),n(h,"base_cycles",6),n(h,"cycles_modifier",v),t.AbsoluteLong=h;class g extends ft{}n(g,"opcode",127),n(g,"mode",b.AbsoluteLong_X),n(g,"base_cycles",6),n(g,"cycles_modifier",v),t.AbsoluteLong_X=g;class m extends ft{}n(m,"opcode",99),n(m,"mode",b.StackRelative),n(m,"base_cycles",5),n(m,"cycles_modifier",v),t.StackRelative=m;class y extends ft{}n(y,"opcode",115),n(y,"mode",b.StackRelative_Indirect_Y),n(y,"base_cycles",8),n(y,"cycles_modifier",v),t.StackRelative_Indirect_Y=y})(Ee||(Ee={}));class Re extends R{and(e){if(this.p.flag_m){const s=q(e.byte&this.p.a.byte);return this.p.flag_n=s.byte&P,this.p.flag_z=s.byte===0,s}else{const s=x(e.word&this.p.a.word);return this.p.flag_n=s.page&P,this.p.flag_z=s.word===0,s}}}n(Re,"mnemonic","AND"),n(Re,"affected_flags",P|K);class mt extends Re{execute_effect(){this.p.a=this.and(this.load_m(this.addr))}}(t=>{class e extends t{execute_effect(){this.p.a=this.and(this._arg)}}n(e,"opcode",41),n(e,"mode",b.Immediate_VariableA),n(e,"base_cycles",3),n(e,"cycles_modifier",v),t.Immediate_VariableA=e;class s extends mt{}n(s,"opcode",37),n(s,"mode",b.DirectPage),n(s,"base_cycles",4),n(s,"cycles_modifier",v|C),t.DirectPage=s;class i extends mt{}n(i,"opcode",53),n(i,"mode",b.DirectPage_X),n(i,"base_cycles",5),n(i,"cycles_modifier",v|C),t.DirectPage_X=i;class a extends mt{}n(a,"opcode",50),n(a,"mode",b.DirectPage_Indirect),n(a,"base_cycles",6),n(a,"cycles_modifier",v|C),t.DirectPage_Indirect=a;class r extends mt{}n(r,"opcode",33),n(r,"mode",b.DirectPage_X_Indirect),n(r,"base_cycles",7),n(r,"cycles_modifier",v|C),t.DirectPage_X_Indirect=r;class o extends mt{}n(o,"opcode",49),n(o,"mode",b.DirectPage_Indirect_Y),n(o,"base_cycles",6),n(o,"cycles_modifier",v|C|Xe),t.DirectPage_Indirect_Y=o;class l extends mt{}n(l,"opcode",39),n(l,"mode",b.DirectPage_IndirectLong),n(l,"base_cycles",7),n(l,"cycles_modifier",v|C),t.DirectPage_IndirectLong=l;class u extends mt{}n(u,"opcode",55),n(u,"mode",b.DirectPage_IndirectLong_Y),n(u,"base_cycles",7),n(u,"cycles_modifier",v|C),t.DirectPage_IndirectLong_Y=u;class d extends mt{}n(d,"opcode",45),n(d,"mode",b.Absolute),n(d,"base_cycles",5),n(d,"cycles_modifier",v),t.Absolute=d;class p extends mt{}n(p,"opcode",61),n(p,"mode",b.Absolute_X),n(p,"base_cycles",5),n(p,"cycles_modifier",v|fs),t.Absolute_X=p;class f extends mt{}n(f,"opcode",57),n(f,"mode",b.Absolute_Y),n(f,"base_cycles",5),n(f,"cycles_modifier",v|Xe),t.Absolute_Y=f;class h extends mt{}n(h,"opcode",47),n(h,"mode",b.AbsoluteLong),n(h,"base_cycles",6),n(h,"cycles_modifier",v),t.AbsoluteLong=h;class g extends mt{}n(g,"opcode",63),n(g,"mode",b.AbsoluteLong_X),n(g,"base_cycles",6),n(g,"cycles_modifier",v),t.AbsoluteLong_X=g;class m extends mt{}n(m,"opcode",35),n(m,"mode",b.StackRelative),n(m,"base_cycles",5),n(m,"cycles_modifier",v),t.StackRelative=m;class y extends mt{}n(y,"opcode",51),n(y,"mode",b.StackRelative_Indirect_Y),n(y,"base_cycles",8),n(y,"cycles_modifier",v),t.StackRelative_Indirect_Y=y})(Re||(Re={}));class Gt extends R{asl(e){if(this.p.flag_m){const s=q(e.byte<<1);return this.p.flag_n=s.byte&P,this.p.flag_z=s.byte===0,this.p.flag_c=e.byte&P,s}else{const s=x(e.word<<1);return this.p.flag_n=s.page&P,this.p.flag_z=s.word===0,this.p.flag_c=e.page&P,s}}}n(Gt,"mnemonic","ASL"),n(Gt,"affected_flags",P|K|ve);class ga extends Gt{execute_effect(){const e=this.addr;this.save_m(e,this.asl(this.load_m(e)))}}(t=>{class e extends t{execute_effect(){this.p.a=this.asl(this.p.a)}}n(e,"opcode",10),n(e,"mode",b.Accumulator),n(e,"base_cycles",2),t.Accumulator=e;class s extends ga{}n(s,"opcode",6),n(s,"mode",b.DirectPage),n(s,"base_cycles",7),n(s,"cycles_modifier",Je|C),t.DirectPage=s;class i extends ga{}n(i,"opcode",22),n(i,"mode",b.DirectPage_X),n(i,"base_cycles",8),n(i,"cycles_modifier",Je|C),t.DirectPage_X=i;class a extends ga{}n(a,"opcode",14),n(a,"mode",b.Absolute),n(a,"base_cycles",8),n(a,"cycles_modifier",Je),t.Absolute=a;class r extends ga{}n(r,"opcode",30),n(r,"mode",b.Absolute_X),n(r,"base_cycles",9),n(r,"cycles_modifier",Je),t.Absolute_X=r})(Gt||(Gt={}));const js=class js extends R{constructor(){super(...arguments);n(this,"_branch_taken",!1)}get cycles(){return this._branch_taken?js.base_cycles+1+this._snapshot_before.flag_e:js.base_cycles}execute_effect(){this._branch_taken=this.check_branch(),this._branch_taken&&(this.p.pc=this.addr)}};n(js,"mode",b.Offset),n(js,"base_cycles",2),n(js,"cycles_modifier",Vd);let Qt=js;class ho extends Qt{constructor(){super(...arguments);n(this,"check_branch",()=>this.p.flag_c===0)}}n(ho,"mnemonic","BCC"),n(ho,"opcode",144);class po extends Qt{constructor(){super(...arguments);n(this,"check_branch",()=>this.p.flag_c===1)}}n(po,"mnemonic","BCS"),n(po,"opcode",176);class fo extends Qt{constructor(){super(...arguments);n(this,"check_branch",()=>this.p.flag_z===0)}}n(fo,"mnemonic","BNE"),n(fo,"opcode",208);class mo extends Qt{constructor(){super(...arguments);n(this,"check_branch",()=>this.p.flag_z===1)}}n(mo,"mnemonic","BEQ"),n(mo,"opcode",240);class go extends Qt{constructor(){super(...arguments);n(this,"check_branch",()=>this.p.flag_n===0)}}n(go,"mnemonic","BPL"),n(go,"opcode",16);class bo extends Qt{constructor(){super(...arguments);n(this,"check_branch",()=>this.p.flag_n===1)}}n(bo,"mnemonic","BMI"),n(bo,"opcode",48);class _o extends Qt{constructor(){super(...arguments);n(this,"check_branch",()=>this.p.flag_v===0)}}n(_o,"mnemonic","BVC"),n(_o,"opcode",80);class yo extends Qt{constructor(){super(...arguments);n(this,"check_branch",()=>this.p.flag_v===1)}}n(yo,"mnemonic","BVS"),n(yo,"opcode",112);class yn extends Qt{constructor(){super(...arguments);n(this,"check_branch",()=>!0)}}n(yn,"mnemonic","BRA"),n(yn,"opcode",128),n(yn,"base_cycles",3),n(yn,"cycles_modifier",0);class vn extends R{execute_effect(){this.p.pc=this.addr}}n(vn,"mnemonic","BRL"),n(vn,"opcode",130),n(vn,"mode",b.OffsetLong),n(vn,"base_cycles",4);class _s extends R{bit(e){if(this.p.flag_m){const s=q(this.p.a.byte&e.byte);this.p.flag_n=e.byte&P,this.p.flag_v=e.byte&Ze,this.p.flag_z=s.byte===0}else{const s=x(this.p.a.word&e.word);this.p.flag_n=e.page&P,this.p.flag_v=e.page&Ze,this.p.flag_z=s.word===0}}}n(_s,"mnemonic","BIT");class wn extends _s{execute_effect(){this.bit(this.load_m(this.addr))}}n(wn,"affected_flags",P|Ze|K);(t=>{class e extends t{execute_effect(){const l=this.p.flag_m?this.p.a.byte&this._arg.byte:this.p.a.word&this._arg.word;this.p.flag_z=l===0}}n(e,"affected_flags",K),n(e,"opcode",137),n(e,"mode",b.Immediate_VariableA),n(e,"base_cycles",3),n(e,"cycles_modifier",v),t.Immediate_VariableA=e;class s extends wn{}n(s,"opcode",36),n(s,"mode",b.DirectPage),n(s,"base_cycles",4),n(s,"cycles_modifier",v|C),t.DirectPage=s;class i extends wn{}n(i,"opcode",52),n(i,"mode",b.DirectPage_X),n(i,"base_cycles",5),n(i,"cycles_modifier",v|C),t.DirectPage_X=i;class a extends wn{}n(a,"opcode",44),n(a,"mode",b.Absolute),n(a,"base_cycles",5),n(a,"cycles_modifier",v),t.Absolute=a;class r extends wn{}n(r,"opcode",60),n(r,"mode",b.Absolute_X),n(r,"base_cycles",5),n(r,"cycles_modifier",v|fs),t.Absolute_X=r})(_s||(_s={}));class mi extends R{execute_effect(){throw new Error("BRK: Unsupported instruction.")}}n(mi,"mnemonic","BRK"),n(mi,"opcode",0),n(mi,"mode",b.Immediate),n(mi,"base_cycles",8),n(mi,"cycles_modifier",Er);class gi extends R{execute_effect(){this.p.flag_c=0}}n(gi,"mnemonic","CLC"),n(gi,"opcode",24),n(gi,"mode",b.Implied),n(gi,"base_cycles",2),n(gi,"affected_flags",ve);class bi extends R{execute_effect(){this.p.flag_d=0}}n(bi,"mnemonic","CLD"),n(bi,"opcode",216),n(bi,"mode",b.Implied),n(bi,"base_cycles",2),n(bi,"affected_flags",cs);class _i extends R{execute_effect(){this.p.flag_i=0}}n(_i,"mnemonic","CLI"),n(_i,"opcode",88),n(_i,"mode",b.Implied),n(_i,"base_cycles",2),n(_i,"affected_flags",os);class Qs extends R{execute_effect(){this.p.flag_v=0}}n(Qs,"mnemonic","CLV"),n(Qs,"opcode",184),n(Qs,"mode",b.Implied),n(Qs,"base_cycles",2),n(Qs,"baseLength",1),n(Qs,"affected_flags",Ze);class ze extends R{cmp(e){this.p.flag_m?(this.p.flag_n=q(this.p.a.byte-e.byte).byte&P,this.p.flag_z=this.p.a.byte===e.byte,this.p.flag_c=this.p.a.byte>=e.byte):(this.p.flag_n=x(this.p.a.word-e.word).page&P,this.p.flag_z=this.p.a.word===e.word,this.p.flag_c=this.p.a.word>=e.word)}execute_effect(){this.cmp(this.load_m(this.addr))}}n(ze,"mnemonic","CMP"),n(ze,"affected_flags",P|K|ve);(t=>{class e extends t{execute_effect(){this.cmp(this._arg)}}n(e,"opcode",201),n(e,"mode",b.Immediate_VariableA),n(e,"base_cycles",3),n(e,"cycles_modifier",v),t.Immediate_VariableA=e;class s extends t{}n(s,"opcode",197),n(s,"mode",b.DirectPage),n(s,"base_cycles",4),n(s,"cycles_modifier",v|C),t.DirectPage=s;class i extends t{}n(i,"opcode",213),n(i,"mode",b.DirectPage_X),n(i,"base_cycles",5),n(i,"cycles_modifier",v|C),t.DirectPage_X=i;class a extends t{}n(a,"opcode",210),n(a,"mode",b.DirectPage_Indirect),n(a,"base_cycles",6),n(a,"cycles_modifier",v|C),t.DirectPage_Indirect=a;class r extends t{}n(r,"opcode",193),n(r,"mode",b.DirectPage_X_Indirect),n(r,"base_cycles",7),n(r,"cycles_modifier",v|C),t.DirectPage_X_Indirect=r;class o extends t{}n(o,"opcode",209),n(o,"mode",b.DirectPage_Indirect_Y),n(o,"base_cycles",6),n(o,"cycles_modifier",v|C|Xe),t.DirectPage_Indirect_Y=o;class l extends t{}n(l,"opcode",199),n(l,"mode",b.DirectPage_IndirectLong),n(l,"base_cycles",7),n(l,"cycles_modifier",v|C),t.DirectPage_IndirectLong=l;class u extends t{}n(u,"opcode",215),n(u,"mode",b.DirectPage_IndirectLong_Y),n(u,"base_cycles",7),n(u,"cycles_modifier",v|C),t.DirectPage_IndirectLong_Y=u;class d extends t{}n(d,"opcode",205),n(d,"mode",b.Absolute),n(d,"base_cycles",5),n(d,"cycles_modifier",v),t.Absolute=d;class p extends t{}n(p,"opcode",221),n(p,"mode",b.Absolute_X),n(p,"base_cycles",5),n(p,"cycles_modifier",v|fs),t.Absolute_X=p;class f extends t{}n(f,"opcode",217),n(f,"mode",b.Absolute_Y),n(f,"base_cycles",5),n(f,"cycles_modifier",v|Xe),t.Absolute_Y=f;class h extends t{}n(h,"opcode",207),n(h,"mode",b.AbsoluteLong),n(h,"base_cycles",6),n(h,"cycles_modifier",v),t.AbsoluteLong=h;class g extends t{}n(g,"opcode",223),n(g,"mode",b.AbsoluteLong_X),n(g,"base_cycles",6),n(g,"cycles_modifier",v),t.AbsoluteLong_X=g;class m extends t{}n(m,"opcode",195),n(m,"mode",b.StackRelative),n(m,"base_cycles",5),n(m,"cycles_modifier",v),t.StackRelative=m;class y extends t{}n(y,"opcode",211),n(y,"mode",b.StackRelative_Indirect_Y),n(y,"base_cycles",8),n(y,"cycles_modifier",v),t.StackRelative_Indirect_Y=y})(ze||(ze={}));class yi extends R{execute_effect(){throw new Error("COP: Unsupported instruction.")}}n(yi,"mnemonic","COP"),n(yi,"opcode",2),n(yi,"mode",b.Immediate),n(yi,"base_cycles",8),n(yi,"cycles_modifier",Er);class Js extends R{cpx(e){this.p.flag_x?(this.p.flag_n=q(this.p.x.byte-e.byte).byte&P,this.p.flag_z=this.p.x.byte===e.byte,this.p.flag_c=this.p.x.byte>=e.byte):(this.p.flag_n=x(this.p.x.word-e.word).page&P,this.p.flag_z=this.p.x.word===e.word,this.p.flag_c=this.p.x.word>=e.word)}execute_effect(){this.cpx(this.load_x(this.addr))}}n(Js,"mnemonic","CPX"),n(Js,"affected_flags",P|K|ve);(t=>{class e extends t{execute_effect(){this.cpx(this._arg)}}n(e,"opcode",224),n(e,"mode",b.Immediate_VariableX),n(e,"base_cycles",3),n(e,"cycles_modifier",ce),t.Immediate_VariableX=e;class s extends t{}n(s,"opcode",228),n(s,"mode",b.DirectPage),n(s,"base_cycles",4),n(s,"cycles_modifier",ce|C),t.DirectPage=s;class i extends t{}n(i,"opcode",236),n(i,"mode",b.Absolute),n(i,"base_cycles",5),n(i,"cycles_modifier",ce),t.Absolute=i})(Js||(Js={}));class ei extends R{cpy(e){this.p.flag_x?(this.p.flag_n=q(this.p.y.byte-e.byte).byte&P,this.p.flag_z=this.p.y.byte===e.byte,this.p.flag_c=this.p.y.byte>=e.byte):(this.p.flag_n=x(this.p.y.word-e.word).page&P,this.p.flag_z=this.p.y.word===e.word,this.p.flag_c=this.p.y.word>=e.word)}execute_effect(){this.cpy(this.load_x(this.addr))}}n(ei,"mnemonic","CPY"),n(ei,"affected_flags",P|K|ve);(t=>{class e extends t{execute_effect(){this.cpy(this._arg)}}n(e,"opcode",192),n(e,"mode",b.Immediate_VariableX),n(e,"base_cycles",3),n(e,"cycles_modifier",ce),t.Immediate_VariableX=e;class s extends t{}n(s,"opcode",196),n(s,"mode",b.DirectPage),n(s,"base_cycles",4),n(s,"cycles_modifier",ce|C),n(s,"baseLength",2),t.DirectPage=s;class i extends t{}n(i,"opcode",204),n(i,"mode",b.Absolute),n(i,"base_cycles",5),n(i,"cycles_modifier",ce),n(i,"baseLength",3),t.Absolute=i})(ei||(ei={}));class qt extends R{dec(e){if(this.p.flag_m){const s=x(e.byte-1);return this.p.flag_n=s.byte&P,this.p.flag_z=s.byte===0,s}else{const s=x(e.word-1);return this.p.flag_n=s.page&P,this.p.flag_z=s.word===0,s}}}n(qt,"mnemonic","DEC"),n(qt,"affected_flags",P|K);class ba extends qt{execute_effect(){const e=this.addr;this.save_m(e,this.dec(this.load_m(e)))}}(t=>{class e extends t{execute_effect(){this.p.a=this.dec(this.p.a)}}n(e,"opcode",58),n(e,"mode",b.Accumulator),n(e,"base_cycles",2),t.Accumulator=e;class s extends ba{}n(s,"opcode",198),n(s,"mode",b.DirectPage),n(s,"base_cycles",7),n(s,"cycles_modifier",Je|C),t.DirectPage=s;class i extends ba{}n(i,"opcode",214),n(i,"mode",b.DirectPage_X),n(i,"base_cycles",8),n(i,"cycles_modifier",Je|C),t.DirectPage_X=i;class a extends ba{}n(a,"opcode",206),n(a,"mode",b.Absolute),n(a,"base_cycles",8),n(a,"cycles_modifier",Je),t.Absolute=a;class r extends ba{}n(r,"opcode",222),n(r,"mode",b.Absolute_X),n(r,"base_cycles",9),n(r,"cycles_modifier",Je),t.Absolute_X=r})(qt||(qt={}));class vi extends R{execute_effect(){if(this.p.flag_x){const e=x(this.p.x.byte-1);this.p.flag_n=e.byte&P,this.p.flag_z=e.byte===0,this.p.x=e}else{const e=x(this.p.x.word-1);this.p.flag_n=e.page&P,this.p.flag_z=e.word===0,this.p.x=e}}}n(vi,"mnemonic","DEX"),n(vi,"opcode",202),n(vi,"mode",b.Implied),n(vi,"base_cycles",2),n(vi,"affected_flags",P|K);class wi extends R{execute_effect(){if(this.p.flag_x){const e=x(this.p.y.byte-1);this.p.flag_n=e.byte&P,this.p.flag_z=e.byte===0,this.p.y=e}else{const e=x(this.p.y.word-1);this.p.flag_n=e.page&P,this.p.flag_z=e.word===0,this.p.y=e}}}n(wi,"mnemonic","DEY"),n(wi,"opcode",136),n(wi,"mode",b.Implied),n(wi,"base_cycles",2),n(wi,"affected_flags",P|K);class De extends R{eor(e){if(this.p.flag_m){const s=q(e.byte^this.p.a.byte);return this.p.flag_n=s.byte&P,this.p.flag_z=s.byte===0,s}else{const s=x(e.word^this.p.a.word);return this.p.flag_n=s.page&P,this.p.flag_z=s.word===0,s}}}n(De,"mnemonic","EOR"),n(De,"affected_flags",P|K);class gt extends De{execute_effect(){this.p.a=this.eor(this.load_m(this.addr))}}(t=>{class e extends t{execute_effect(){this.p.a=this.eor(this._arg)}}n(e,"opcode",73),n(e,"mode",b.Immediate_VariableA),n(e,"base_cycles",3),n(e,"cycles_modifier",v),t.Immediate_VariableA=e;class s extends gt{}n(s,"opcode",69),n(s,"mode",b.DirectPage),n(s,"base_cycles",4),n(s,"cycles_modifier",v|C),t.DirectPage=s;class i extends gt{}n(i,"opcode",85),n(i,"mode",b.DirectPage_X),n(i,"base_cycles",5),n(i,"cycles_modifier",v|C),t.DirectPage_X=i;class a extends gt{}n(a,"opcode",82),n(a,"mode",b.DirectPage_Indirect),n(a,"base_cycles",6),n(a,"cycles_modifier",v|C),t.DirectPage_Indirect=a;class r extends gt{}n(r,"opcode",65),n(r,"mode",b.DirectPage_X_Indirect),n(r,"base_cycles",7),n(r,"cycles_modifier",v|C),t.DirectPage_X_Indirect=r;class o extends gt{}n(o,"opcode",81),n(o,"mode",b.DirectPage_Indirect_Y),n(o,"base_cycles",6),n(o,"cycles_modifier",v|C|Xe),t.DirectPage_Indirect_Y=o;class l extends gt{}n(l,"opcode",71),n(l,"mode",b.DirectPage_IndirectLong),n(l,"base_cycles",7),n(l,"cycles_modifier",v|C),t.DirectPage_IndirectLong=l;class u extends gt{}n(u,"opcode",87),n(u,"mode",b.DirectPage_IndirectLong_Y),n(u,"base_cycles",7),n(u,"cycles_modifier",v|C),t.DirectPage_IndirectLong_Y=u;class d extends gt{}n(d,"opcode",77),n(d,"mode",b.Absolute),n(d,"base_cycles",5),n(d,"cycles_modifier",v),t.Absolute=d;class p extends gt{}n(p,"opcode",93),n(p,"mode",b.Absolute_X),n(p,"base_cycles",5),n(p,"cycles_modifier",v|fs),t.Absolute_X=p;class f extends gt{}n(f,"opcode",89),n(f,"mode",b.Absolute_Y),n(f,"base_cycles",5),n(f,"cycles_modifier",v|Xe),t.Absolute_Y=f;class h extends gt{}n(h,"opcode",79),n(h,"mode",b.AbsoluteLong),n(h,"base_cycles",6),n(h,"cycles_modifier",v),t.AbsoluteLong=h;class g extends gt{}n(g,"opcode",95),n(g,"mode",b.AbsoluteLong_X),n(g,"base_cycles",6),n(g,"cycles_modifier",v),t.AbsoluteLong_X=g;class m extends gt{}n(m,"opcode",67),n(m,"mode",b.StackRelative),n(m,"base_cycles",5),n(m,"cycles_modifier",v),t.StackRelative=m;class y extends gt{}n(y,"opcode",83),n(y,"mode",b.StackRelative_Indirect_Y),n(y,"base_cycles",8),n(y,"cycles_modifier",v),t.StackRelative_Indirect_Y=y})(De||(De={}));class Kt extends R{inc(e){if(this.p.flag_m){const s=x(e.byte+1);return this.p.flag_n=s.byte&P,this.p.flag_z=s.byte===0,s}else{const s=x(e.word+1);return this.p.flag_n=s.page&P,this.p.flag_z=s.word===0,s}}}n(Kt,"mnemonic","INC"),n(Kt,"affected_flags",P|K);class _a extends Kt{execute_effect(){const e=this.addr;this.save_m(e,this.inc(this.load_m(e)))}}(t=>{class e extends t{execute_effect(){this.p.a=this.inc(this.p.a)}}n(e,"opcode",26),n(e,"mode",b.Accumulator),n(e,"base_cycles",2),n(e,"baseLength",1),t.Accumulator=e;class s extends _a{}n(s,"opcode",230),n(s,"mode",b.DirectPage),n(s,"base_cycles",7),n(s,"cycles_modifier",Je|C),n(s,"baseLength",2),t.DirectPage=s;class i extends _a{}n(i,"opcode",246),n(i,"mode",b.DirectPage_X),n(i,"base_cycles",8),n(i,"cycles_modifier",Je|C),n(i,"baseLength",2),t.DirectPage_X=i;class a extends _a{}n(a,"opcode",238),n(a,"mode",b.Absolute),n(a,"base_cycles",8),n(a,"cycles_modifier",Je),n(a,"baseLength",3),t.Absolute=a;class r extends _a{}n(r,"opcode",254),n(r,"mode",b.Absolute_X),n(r,"base_cycles",9),n(r,"cycles_modifier",Je),n(r,"baseLength",3),t.Absolute_X=r})(Kt||(Kt={}));class Ws extends R{execute_effect(){if(this.p.flag_x){const e=x(this.p.x.byte+1);this.p.flag_n=e.byte&P,this.p.flag_z=e.byte===0,this.p.x=e}else{const e=x(this.p.x.word+1);this.p.flag_n=e.page&P,this.p.flag_z=e.word===0,this.p.x=e}}}n(Ws,"mnemonic","INX"),n(Ws,"opcode",232),n(Ws,"mode",b.Implied),n(Ws,"base_cycles",2),n(Ws,"baseLength",1),n(Ws,"affected_flags",P|K);class Us extends R{execute_effect(){if(this.p.flag_x){const e=x(this.p.y.byte+1);this.p.flag_n=e.byte&P,this.p.flag_z=e.byte===0,this.p.y=e}else{const e=x(this.p.y.word+1);this.p.flag_n=e.page&P,this.p.flag_z=e.word===0,this.p.y=e}}}n(Us,"mnemonic","INY"),n(Us,"opcode",200),n(Us,"mode",b.Implied),n(Us,"base_cycles",2),n(Us,"baseLength",1),n(Us,"affected_flags",P|K);class Os extends R{execute_effect(){this.p.pc=this.addr}}n(Os,"mnemonic","JMP");class vo extends R{execute_effect(){const e=this.addr;this.p.pb=q(e.bank),this.p.pc=e}}n(vo,"mnemonic","JML");(t=>{class e extends t{}n(e,"opcode",76),n(e,"mode",b.Absolute),n(e,"base_cycles",3),t.Absolute=e;class s extends t{}n(s,"opcode",108),n(s,"mode",b.Absolute_Indirect),n(s,"base_cycles",5),t.Absolute_Indirect=s;class i extends t{}n(i,"opcode",124),n(i,"mode",b.Absolute_X_Indirect),n(i,"base_cycles",6),t.Absolute_X_Indirect=i;class a extends vo{}n(a,"opcode",220),n(a,"mode",b.Absolute_IndirectLong),n(a,"base_cycles",6),t.Absolute_IndirectLong=a;class r extends vo{}n(r,"opcode",92),n(r,"mode",b.AbsoluteLong),n(r,"base_cycles",4),t.AbsoluteLong=r})(Os||(Os={}));class Fi extends R{execute_effect(){this.p.pc=x(this.p.pc.word-1),this.p.sp=x(this.p.sp.word-2),this.m.save_byte(x(this.p.sp.word+2),q(this.p.pc.page)),this.m.save_byte(x(this.p.sp.word+1),q(this.p.pc.byte)),this.p.pc=this.addr}}n(Fi,"mnemonic","JSR");class zd extends R{execute_effect(){this.p.pc=x(this.p.pc.word-1),this.p.sp=x(this.p.sp.word-3),this.m.save_byte(x(this.p.sp.word+3),q(this.p.pb.byte)),this.m.save_byte(x(this.p.sp.word+2),q(this.p.pc.page)),this.m.save_byte(x(this.p.sp.word+1),q(this.p.pc.byte));const e=this.addr;this.p.pb=q(e.bank),this.p.pc=e}}n(zd,"mnemonic","JSL");(t=>{class e extends t{}n(e,"opcode",32),n(e,"mode",b.Absolute),n(e,"base_cycles",6),t.Absolute=e;class s extends t{}n(s,"opcode",252),n(s,"mode",b.Absolute_X_Indirect),n(s,"base_cycles",8),t.Absolute_X_Indirect=s;class i extends zd{}n(i,"opcode",34),n(i,"mode",b.AbsoluteLong),n(i,"base_cycles",8),t.AbsoluteLong=i})(Fi||(Fi={}));class Ne extends R{lda(e){return this.p.flag_m?(this.p.flag_n=e.byte&P,this.p.flag_z=e.byte===0):(this.p.flag_n=e.page&P,this.p.flag_z=e.word===0),e}}n(Ne,"mnemonic","LDA"),n(Ne,"affected_flags",P|K);class bt extends Ne{execute_effect(){this.p.a=this.lda(this.load_m(this.addr))}}(t=>{class e extends t{execute_effect(){this.p.a=this.lda(this._arg)}}n(e,"opcode",169),n(e,"mode",b.Immediate_VariableA),n(e,"base_cycles",3),n(e,"cycles_modifier",v),t.Immediate_VariableA=e;class s extends bt{}n(s,"opcode",165),n(s,"mode",b.DirectPage),n(s,"base_cycles",4),n(s,"cycles_modifier",v|C),t.DirectPage=s;class i extends bt{}n(i,"opcode",181),n(i,"mode",b.DirectPage_X),n(i,"base_cycles",5),n(i,"cycles_modifier",v|C),t.DirectPage_X=i;class a extends bt{}n(a,"opcode",178),n(a,"mode",b.DirectPage_Indirect),n(a,"base_cycles",6),n(a,"cycles_modifier",v|C),t.DirectPage_Indirect=a;class r extends bt{}n(r,"opcode",161),n(r,"mode",b.DirectPage_X_Indirect),n(r,"base_cycles",7),n(r,"cycles_modifier",v|C),t.DirectPage_X_Indirect=r;class o extends bt{}n(o,"opcode",177),n(o,"mode",b.DirectPage_Indirect_Y),n(o,"base_cycles",6),n(o,"cycles_modifier",v|C|Xe),t.DirectPage_Indirect_Y=o;class l extends bt{}n(l,"opcode",167),n(l,"mode",b.DirectPage_IndirectLong),n(l,"base_cycles",7),n(l,"cycles_modifier",v|C),t.DirectPage_IndirectLong=l;class u extends bt{}n(u,"opcode",183),n(u,"mode",b.DirectPage_IndirectLong_Y),n(u,"base_cycles",7),n(u,"cycles_modifier",v|C),t.DirectPage_IndirectLong_Y=u;class d extends bt{}n(d,"opcode",173),n(d,"mode",b.Absolute),n(d,"base_cycles",5),n(d,"cycles_modifier",v),t.Absolute=d;class p extends bt{}n(p,"opcode",189),n(p,"mode",b.Absolute_X),n(p,"base_cycles",5),n(p,"cycles_modifier",v+fs),t.Absolute_X=p;class f extends bt{}n(f,"opcode",185),n(f,"mode",b.Absolute_Y),n(f,"base_cycles",5),n(f,"cycles_modifier",v+Xe),t.Absolute_Y=f;class h extends bt{}n(h,"opcode",175),n(h,"mode",b.AbsoluteLong),n(h,"base_cycles",6),n(h,"cycles_modifier",v),t.AbsoluteLong=h;class g extends bt{}n(g,"opcode",191),n(g,"mode",b.AbsoluteLong_X),n(g,"base_cycles",6),n(g,"cycles_modifier",v),t.AbsoluteLong_X=g;class m extends bt{}n(m,"opcode",163),n(m,"mode",b.StackRelative),n(m,"base_cycles",5),n(m,"cycles_modifier",v),t.StackRelative=m;class y extends bt{}n(y,"opcode",179),n(y,"mode",b.StackRelative_Indirect_Y),n(y,"base_cycles",8),n(y,"cycles_modifier",v),t.StackRelative_Indirect_Y=y})(Ne||(Ne={}));class Jt extends R{ldx(e){return this.p.flag_x?(this.p.flag_n=e.byte&P,this.p.flag_z=e.byte===0):(this.p.flag_n=e.page&P,this.p.flag_z=e.word===0),e}}n(Jt,"mnemonic","LDX"),n(Jt,"affected_flags",P|K);class ya extends Jt{execute_effect(){this.p.x=this.ldx(this.load_x(this.addr))}}(t=>{class e extends t{execute_effect(){this.p.x=this.ldx(this._arg)}}n(e,"opcode",162),n(e,"mode",b.Immediate_VariableX),n(e,"base_cycles",3),n(e,"cycles_modifier",ce),t.Immediate_VariableX=e;class s extends ya{}n(s,"opcode",166),n(s,"mode",b.DirectPage),n(s,"base_cycles",4),n(s,"cycles_modifier",ce|C),t.DirectPage=s;class i extends ya{}n(i,"opcode",182),n(i,"mode",b.DirectPage_Y),n(i,"base_cycles",5),n(i,"cycles_modifier",ce|C),t.DirectPage_Y=i;class a extends ya{}n(a,"opcode",174),n(a,"mode",b.Absolute),n(a,"base_cycles",5),n(a,"cycles_modifier",ce),t.Absolute=a;class r extends ya{}n(r,"opcode",190),n(r,"mode",b.Absolute_Y),n(r,"base_cycles",5),n(r,"cycles_modifier",ce+Xe),t.Absolute_Y=r})(Jt||(Jt={}));class es extends R{ldy(e){return this.p.flag_x?(this.p.flag_n=e.byte&P,this.p.flag_z=e.byte===0):(this.p.flag_n=e.page&P,this.p.flag_z=e.word===0),e}}n(es,"mnemonic","LDY"),n(es,"affected_flags",P|K);class va extends es{execute_effect(){this.p.y=this.ldy(this.load_x(this.addr))}}(t=>{class e extends t{execute_effect(){this.p.y=this.ldy(this._arg)}}n(e,"opcode",160),n(e,"mode",b.Immediate_VariableX),n(e,"base_cycles",3),n(e,"cycles_modifier",ce),t.Immediate_VariableX=e;class s extends va{}n(s,"opcode",164),n(s,"mode",b.DirectPage),n(s,"base_cycles",4),n(s,"cycles_modifier",ce|C),t.DirectPage=s;class i extends va{}n(i,"opcode",180),n(i,"mode",b.DirectPage_X),n(i,"base_cycles",5),n(i,"cycles_modifier",ce|C),t.DirectPage_X=i;class a extends va{}n(a,"opcode",172),n(a,"mode",b.Absolute),n(a,"base_cycles",5),n(a,"cycles_modifier",ce),t.Absolute=a;class r extends va{}n(r,"opcode",188),n(r,"mode",b.Absolute_X),n(r,"base_cycles",5),n(r,"cycles_modifier",ce+Xe),t.Absolute_X=r})(es||(es={}));class ts extends R{lsr(e){if(this.p.flag_m){const s=q(e.byte>>1);return this.p.flag_n=0,this.p.flag_z=s.byte===0,this.p.flag_c=e.byte&ve,s}else{const s=x(e.word>>1);return this.p.flag_n=0,this.p.flag_z=s.word===0,this.p.flag_c=e.byte&ve,s}}}n(ts,"mnemonic","LSR"),n(ts,"affected_flags",P|K|ve);class wa extends ts{execute_effect(){const e=this.addr;this.save_m(e,this.lsr(this.load_m(e)))}}(t=>{class e extends t{execute_effect(){this.p.a=this.lsr(this.p.a)}}n(e,"opcode",74),n(e,"mode",b.Accumulator),n(e,"base_cycles",2),t.Accumulator=e;class s extends wa{}n(s,"opcode",70),n(s,"mode",b.DirectPage),n(s,"base_cycles",6),n(s,"cycles_modifier",v|C),t.DirectPage=s;class i extends wa{}n(i,"opcode",86),n(i,"mode",b.DirectPage_X),n(i,"base_cycles",7),n(i,"cycles_modifier",v|C),t.DirectPage_X=i;class a extends wa{}n(a,"opcode",78),n(a,"mode",b.Absolute),n(a,"base_cycles",7),n(a,"cycles_modifier",v),t.Absolute=a;class r extends wa{}n(r,"opcode",94),n(r,"mode",b.Absolute_X),n(r,"base_cycles",8),n(r,"cycles_modifier",v),t.Absolute_X=r})(ts||(ts={}));class xi extends R{constructor(){super(...arguments);n(this,"_iterations",0)}get cycles(){return this._iterations*7}execute_effect(){const s=this._arg.byte,i=this._arg.page;for(this.p.db=q(i),this._iterations=0;this.p.c.word!==65535;){this._iterations++;const a=this.m.load_byte(T((s<<16)+this.p.x.word));this.m.save_byte(T((i<<16)+this.p.y.word),a),this.p.x=x(this.p.x.word+1),this.p.y=x(this.p.y.word+1),this.p.c=x(this.p.c.word-1)}}}n(xi,"mnemonic","MVN"),n(xi,"opcode",84),n(xi,"mode",b.BlockMove),n(xi,"base_cycles",0),n(xi,"cycles_modifier",Ko);class ki extends R{constructor(){super(...arguments);n(this,"_iterations",0)}get cycles(){return this._iterations*7}execute_effect(){const s=this._arg.byte,i=this._arg.page;for(this.p.db=q(i),this._iterations=0;this.p.c.word!==65535;){this._iterations++;const a=this.m.load_byte(T((s<<16)+this.p.x.word));this.m.save_byte(T((i<<16)+this.p.y.word),a),this.p.x=x(this.p.x.word-1),this.p.y=x(this.p.y.word-1),this.p.c=x(this.p.c.word-1)}}}n(ki,"mnemonic","MVP"),n(ki,"opcode",68),n(ki,"mode",b.BlockMove),n(ki,"base_cycles",0),n(ki,"cycles_modifier",Ko);class xn extends R{execute_effect(){}}n(xn,"mnemonic","NOP"),n(xn,"opcode",234),n(xn,"mode",b.Implied),n(xn,"base_cycles",2);class Le extends R{ora(e){if(this.p.flag_m){const s=q(e.byte|this.p.a.byte);return this.p.flag_n=s.byte&P,this.p.flag_z=s.byte===0,s}else{const s=x(e.word|this.p.a.word);return this.p.flag_n=s.page&P,this.p.flag_z=s.word===0,s}}}n(Le,"mnemonic","ORA"),n(Le,"affected_flags",P|K);class _t extends Le{execute_effect(){this.p.a=this.ora(this.load_m(this.addr))}}(t=>{class e extends t{execute_effect(){this.p.a=this.ora(this._arg)}}n(e,"opcode",9),n(e,"mode",b.Immediate_VariableA),n(e,"base_cycles",3),n(e,"cycles_modifier",v),t.Immediate_VariableA=e;class s extends _t{}n(s,"opcode",5),n(s,"mode",b.DirectPage),n(s,"base_cycles",4),n(s,"cycles_modifier",v|C),t.DirectPage=s;class i extends _t{}n(i,"opcode",21),n(i,"mode",b.DirectPage_X),n(i,"base_cycles",5),n(i,"cycles_modifier",v|C),t.DirectPage_X=i;class a extends _t{}n(a,"opcode",18),n(a,"mode",b.DirectPage_Indirect),n(a,"base_cycles",6),n(a,"cycles_modifier",v|C),t.DirectPage_Indirect=a;class r extends _t{}n(r,"opcode",1),n(r,"mode",b.DirectPage_X_Indirect),n(r,"base_cycles",7),n(r,"cycles_modifier",v|C),t.DirectPage_X_Indirect=r;class o extends _t{}n(o,"opcode",17),n(o,"mode",b.DirectPage_Indirect_Y),n(o,"base_cycles",6),n(o,"cycles_modifier",v|C|Xe),t.DirectPage_Indirect_Y=o;class l extends _t{}n(l,"opcode",7),n(l,"mode",b.DirectPage_IndirectLong),n(l,"base_cycles",7),n(l,"cycles_modifier",v|C),t.DirectPage_IndirectLong=l;class u extends _t{}n(u,"opcode",23),n(u,"mode",b.DirectPage_IndirectLong_Y),n(u,"base_cycles",7),n(u,"cycles_modifier",v|C),t.DirectPage_IndirectLong_Y=u;class d extends _t{}n(d,"opcode",13),n(d,"mode",b.Absolute),n(d,"base_cycles",5),n(d,"cycles_modifier",v),t.Absolute=d;class p extends _t{}n(p,"opcode",29),n(p,"mode",b.Absolute_X),n(p,"base_cycles",5),n(p,"cycles_modifier",v|fs),t.Absolute_X=p;class f extends _t{}n(f,"opcode",25),n(f,"mode",b.Absolute_Y),n(f,"base_cycles",5),n(f,"cycles_modifier",v|Xe),t.Absolute_Y=f;class h extends _t{}n(h,"opcode",15),n(h,"mode",b.AbsoluteLong),n(h,"base_cycles",6),n(h,"cycles_modifier",v),t.AbsoluteLong=h;class g extends _t{}n(g,"opcode",31),n(g,"mode",b.AbsoluteLong_X),n(g,"base_cycles",6),n(g,"cycles_modifier",v),t.AbsoluteLong_X=g;class m extends _t{}n(m,"opcode",3),n(m,"mode",b.StackRelative),n(m,"base_cycles",5),n(m,"cycles_modifier",v),t.StackRelative=m;class y extends _t{}n(y,"opcode",19),n(y,"mode",b.StackRelative_Indirect_Y),n(y,"base_cycles",8),n(y,"cycles_modifier",v),t.StackRelative_Indirect_Y=y})(Le||(Le={}));class kn extends R{execute_effect(){this.p.sp=x(this.p.sp.word-2),this.m.save_byte(x(this.p.sp.word+2),q(this._arg.page)),this.m.save_byte(x(this.p.sp.word+1),q(this._arg.byte))}}n(kn,"mnemonic","PEA"),n(kn,"opcode",244),n(kn,"mode",b.Absolute),n(kn,"base_cycles",5);class Si extends R{execute_effect(){this.p.sp=x(this.p.sp.word-2);const e=this.m.load_byte(T(this.addr.long+1));this.m.save_byte(x(this.p.sp.word+2),e);const s=this.m.load_byte(this.addr);this.m.save_byte(x(this.p.sp.word+1),s)}}n(Si,"mnemonic","PEI"),n(Si,"opcode",212),n(Si,"mode",b.DirectPage_Indirect),n(Si,"base_cycles",6),n(Si,"cycles_modifier",C);class Sn extends R{execute_effect(){this.p.sp=x(this.p.sp.word-2);const e=this.addr;this.m.save_byte(x(this.p.sp.word+2),q(e.page)),this.m.save_byte(x(this.p.sp.word+1),q(e.byte))}}n(Sn,"mnemonic","PER"),n(Sn,"opcode",98),n(Sn,"mode",b.OffsetLong),n(Sn,"base_cycles",6);class Bs extends R{push_byte(e){this.p.sp=x(this.p.sp.word-1),this.m.save_byte(x(this.p.sp.word+1),q(e))}push_word(e){this.p.sp=x(this.p.sp.word-2),this.m.save_word(x(this.p.sp.word+1),x(e))}}n(Bs,"mode",b.Implied);class Cn extends Bs{execute_effect(){this.p.flag_m?this.push_byte(this.p.a.byte):this.push_word(this.p.a.word)}}n(Cn,"mnemonic","PHA"),n(Cn,"opcode",72),n(Cn,"base_cycles",4),n(Cn,"cycles_modifier",v);class On extends Bs{execute_effect(){this.p.flag_x?this.push_byte(this.p.x.byte):this.push_word(this.p.x.word)}}n(On,"mnemonic","PHX"),n(On,"opcode",218),n(On,"base_cycles",4),n(On,"cycles_modifier",ce);class Pn extends Bs{execute_effect(){this.p.flag_x?this.push_byte(this.p.y.byte):this.push_word(this.p.y.word)}}n(Pn,"mnemonic","PHY"),n(Pn,"opcode",90),n(Pn,"base_cycles",4),n(Pn,"cycles_modifier",ce);class Ta extends Bs{execute_effect(){this.push_byte(this.p.db.byte)}}n(Ta,"mnemonic","PHB"),n(Ta,"opcode",139),n(Ta,"base_cycles",3);class Ea extends Bs{execute_effect(){this.push_word(this.p.dp.word)}}n(Ea,"mnemonic","PHD"),n(Ea,"opcode",11),n(Ea,"base_cycles",4);class Ra extends Bs{execute_effect(){this.push_byte(this.p.flags)}}n(Ra,"mnemonic","PHP"),n(Ra,"opcode",8),n(Ra,"base_cycles",3);class Da extends Bs{execute_effect(){this.push_byte(this.p.pb.byte)}}n(Da,"mnemonic","PHK"),n(Da,"opcode",75),n(Da,"base_cycles",3);class Ds extends R{pull_byte(){const e=this.m.load_byte(x(this.p.sp.word+1));return this.p.flag_n=e.byte&P,this.p.flag_z=e.byte===0,this.p.sp=x(this.p.sp.word+1),e}pull_word(){const e=this.m.load_word(x(this.p.sp.word+1));return this.p.flag_n=e.page&P,this.p.flag_z=e.word===0,this.p.sp=x(this.p.sp.word+2),e}}n(Ds,"mode",b.Implied),n(Ds,"affected_flags",P|K);class In extends Ds{execute_effect(){this.p.a=this.p.flag_m?this.pull_byte():this.pull_word()}}n(In,"mnemonic","PLA"),n(In,"opcode",104),n(In,"base_cycles",5),n(In,"cycles_modifier",v);class An extends Ds{execute_effect(){this.p.x=this.p.flag_x?this.pull_byte():this.pull_word()}}n(An,"mnemonic","PLX"),n(An,"opcode",250),n(An,"base_cycles",5),n(An,"cycles_modifier",ce);class Tn extends Ds{execute_effect(){this.p.y=this.p.flag_x?this.pull_byte():this.pull_word()}}n(Tn,"mnemonic","PLY"),n(Tn,"opcode",122),n(Tn,"base_cycles",5),n(Tn,"cycles_modifier",ce);class Na extends Ds{execute_effect(){this.p.db=this.pull_byte()}}n(Na,"mnemonic","PLB"),n(Na,"opcode",171),n(Na,"base_cycles",4);class La extends Ds{execute_effect(){this.p.dp=this.pull_word()}}n(La,"mnemonic","PLD"),n(La,"opcode",43),n(La,"base_cycles",6);class Ma extends Ds{execute_effect(){this.p.flags=this.pull_byte().byte}}n(Ma,"mnemonic","PLP"),n(Ma,"opcode",40),n(Ma,"base_cycles",4);class Zs extends R{execute_effect(){const e=this._arg.byte;this.p.flag_e?(e&P&&(this.p.flag_n=0),e&Ze&&(this.p.flag_v=0),e&Jo&&(this.p.flag_b=0),e&cs&&(this.p.flag_d=0),e&os&&(this.p.flag_i=0),e&K&&(this.p.flag_z=0),e&ve&&(this.p.flag_c=0),this.p.flag_m=1,this.p.flag_x=1):(e&P&&(this.p.flag_n=0),e&Ze&&(this.p.flag_v=0),e&Gi&&(this.p.flag_m=0),e&Hi&&(this.p.flag_x=0),e&cs&&(this.p.flag_d=0),e&os&&(this.p.flag_i=0),e&K&&(this.p.flag_z=0),e&ve&&(this.p.flag_c=0))}}n(Zs,"mnemonic","REP"),n(Zs,"opcode",194),n(Zs,"mode",b.Immediate),n(Zs,"base_cycles",3),n(Zs,"baseLength",2),n(Zs,"affected_flags",P|Ze|Gi|Hi|cs|os|K|ve);class ss extends R{rol(e){if(this.p.flag_m){const s=q((e.byte<<1)+this.p.flag_c);return this.p.flag_n=s.byte&P,this.p.flag_z=s.byte===0,this.p.flag_c=e.byte&P,s}else{const s=x((e.word<<1)+this.p.flag_c);return this.p.flag_n=s.page&P,this.p.flag_z=s.word===0,this.p.flag_c=e.page&P,s}}}n(ss,"mnemonic","ROL"),n(ss,"affected_flags",P|K|ve);class xa extends ss{execute_effect(){const e=this.addr;this.save_m(e,this.rol(this.load_m(e)))}}(t=>{class e extends t{execute_effect(){this.p.a=this.rol(this.p.a)}}n(e,"opcode",42),n(e,"mode",b.Accumulator),n(e,"base_cycles",2),t.Accumulator=e;class s extends xa{}n(s,"opcode",38),n(s,"mode",b.DirectPage),n(s,"base_cycles",6),n(s,"cycles_modifier",v|C),t.DirectPage=s;class i extends xa{}n(i,"opcode",54),n(i,"mode",b.DirectPage_X),n(i,"base_cycles",7),n(i,"cycles_modifier",v|C),t.DirectPage_X=i;class a extends xa{}n(a,"opcode",46),n(a,"mode",b.Absolute),n(a,"base_cycles",7),n(a,"cycles_modifier",v),t.Absolute=a;class r extends xa{}n(r,"opcode",62),n(r,"mode",b.Absolute_X),n(r,"base_cycles",8),n(r,"cycles_modifier",v),t.Absolute_X=r})(ss||(ss={}));class is extends R{ror(e){if(this.p.flag_m){const s=q(e.byte>>1|this.p.flag_c<<7);return this.p.flag_n=0,this.p.flag_z=s.byte===0,this.p.flag_c=e.byte&ve,s}else{const s=x(e.word>>1|this.p.flag_c<<15);return this.p.flag_n=0,this.p.flag_z=s.word===0,this.p.flag_c=e.byte&ve,s}}}n(is,"mnemonic","ROR"),n(is,"affected_flags",P|K|ve);class ka extends is{execute_effect(){const e=this.addr;this.save_m(e,this.ror(this.load_m(e)))}}(t=>{class e extends t{execute_effect(){this.p.a=this.ror(this.p.a)}}n(e,"opcode",106),n(e,"mode",b.Accumulator),n(e,"base_cycles",2),t.Accumulator=e;class s extends ka{}n(s,"opcode",102),n(s,"mode",b.DirectPage),n(s,"base_cycles",6),n(s,"cycles_modifier",v|C),t.DirectPage=s;class i extends ka{}n(i,"opcode",118),n(i,"mode",b.DirectPage_X),n(i,"base_cycles",7),n(i,"cycles_modifier",v|C),t.DirectPage_X=i;class a extends ka{}n(a,"opcode",110),n(a,"mode",b.Absolute),n(a,"base_cycles",7),n(a,"cycles_modifier",v),t.Absolute=a;class r extends ka{}n(r,"opcode",126),n(r,"mode",b.Absolute_X),n(r,"base_cycles",8),n(r,"cycles_modifier",v),t.Absolute_X=r})(is||(is={}));class Ci extends R{execute_effect(){throw new Error("RTI: Unsupported instruction.")}}n(Ci,"mnemonic","RTI"),n(Ci,"opcode",64),n(Ci,"mode",b.Implied),n(Ci,"base_cycles",7),n(Ci,"cycles_modifier",Er);class En extends R{execute_effect(){const e=this.m.load_byte(x(this.p.sp.word+1)).byte,s=this.m.load_byte(x(this.p.sp.word+2)).byte;this.p.pc=x(s<<8|e),this.p.pb=this.m.load_byte(x(this.p.sp.word+3)),this.p.sp=x(this.p.sp.word+3),this.p.pc=x(this.p.pc.word+1)}}n(En,"mnemonic","RTL"),n(En,"opcode",107),n(En,"mode",b.Implied),n(En,"base_cycles",6);class Rn extends R{execute_effect(){const e=this.m.load_byte(x(this.p.sp.word+1)).byte,s=this.m.load_byte(x(this.p.sp.word+2)).byte;this.p.pc=x(s<<8|e),this.p.sp=x(this.p.sp.word+2),this.p.pc=x(this.p.pc.word+1)}}n(Rn,"mnemonic","RTS"),n(Rn,"opcode",96),n(Rn,"mode",b.Implied),n(Rn,"base_cycles",6);function Ec(t,e,s,i){let a=0;s=1-s;for(let r=0;r<i;++r){const o=t>>r*4&15,l=e>>r*4&15,u=o-l-s;s=u<0?Math.floor(Math.abs(u)/10)+1:-Math.floor(u/10),a|=Ha(u,10)<<r*4}return a}class Me extends R{sbc(e){if(this.p.flag_m){const s=this.p.flag_d?Ec(this.p.a.byte,e.byte,this.p.flag_c,2):this.p.a.byte+~e.byte+this.p.flag_c,i=q(s);return this.p.flag_n=i.byte&P,this.p.flag_v=i.byte&Ze,this.p.flag_z=i.byte===0,this.p.flag_c=s<0?0:1,i}else{const s=this.p.flag_d?Ec(this.p.a.word,e.word,this.p.flag_c,4):this.p.a.word+~e.word+this.p.flag_c,i=x(s);return this.p.flag_n=i.page&P,this.p.flag_v=i.page&Ze,this.p.flag_z=i.word===0,this.p.flag_c=s<0?0:1,i}}}n(Me,"mnemonic","SBC"),n(Me,"affected_flags",P|Ze|K|ve);class yt extends Me{execute_effect(){const e=this.load_m(this.addr);this.p.a=this.sbc(e)}}(t=>{class e extends t{execute_effect(){this.p.a=this.sbc(this._arg)}}n(e,"opcode",233),n(e,"mode",b.Immediate_VariableA),n(e,"base_cycles",3),n(e,"cycles_modifier",v),t.Immediate_VariableA=e;class s extends yt{}n(s,"opcode",229),n(s,"mode",b.DirectPage),n(s,"base_cycles",4),n(s,"cycles_modifier",v|C),t.DirectPage=s;class i extends yt{}n(i,"opcode",245),n(i,"mode",b.DirectPage_X),n(i,"base_cycles",5),n(i,"cycles_modifier",v|C),t.DirectPage_X=i;class a extends yt{}n(a,"opcode",242),n(a,"mode",b.DirectPage_Indirect),n(a,"base_cycles",6),n(a,"cycles_modifier",v|C),t.DirectPage_Indirect=a;class r extends yt{}n(r,"opcode",225),n(r,"mode",b.DirectPage_X_Indirect),n(r,"base_cycles",7),n(r,"cycles_modifier",v|C),t.DirectPage_X_Indirect=r;class o extends yt{}n(o,"opcode",241),n(o,"mode",b.DirectPage_Indirect_Y),n(o,"base_cycles",6),n(o,"cycles_modifier",v|C|Xe),t.DirectPage_Indirect_Y=o;class l extends yt{}n(l,"opcode",231),n(l,"mode",b.DirectPage_IndirectLong),n(l,"base_cycles",7),n(l,"cycles_modifier",v|C),t.DirectPage_IndirectLong=l;class u extends yt{}n(u,"opcode",247),n(u,"mode",b.DirectPage_IndirectLong_Y),n(u,"base_cycles",7),n(u,"cycles_modifier",v|C),t.DirectPage_IndirectLong_Y=u;class d extends yt{}n(d,"opcode",237),n(d,"mode",b.Absolute),n(d,"base_cycles",5),n(d,"cycles_modifier",v),t.Absolute=d;class p extends yt{}n(p,"opcode",253),n(p,"mode",b.Absolute_X),n(p,"base_cycles",5),n(p,"cycles_modifier",v|fs),t.Absolute_X=p;class f extends yt{}n(f,"opcode",249),n(f,"mode",b.Absolute_Y),n(f,"base_cycles",5),n(f,"cycles_modifier",v|Xe),t.Absolute_Y=f;class h extends yt{}n(h,"opcode",239),n(h,"mode",b.AbsoluteLong),n(h,"base_cycles",6),n(h,"cycles_modifier",v),t.AbsoluteLong=h;class g extends yt{}n(g,"opcode",255),n(g,"mode",b.AbsoluteLong_X),n(g,"base_cycles",6),n(g,"cycles_modifier",v),t.AbsoluteLong_X=g;class m extends yt{}n(m,"opcode",227),n(m,"mode",b.StackRelative),n(m,"base_cycles",5),n(m,"cycles_modifier",v),t.StackRelative=m;class y extends yt{}n(y,"opcode",243),n(y,"mode",b.StackRelative_Indirect_Y),n(y,"base_cycles",8),n(y,"cycles_modifier",v),t.StackRelative_Indirect_Y=y})(Me||(Me={}));class Oi extends R{execute_effect(){this.p.flag_c=1}}n(Oi,"mnemonic","SEC"),n(Oi,"opcode",56),n(Oi,"mode",b.Implied),n(Oi,"base_cycles",2),n(Oi,"affected_flags",ve);class Pi extends R{execute_effect(){this.p.flag_d=1}}n(Pi,"mnemonic","SED"),n(Pi,"opcode",248),n(Pi,"mode",b.Implied),n(Pi,"base_cycles",2),n(Pi,"affected_flags",cs);class Ii extends R{execute_effect(){this.p.flag_i=1}}n(Ii,"mnemonic","SEI"),n(Ii,"opcode",120),n(Ii,"mode",b.Implied),n(Ii,"base_cycles",2),n(Ii,"affected_flags",os);class Xs extends R{execute_effect(){const e=this._arg.byte;this.p.flag_e?(e&P&&(this.p.flag_n=1),e&Ze&&(this.p.flag_v=1),e&Jo&&(this.p.flag_b=1),e&cs&&(this.p.flag_d=1),e&os&&(this.p.flag_i=1),e&K&&(this.p.flag_z=1),e&ve&&(this.p.flag_c=1)):(e&P&&(this.p.flag_n=1),e&Ze&&(this.p.flag_v=1),e&Gi&&(this.p.flag_m=1),e&Hi&&(this.p.flag_x=1),e&cs&&(this.p.flag_d=1),e&os&&(this.p.flag_i=1),e&K&&(this.p.flag_z=1),e&ve&&(this.p.flag_c=1))}}n(Xs,"mnemonic","SEP"),n(Xs,"opcode",226),n(Xs,"mode",b.Immediate),n(Xs,"base_cycles",3),n(Xs,"baseLength",2),n(Xs,"affected_flags",P|Ze|Gi|Hi|cs|os|K|ve);class qe extends R{execute_effect(){this.save_m(this.addr,this.p.a)}}n(qe,"mnemonic","STA");(t=>{class e extends t{}n(e,"opcode",133),n(e,"mode",b.DirectPage),n(e,"base_cycles",4),n(e,"cycles_modifier",v|C),t.DirectPage=e;class s extends t{}n(s,"opcode",149),n(s,"mode",b.DirectPage_X),n(s,"base_cycles",5),n(s,"cycles_modifier",v|C),t.DirectPage_X=s;class i extends t{}n(i,"opcode",146),n(i,"mode",b.DirectPage_Indirect),n(i,"base_cycles",6),n(i,"cycles_modifier",v|C),t.DirectPage_Indirect=i;class a extends t{}n(a,"opcode",129),n(a,"mode",b.DirectPage_X_Indirect),n(a,"base_cycles",7),n(a,"cycles_modifier",v|C),t.DirectPage_X_Indirect=a;class r extends t{}n(r,"opcode",145),n(r,"mode",b.DirectPage_Indirect_Y),n(r,"base_cycles",7),n(r,"cycles_modifier",v|C),t.DirectPage_Indirect_Y=r;class o extends t{}n(o,"opcode",135),n(o,"mode",b.DirectPage_IndirectLong),n(o,"base_cycles",7),n(o,"cycles_modifier",v|C),t.DirectPage_IndirectLong=o;class l extends t{}n(l,"opcode",151),n(l,"mode",b.DirectPage_IndirectLong_Y),n(l,"base_cycles",7),n(l,"cycles_modifier",v|C),t.DirectPage_IndirectLong_Y=l;class u extends t{}n(u,"opcode",141),n(u,"mode",b.Absolute),n(u,"base_cycles",5),n(u,"cycles_modifier",v),t.Absolute=u;class d extends t{}n(d,"opcode",157),n(d,"mode",b.Absolute_X),n(d,"base_cycles",6),n(d,"cycles_modifier",v),t.Absolute_X=d;class p extends t{}n(p,"opcode",153),n(p,"mode",b.Absolute_Y),n(p,"base_cycles",6),n(p,"cycles_modifier",v),t.Absolute_Y=p;class f extends t{}n(f,"opcode",143),n(f,"mode",b.AbsoluteLong),n(f,"base_cycles",6),n(f,"cycles_modifier",v),t.AbsoluteLong=f;class h extends t{}n(h,"opcode",159),n(h,"mode",b.AbsoluteLong_X),n(h,"base_cycles",6),n(h,"cycles_modifier",v),t.AbsoluteLong_X=h;class g extends t{}n(g,"opcode",131),n(g,"mode",b.StackRelative),n(g,"base_cycles",5),n(g,"cycles_modifier",v),t.StackRelative=g;class m extends t{}n(m,"opcode",147),n(m,"mode",b.StackRelative_Indirect_Y),n(m,"base_cycles",8),n(m,"cycles_modifier",v),t.StackRelative_Indirect_Y=m})(qe||(qe={}));class Dn extends R{execute_effect(){throw new Error("STP: Unsupported instruction.")}}n(Dn,"mnemonic","STP"),n(Dn,"opcode",219),n(Dn,"mode",b.Implied),n(Dn,"base_cycles",3);class zi extends R{execute_effect(){this.save_x(this.addr,this.p.x)}}n(zi,"mnemonic","STX");(t=>{class e extends t{}n(e,"opcode",134),n(e,"mode",b.DirectPage),n(e,"base_cycles",4),n(e,"cycles_modifier",ce|C),t.DirectPage=e;class s extends t{}n(s,"opcode",150),n(s,"mode",b.DirectPage_Y),n(s,"base_cycles",5),n(s,"cycles_modifier",ce|C),t.DirectPage_Y=s;class i extends t{}n(i,"opcode",142),n(i,"mode",b.Absolute),n(i,"base_cycles",5),n(i,"cycles_modifier",ce),t.Absolute=i})(zi||(zi={}));class Qi extends R{execute_effect(){this.save_x(this.addr,this.p.y)}}n(Qi,"mnemonic","STY");(t=>{class e extends t{}n(e,"opcode",132),n(e,"mode",b.DirectPage),n(e,"base_cycles",4),n(e,"cycles_modifier",ce|C),t.DirectPage=e;class s extends t{}n(s,"opcode",148),n(s,"mode",b.DirectPage_X),n(s,"base_cycles",5),n(s,"cycles_modifier",ce|C),t.DirectPage_X=s;class i extends t{}n(i,"opcode",140),n(i,"mode",b.Absolute),n(i,"base_cycles",5),n(i,"cycles_modifier",ce),t.Absolute=i})(Qi||(Qi={}));class Gs extends R{execute_effect(){this.save_m(this.addr,x(0))}}n(Gs,"mnemonic","STZ");(t=>{class e extends t{}n(e,"opcode",100),n(e,"mode",b.DirectPage),n(e,"base_cycles",4),n(e,"cycles_modifier",v|C),t.DirectPage=e;class s extends t{}n(s,"opcode",116),n(s,"mode",b.DirectPage_X),n(s,"base_cycles",5),n(s,"cycles_modifier",v|C),t.DirectPage_X=s;class i extends t{}n(i,"opcode",156),n(i,"mode",b.Absolute),n(i,"base_cycles",5),n(i,"cycles_modifier",v),t.Absolute=i;class a extends t{}n(a,"opcode",158),n(a,"mode",b.Absolute_X),n(a,"base_cycles",6),n(a,"cycles_modifier",v),t.Absolute_X=a})(Gs||(Gs={}));class kt extends R{transfer_byte(e){return this.p.flag_n=e.byte&P,this.p.flag_z=e.byte===0,e}transfer_word(e){return this.p.flag_n=e.page&P,this.p.flag_z=e.word===0,e}transfer(e,s){return s?this.transfer_byte(e):this.transfer_word(e)}}n(kt,"mode",b.Implied),n(kt,"affected_flags",P|K);class Ba extends kt{execute_effect(){this.p.x=this.transfer(this.p.c,this.p.flag_x)}}n(Ba,"mnemonic","TAX"),n(Ba,"opcode",170),n(Ba,"base_cycles",2);class $a extends kt{execute_effect(){this.p.y=this.transfer(this.p.c,this.p.flag_x)}}n($a,"mnemonic","TAY"),n($a,"opcode",168),n($a,"base_cycles",2);class Va extends kt{execute_effect(){this.p.dp=this.transfer_word(this.p.c)}}n(Va,"mnemonic","TCD"),n(Va,"opcode",91),n(Va,"base_cycles",2);class Fa extends kt{execute_effect(){this.p.sp=this.transfer(this.p.c,this.p.flag_e)}}n(Fa,"mnemonic","TCS"),n(Fa,"opcode",27),n(Fa,"base_cycles",2);class za extends kt{execute_effect(){this.p.c=this.transfer_word(this.p.dp)}}n(za,"mnemonic","TDC"),n(za,"opcode",123),n(za,"base_cycles",2);class Qa extends kt{execute_effect(){this.p.c=this.transfer_word(this.p.sp)}}n(Qa,"mnemonic","TSC"),n(Qa,"opcode",59),n(Qa,"base_cycles",2);class Wa extends kt{execute_effect(){this.p.x=this.transfer(this.p.sp,this.p.flag_x)}}n(Wa,"mnemonic","TSX"),n(Wa,"opcode",186),n(Wa,"base_cycles",2);class Ua extends kt{execute_effect(){this.p.a=this.transfer(this.p.x,this.p.flag_m)}}n(Ua,"mnemonic","TXA"),n(Ua,"opcode",138),n(Ua,"base_cycles",2);class Za extends kt{execute_effect(){this.p.sp=this.transfer(this.p.x,this.p.flag_e)}}n(Za,"mnemonic","TXS"),n(Za,"opcode",154),n(Za,"base_cycles",2);class Xa extends kt{execute_effect(){this.p.y=this.transfer(this.p.x,this.p.flag_x)}}n(Xa,"mnemonic","TXY"),n(Xa,"opcode",155),n(Xa,"base_cycles",2);class Ya extends kt{execute_effect(){this.p.a=this.transfer(this.p.y,this.p.flag_m)}}n(Ya,"mnemonic","TYA"),n(Ya,"opcode",152),n(Ya,"base_cycles",2);class ja extends kt{execute_effect(){this.p.x=this.transfer(this.p.y,this.p.flag_x)}}n(ja,"mnemonic","TYX"),n(ja,"opcode",187),n(ja,"base_cycles",2);class qi extends R{execute_effect(){const e=this.addr;if(this.p.flag_m){const s=this.m.load_byte(e),i=s.byte&~this.p.a.byte;this.p.flag_z=(s.byte&this.p.a.byte)===0,this.m.save_byte(e,q(i))}else{const s=this.m.load_word(e),i=s.word&~this.p.a.word;this.p.flag_z=(s.word&this.p.a.word)===0,this.m.save_word(e,x(i))}}}n(qi,"mnemonic","TRB"),n(qi,"affected_flags",K);(t=>{class e extends t{}n(e,"opcode",20),n(e,"mode",b.DirectPage),n(e,"base_cycles",7),n(e,"cycles_modifier",Je|C),t.DirectPage=e;class s extends t{}n(s,"opcode",28),n(s,"mode",b.Absolute),n(s,"base_cycles",8),n(s,"cycles_modifier",Je),t.Absolute=s})(qi||(qi={}));class Ki extends R{execute_effect(){const e=this.addr;if(this.p.flag_m){const s=this.m.load_byte(e),i=s.byte|this.p.a.byte;this.p.flag_z=(s.byte&this.p.a.byte)===0,this.m.save_byte(e,q(i))}else{const s=this.m.load_word(e),i=s.word|this.p.a.word;this.p.flag_z=(s.word&this.p.a.word)===0,this.m.save_word(e,x(i))}}}n(Ki,"mnemonic","TSB"),n(Ki,"affected_flags",K);(t=>{class e extends t{}n(e,"opcode",4),n(e,"mode",b.DirectPage),n(e,"base_cycles",7),n(e,"cycles_modifier",Je|C),t.DirectPage=e;class s extends t{}n(s,"opcode",12),n(s,"mode",b.Absolute),n(s,"base_cycles",8),n(s,"cycles_modifier",Je),t.Absolute=s})(Ki||(Ki={}));class Ai extends R{execute_effect(){throw new Error("WAI: Unsupported instruction.")}}n(Ai,"mnemonic","WAI"),n(Ai,"opcode",203),n(Ai,"mode",b.Implied),n(Ai,"base_cycles",3),n(Ai,"cycles_modifier",Fd);class Nn extends R{execute_effect(){}}n(Nn,"mnemonic","WDM"),n(Nn,"opcode",66),n(Nn,"mode",b.Immediate),n(Nn,"base_cycles",2);class Ti extends R{execute_effect(){const e=this.p.c.byte,s=this.p.c.page;this.p.c=x(e<<8|s),this.p.flag_n=s&P,this.p.flag_z=s===0}}n(Ti,"mnemonic","XBA"),n(Ti,"opcode",235),n(Ti,"mode",b.Implied),n(Ti,"base_cycles",3),n(Ti,"affected_flags",P|K);class Ei extends R{execute_effect(){const e=this.p.flag_c,s=this.p.flag_e;this.p.flag_c=s,this.p.flag_e=e}}n(Ei,"mnemonic","XCE"),n(Ei,"opcode",251),n(Ei,"mode",b.Implied),n(Ei,"base_cycles",2),n(Ei,"affected_flags",Gi|Hi|ve);const Qd={105:Ee.Immediate_VariableA,101:Ee.DirectPage,117:Ee.DirectPage_X,114:Ee.DirectPage_Indirect,97:Ee.DirectPage_X_Indirect,113:Ee.DirectPage_Indirect_Y,103:Ee.DirectPage_IndirectLong,119:Ee.DirectPage_IndirectLong_Y,109:Ee.Absolute,125:Ee.Absolute_X,121:Ee.Absolute_Y,111:Ee.AbsoluteLong,127:Ee.AbsoluteLong_X,99:Ee.StackRelative,115:Ee.StackRelative_Indirect_Y,41:Re.Immediate_VariableA,37:Re.DirectPage,53:Re.DirectPage_X,50:Re.DirectPage_Indirect,33:Re.DirectPage_X_Indirect,49:Re.DirectPage_Indirect_Y,39:Re.DirectPage_IndirectLong,55:Re.DirectPage_IndirectLong_Y,45:Re.Absolute,61:Re.Absolute_X,57:Re.Absolute_Y,47:Re.AbsoluteLong,63:Re.AbsoluteLong_X,35:Re.StackRelative,51:Re.StackRelative_Indirect_Y,10:Gt.Accumulator,6:Gt.DirectPage,22:Gt.DirectPage_X,14:Gt.Absolute,30:Gt.Absolute_X,144:ho,176:po,208:fo,240:mo,16:go,48:bo,80:_o,112:yo,128:yn,130:vn,137:_s.Immediate_VariableA,36:_s.DirectPage,52:_s.DirectPage_X,44:_s.Absolute,60:_s.Absolute_X,0:mi,2:yi,24:gi,88:_i,216:bi,184:Qs,201:ze.Immediate_VariableA,197:ze.DirectPage,213:ze.DirectPage_X,210:ze.DirectPage_Indirect,193:ze.DirectPage_X_Indirect,209:ze.DirectPage_Indirect_Y,199:ze.DirectPage_IndirectLong,215:ze.DirectPage_IndirectLong_Y,205:ze.Absolute,221:ze.Absolute_X,217:ze.Absolute_Y,207:ze.AbsoluteLong,223:ze.AbsoluteLong_X,195:ze.StackRelative,211:ze.StackRelative_Indirect_Y,224:Js.Immediate_VariableX,228:Js.DirectPage,236:Js.Absolute,192:ei.Immediate_VariableX,196:ei.DirectPage,204:ei.Absolute,58:qt.Accumulator,198:qt.DirectPage,214:qt.DirectPage_X,206:qt.Absolute,222:qt.Absolute_X,202:vi,136:wi,73:De.Immediate_VariableA,69:De.DirectPage,85:De.DirectPage_X,82:De.DirectPage_Indirect,65:De.DirectPage_X_Indirect,81:De.DirectPage_Indirect_Y,71:De.DirectPage_IndirectLong,87:De.DirectPage_IndirectLong_Y,77:De.Absolute,93:De.Absolute_X,89:De.Absolute_Y,79:De.AbsoluteLong,95:De.AbsoluteLong_X,67:De.StackRelative,83:De.StackRelative_Indirect_Y,26:Kt.Accumulator,230:Kt.DirectPage,246:Kt.DirectPage_X,238:Kt.Absolute,254:Kt.Absolute_X,232:Ws,200:Us,76:Os.Absolute,108:Os.Absolute_Indirect,124:Os.Absolute_X_Indirect,220:Os.Absolute_IndirectLong,92:Os.AbsoluteLong,32:Fi.Absolute,252:Fi.Absolute_X_Indirect,34:Fi.AbsoluteLong,169:Ne.Immediate_VariableA,165:Ne.DirectPage,181:Ne.DirectPage_X,178:Ne.DirectPage_Indirect,161:Ne.DirectPage_X_Indirect,177:Ne.DirectPage_Indirect_Y,167:Ne.DirectPage_IndirectLong,183:Ne.DirectPage_IndirectLong_Y,173:Ne.Absolute,189:Ne.Absolute_X,185:Ne.Absolute_Y,175:Ne.AbsoluteLong,191:Ne.AbsoluteLong_X,163:Ne.StackRelative,179:Ne.StackRelative_Indirect_Y,162:Jt.Immediate_VariableX,166:Jt.DirectPage,182:Jt.DirectPage_Y,174:Jt.Absolute,190:Jt.Absolute_Y,160:es.Immediate_VariableX,164:es.DirectPage,180:es.DirectPage_X,172:es.Absolute,188:es.Absolute_X,74:ts.Accumulator,70:ts.DirectPage,86:ts.DirectPage_X,78:ts.Absolute,94:ts.Absolute_X,84:xi,68:ki,234:xn,9:Le.Immediate_VariableA,5:Le.DirectPage,21:Le.DirectPage_X,18:Le.DirectPage_Indirect,1:Le.DirectPage_X_Indirect,17:Le.DirectPage_Indirect_Y,7:Le.DirectPage_IndirectLong,23:Le.DirectPage_IndirectLong_Y,13:Le.Absolute,29:Le.Absolute_X,25:Le.Absolute_Y,15:Le.AbsoluteLong,31:Le.AbsoluteLong_X,3:Le.StackRelative,19:Le.StackRelative_Indirect_Y,244:kn,212:Si,98:Sn,72:Cn,218:On,90:Pn,139:Ta,11:Ea,75:Da,8:Ra,104:In,250:An,122:Tn,171:Na,43:La,40:Ma,194:Zs,226:Xs,42:ss.Accumulator,38:ss.DirectPage,54:ss.DirectPage_X,46:ss.Absolute,62:ss.Absolute_X,106:is.Accumulator,102:is.DirectPage,118:is.DirectPage_X,110:is.Absolute,126:is.Absolute_X,96:Rn,107:En,64:Ci,233:Me.Immediate_VariableA,229:Me.DirectPage,245:Me.DirectPage_X,242:Me.DirectPage_Indirect,225:Me.DirectPage_X_Indirect,241:Me.DirectPage_Indirect_Y,231:Me.DirectPage_IndirectLong,247:Me.DirectPage_IndirectLong_Y,237:Me.Absolute,253:Me.Absolute_X,249:Me.Absolute_Y,239:Me.AbsoluteLong,255:Me.AbsoluteLong_X,227:Me.StackRelative,243:Me.StackRelative_Indirect_Y,56:Oi,120:Ii,248:Pi,133:qe.DirectPage,149:qe.DirectPage_X,146:qe.DirectPage_Indirect,129:qe.DirectPage_X_Indirect,145:qe.DirectPage_Indirect_Y,135:qe.DirectPage_IndirectLong,151:qe.DirectPage_IndirectLong_Y,141:qe.Absolute,157:qe.Absolute_X,153:qe.Absolute_Y,143:qe.AbsoluteLong,159:qe.AbsoluteLong_X,131:qe.StackRelative,147:qe.StackRelative_Indirect_Y,219:Dn,134:zi.DirectPage,150:zi.DirectPage_Y,142:zi.Absolute,132:Qi.DirectPage,148:Qi.DirectPage_X,140:Qi.Absolute,100:Gs.DirectPage,116:Gs.DirectPage_X,156:Gs.Absolute,158:Gs.Absolute_X,170:Ba,168:$a,91:Va,27:Fa,123:za,59:Qa,186:Wa,138:Ua,154:Za,155:Xa,152:Ya,187:ja,20:qi.DirectPage,28:qi.Absolute,4:Ki.DirectPage,12:Ki.Absolute,203:Ai,66:Nn,235:Ti,251:Ei};class Yg{constructor(){n(this,"_a",new Bt(0));n(this,"_x",new Bt(0));n(this,"_y",new Bt(0));n(this,"_db",new Bt(0));n(this,"_dp",new Bt(0));n(this,"_sp",new Bt(0));n(this,"_pb",new Bt(0));n(this,"_pc",new Bt(0));n(this,"_flag_n",0);n(this,"_flag_v",0);n(this,"_flag_m",1);n(this,"_flag_x",1);n(this,"_flag_d",0);n(this,"_flag_i",0);n(this,"_flag_z",0);n(this,"_flag_c",0);n(this,"_flag_e",0);n(this,"_flag_b",0)}get a(){return this._flag_m?this._a.as_byte():this._a.as_word()}set a(e){this._flag_m?this._a.byte=e.byte:this._a.word=e.word}get c(){return this._a.as_word()}set c(e){this._a.word=e.word}get x(){return this._flag_x?this._x.as_byte():this._x.as_word()}set x(e){this._flag_x?this._x.byte=e.byte:this._x.word=e.word}get y(){return this._flag_x?this._y.as_byte():this._y.as_word()}set y(e){this._flag_x?this._y.byte=e.byte:this._y.word=e.word}get db(){return this._db}set db(e){this._db.byte=e.byte}get dp(){return this._dp}set dp(e){this._flag_e||(this._dp.word=e.word)}get sp(){return this._sp}set sp(e){this._flag_e?this._sp.byte=e.byte:this._sp.word=e.word}get pb(){return this._pb}set pb(e){this._pb.byte=e.byte}get pc(){return this._pc}set pc(e){this._pc.word=e.word}get flag_n(){return this._flag_n}set flag_n(e){this._flag_n=e?1:0}get flag_v(){return this._flag_v}set flag_v(e){this._flag_v=e?1:0}get flag_m(){return this._flag_m}set flag_m(e){e||this.flag_e?this._flag_m=1:this._flag_m=0}get flag_x(){return this._flag_x}set flag_x(e){e||this.flag_e?(this._flag_x=1,this._x.page=0,this._y.page=0):this._flag_x=0}get flag_d(){return this._flag_d}set flag_d(e){this._flag_d=e?1:0}get flag_i(){return this._flag_i}set flag_i(e){this._flag_i=e?1:0}get flag_z(){return this._flag_z}set flag_z(e){this._flag_z=e?1:0}get flag_c(){return this._flag_c}set flag_c(e){this._flag_c=e?1:0}get flag_e(){return this._flag_e}set flag_e(e){e?(this._flag_e=1,this.flag_m=1,this.flag_x=1,this._sp.page=1):this._flag_e=0}get flag_b(){return this._flag_b}set flag_b(e){this._flag_b=e?1:0}get flags(){return this._flag_e?this.flag_c|this.flag_z<<1|this.flag_i<<2|this.flag_d<<3|this.flag_b<<4|this.flag_v<<6|this.flag_n<<7:this.flag_c|this.flag_z<<1|this.flag_i<<2|this.flag_d<<3|this.flag_x<<4|this.flag_m<<5|this.flag_v<<6|this.flag_n<<7}set flags(e){this.flag_e?(this.flag_c=e&ve,this.flag_z=e&K,this.flag_i=e&os,this.flag_d=e&cs,this.flag_b=e&Jo,this.flag_v=e&Ze,this.flag_n=e&P):(this.flag_c=e&ve,this.flag_z=e&K,this.flag_i=e&os,this.flag_d=e&cs,this.flag_x=e&Hi,this.flag_m=e&Gi,this.flag_v=e&Ze,this.flag_n=e&P)}reset(e){this.flag_e=e.flag_e,this.flag_n=e.flags>>7&1,this.flag_v=e.flags>>6&1,this.flag_m=e.flags>>5&1,this.flag_x=e.flags>>4&1,this.flag_d=e.flags>>3&1,this.flag_i=e.flags>>2&1,this.flag_z=e.flags>>1&1,this.flag_c=e.flags>>0&1,this.flag_b=0,this._a.long=e.a&Hs,this.x=x(e.x),this.y=x(e.y),this.sp=x(e.sp),this.dp=x(e.dp),this.db=q(e.db),this._pb.long=e.pb,this._pc.long=e.pc}snapshot(){return{a:this._a.word,x:this.x.word,y:this.y.word,db:this.db.byte,dp:this.dp.word,sp:this.sp.word,pb:this.pb.byte,pc:this.pc.word,flag_n:this.flag_n,flag_v:this.flag_v,flag_m:this.flag_m,flag_x:this.flag_x,flag_d:this.flag_d,flag_i:this.flag_i,flag_z:this.flag_z,flag_c:this.flag_c,flag_e:this.flag_e,flag_b:this.flag_b}}}let jg=class{constructor(){n(this,"_program",{chunks:[]});n(this,"_processor",new Yg);n(this,"_memory",new Xg(hr.LoROM));n(this,"_instructions",[]);n(this,"_errors",[]);n(this,"_max_instructions",100);n(this,"_memory_mapping",hr.LoROM);n(this,"set_max_instructions",e=>{this._max_instructions=Math.max(e,1)});n(this,"initial_a",0);n(this,"initial_x",0);n(this,"initial_y",0);n(this,"initial_sp",508);n(this,"initial_dp",0);n(this,"initial_db",0);n(this,"initial_flags",48);n(this,"initial_flag_e",0);n(this,"initial_memory",new Map);n(this,"_soft_initial_a",0);n(this,"_soft_initial_x",0);n(this,"_soft_initial_y",0);n(this,"_soft_initial_sp",508);n(this,"_soft_initial_dp",0);n(this,"_soft_initial_db",0);n(this,"_soft_initial_flags",48);n(this,"_soft_initial_flag_e",0);n(this,"_soft_initial_memory",new Map)}get instructions(){return this._instructions}get errors(){return this._errors}get cycles(){return this._instructions.reduce((e,s)=>e+s.cycles,0)}get length(){return this._program.chunks.reduce((e,s)=>e+s.bytes.length,0)}get snapshot(){return this._processor.snapshot()}get memory(){return this._memory.as_map()}get initial_ram_address(){return this._memory_mapping.ram_initial_address.long}get initial_rom_address(){return this._memory_mapping.rom_initial_address.long}get sp(){return this._processor.sp.word}get memory_mapping(){return this._memory_mapping}read_byte(e){return this._memory.load_byte_raw(T(e))}set_program(e){this._program=e}run(){this.reset_processor(!0),this.reset_memory(!0),this._instructions=[this._initial_instruction()],this._errors=[];try{for(;;){const e=this._instructions.length,s=T(this._processor.pb.byte<<16|this._processor.pc.word),i=this._next_instruction(e,s);if(!i)break;if(this._instructions.length-1>=this._max_instructions){const a=`Reached the maximum amount of instructions (${this._max_instructions}).`;this._errors.push(a);break}this._instructions.push(i),i.execute()}}catch(e){e instanceof Error?this._errors.push(e.message):this._errors.push("Execution failed: unknown error.")}}run_until(e){this.reset_processor(!1),this.reset_memory(!1);try{for(const s of this._instructions)if(s.execute(),s.id===e)break}catch{}}reset_processor(e){e&&(this._soft_initial_a=this.initial_a,this._soft_initial_x=this.initial_x,this._soft_initial_y=this.initial_y,this._soft_initial_db=this.initial_db,this._soft_initial_dp=this.initial_dp,this._soft_initial_sp=this.initial_sp,this._soft_initial_flags=this.initial_flags,this._soft_initial_flag_e=this.initial_flag_e),this._processor.reset({a:this._soft_initial_a,x:this._soft_initial_x,y:this._soft_initial_y,db:this._soft_initial_db,dp:this._soft_initial_dp,sp:this._soft_initial_sp,flags:this._soft_initial_flags,flag_e:this._soft_initial_flag_e,pb:this._memory_mapping.rom_initial_address.bank,pc:this._memory_mapping.rom_initial_address.word})}reset_memory(e){this._memory.reset(this._memory_mapping);for(const s of this._program.chunks)for(let i=0;i<s.bytes.length;++i){const a=T(s.origin+i);this._memory.save_byte(a,q(s.bytes[i]),!0)}e&&(this._soft_initial_memory=this.initial_memory);for(const[s,i]of this._soft_initial_memory)this._memory.save_byte(T(s),q(i))}_opcode(e){return this._memory.load_byte_raw(e)}_arg(e){const s=this._memory.load_byte_raw(T(e.long+1))??0,i=(this._memory.load_byte_raw(T(e.long+2))??0)<<8,a=(this._memory.load_byte_raw(T(e.long+3))??0)<<16;return T(s+i+a)}_initial_instruction(){const e=new _n(0,T(0),this._processor,this._memory);return e.execute(),e}_next_instruction(e,s){const i=this._opcode(s);if(i===void 0)return;const a=Qd[i];return new a(e,this._arg(s),this._processor,this._memory)}};function Rr(t){const e=new Set;let s=t;return function(){const[a,r]=St(s);Wt(()=>(e.add(r),()=>e.delete(r)),[]);const o=w(l=>{s=l,e.forEach(u=>u(l))},[]);return[a,o]}}const xs="Emulator",Ce=new jg,Hg=`; This is an example program that doesn't mean much.

JSL .store_data

org $818000

.store_data:
  PHK : PLB
  LDX #$02
.store_data_loop:
  LDA .data,x : STA $10,x
  DEX : BPL .store_data_loop
  RTL

.data:
  db $0A, $0B, $0C
`,Gg=Q.object({a:Q.number(),x:Q.number(),y:Q.number(),sp:Q.number(),dp:Q.number(),db:Q.number(),flags:Q.number()}),qg={a:0,x:0,y:0,sp:508,dp:0,db:0,flags:48},Wd=()=>ni(`${xs}.code`,Hg),Ud=()=>Ie(`${xs}.initialState`,qg,Gg.parse),Zd=()=>Ns(`${xs}.maxInstructions`,100),Kg=Rr([]),Jg=Rr(Ce.snapshot),eb=Rr(-1),tb=Rr(""),sb=()=>Ns(`${xs}.memory.baseAddress`,8257536),ib=()=>be(`${xs}.tab.initialState.isVisible`,!0),nb=()=>be(`${xs}.tab.log.isVisible`,!0),ab=()=>be(`${xs}.tab.memory.isVisible`,!0),rb=()=>be(`${xs}.tab.opcode.isVisible`,!0),ob=()=>be(`${xs}.tab.tutorial.isVisible`,!1),fn=new $d;function Dr(){const[t]=Wd(),[e,s]=Kg(),[i,a]=Jg(),[r,o]=eb(),[l]=Zd(),[u]=Ud(),[d,p]=Ug("emulator"),f=w(()=>{fn.code=t.trimEnd(),fn.assemble(),Ce.set_program(fn.program),Ce.set_max_instructions(l),Ce.initial_a=u.a,Ce.initial_x=u.x,Ce.initial_y=u.y,Ce.initial_sp=u.sp,Ce.initial_dp=u.dp,Ce.initial_db=u.db,Ce.initial_flags=u.flags,fn.errors.length===0?(Ce.run(),d(),s([]),a(Ce.snapshot),o(-1)):s(fn.errors.map(m=>`Line ${m.range.line}: ${m.message}`))},[t,u,l,d,s]),h=w(m=>{Ce.run_until(m),d(),o(m)},[d]),g=w(m=>Ce.read_byte(m),[p]);return{compilationErrors:e,cycles:Ce.cycles,executionErrors:Ce.errors,initialRamAddress:Ce.initial_ram_address,initialRomAddress:Ce.initial_rom_address,instructions:Ce.instructions,length:Ce.length,memoryMapping:Ce.memory_mapping,readByte:g,run:f,runUntil:h,selectedInstructionId:r,snapshot:i,stackPointer:Ce.sp}}function cb(){const{run:t}=Dr(),e=ie(()=>[{key:"e",ctrl:!0,onPress:t}],[t]);return an(e),null}function lb({labelOn:t,labelOff:e,onChange:s,size:i,value:a}){return t??(t="1".repeat(i)),e??(e="0".repeat(i)),c("div",{className:"Bitmask",children:as(i).map(r=>{const o=i-r-1,l=a>>o&1,u=a&~(1<<o)|(~l&1)<<o;return c("span",{onClick:()=>s(u),children:l?t.charAt(r):e.charAt(r)})})})}function ec({format:t,max:e,min:s,monospace:i,onChange:a,pattern:r,placeholder:o,prefix:l="",size:u,type:d,value:p}){const f=Oe(null),h=Oe(p),g=w(()=>{if(!f.current)return;const B=f.current.selectionStart,k=f.current.selectionEnd;f.current.value=h.current,d==="text"&&(f.current.selectionStart=B&&B-1,f.current.selectionEnd=k&&k-1)},[d]),m=w(B=>{var k;B.preventDefault(),(k=f.current)==null||k.focus()},[]),y=w(B=>{B.stopPropagation();const k=B.currentTarget.value;if((!r||r.test(k))&&(u===void 0||k.length<=u)){const O=a(k);O===void 0?h.current=k:(O!==k&&g(),h.current=O)}else f.current&&g();t&&(h.current=t(h.current))},[t,a,r,g,u]),_=w(B=>{B.stopPropagation()},[]);return c("div",{class:i?"Input monospace":"Input",onMouseDown:m,children:[l&&c("span",{class:"Input_Prefix",children:l}),c("input",{max:e,min:s,onChange:y,onKeyDown:_,placeholder:o,ref:f,size:u,spellcheck:!1,type:d,value:p})]})}const Rc=(t,e,s)=>{if(isNaN(t))return"";const i=vs[s][e];return e===F.Bin?Wc(t,i):e===F.Dec?br(t,i):it(t,i)},db=t=>t.toUpperCase(),ub=(t,e)=>(t=isNaN(t)?0:t,e=isNaN(e)?0:e,t===e);function Ss({encoding:t,onChange:e,unit:s,value:i,...a}){const[r,o]=St(()=>Rc(i,t,s)),l=w(d=>o(Rc(d,t,s)),[t,s]),u=w(d=>{const p=parseInt(d,ji[t]);isNaN(p)?(e(0),o("")):(e(p),o(d.toUpperCase()))},[t,e]);return Wt(()=>{ub(i,parseInt(r,ji[t]))||l(i)},[t,l,s,i]),c(ec,{format:db,monospace:!0,onChange:u,pattern:qp[t],prefix:No[t],size:vs[s][t],type:"text",value:r,...a})}function hb(){const[t,e]=ib(),[s,i]=Ud(),a=w(f=>i(h=>({...h,a:f})),[i]),r=w(f=>i(h=>({...h,x:f})),[i]),o=w(f=>i(h=>({...h,y:f})),[i]),l=w(f=>i(h=>({...h,sp:f})),[i]),u=w(f=>i(h=>({...h,dp:f})),[i]),d=w(f=>i(h=>({...h,db:f})),[i]),p=w(f=>i(h=>({...h,flags:f})),[i]);return c(Ct,{isVisible:t,label:"Initial State",onChange:e,children:c("div",{className:"App_SectionCluster",children:[c(G,{label:"A",size:"md",children:c(Ss,{encoding:F.Hex,onChange:a,placeholder:"0000",unit:re.Word,value:s.a})}),c(G,{label:"X",size:"md",children:c(Ss,{encoding:F.Hex,onChange:r,placeholder:"0000",unit:re.Word,value:s.x})}),c(G,{label:"Y",size:"md",children:c(Ss,{encoding:F.Hex,onChange:o,placeholder:"0000",unit:re.Word,value:s.y})}),c(G,{label:"SP",size:"md",children:c(Ss,{encoding:F.Hex,onChange:l,placeholder:"01FC",unit:re.Word,value:s.sp})}),c(G,{label:"DP",size:"md",children:c(Ss,{encoding:F.Hex,onChange:u,placeholder:"0000",unit:re.Word,value:s.dp})}),c(G,{label:"DB",size:"md",children:c(Ss,{encoding:F.Hex,onChange:d,placeholder:"00",unit:re.Byte,value:s.db})}),c(G,{label:"Flags",size:"md",children:c(lb,{labelOn:"NVMXDIZC",labelOff:"nvmxdizc",onChange:p,size:8,value:s.flags})})]})})}function pb(t,e){const s=Oe(!1),i=Oe(0),a=w(l=>{s.current=!0,i.current=l.clientY},[]),r=w(l=>{if(l.preventDefault(),s.current&&t.current){const u=l.clientY-i.current;i.current=l.clientY,e(sn(u/t.current.clientHeight,-1,1))}},[t.current,e]),o=w(()=>{s.current=!1},[r]);return Wt(()=>(window.addEventListener("mousemove",r),window.addEventListener("mouseup",o),()=>{window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",o)}),[r,o]),{handleMouseDown:a,handleMouseMove:r,handleMouseUp:o}}function fb(t,e){return{handleScroll:w(i=>{i.preventDefault(),t.current&&e(sn(i.deltaY/t.current.clientHeight,-1,1))},[t.current,e])}}function mb(t,e){const s=Oe(null),i=Oe(0),[a,r]=St(0);Wt(()=>{r(0),i.current=0},[t]);const o=w((h,g)=>{const y=(t.length-e)/t.length,_=i.current+h/g;i.current=sn(_,0,y),r(Math.floor(i.current*t.length))},[t.length,e]),l=w(h=>o(h,1),[o]),u=w(h=>o(h,t.length/3),[t.length,o]),d=pb(s,l),p=fb(s,u),f=ie(()=>t.slice(a,a+e),[a,t,e]);return{elementRef:s,index:a,items:f,mouseDrag:d,mouseScroll:p}}function Xd({columns:t,isRowClickable:e=()=>!1,isRowSelected:s=()=>!1,items:i,maxVisibleItems:a,onClickRow:r=()=>{},withFooter:o=!1}){a=a??i.length;const l=mb(i,Math.min(a,i.length)),u=ie(()=>t.map(f=>vt([[f.align,!!f.align&&f.align!=="left"],[`space-${f.space}`,!!f.space]])),[t]),d=`${100*l.items.length/i.length}%`,p=`${100*l.index/i.length}%`;return c("div",{className:"Table",children:[c("table",{children:[c("thead",{children:c("tr",{className:"Table_Header",children:t.map((f,h)=>c("td",{className:u[h],children:f.header}))})}),c("tbody",{ref:l.elementRef,onWheel:l.mouseScroll.handleScroll,children:l.items.map((f,h)=>{const g=vt([["selected",s(f)],["clickable",e(f)]]);return c("tr",{className:g,onClick:()=>r(f),children:t.map((m,y)=>{var B;const _={prev:l.items[h-1],next:l.items[h+1]},Z=((B=m==null?void 0:m.colSpan)==null?void 0:B.call(m,f,_))??1;return Z>0?c("td",{className:u[y],colSpan:Z,children:m.value(f,_)}):null})})})}),c("tfoot",{children:o&&c("tr",{className:"Table_Footer",children:t.map((f,h)=>c("td",{className:u[h],children:f.footer}))})})]}),l.items.length<i.length&&c("div",{className:"Table_Scrollbar",children:[c("div",{className:"Table_Scrollbar_Spacer top",children:""}),c("div",{className:"Table_Scrollbar_Track",children:c("div",{className:"Table_Scrollbar_Handle",onDrag:f=>f.currentTarget,style:{height:d,top:p},onMouseDown:l.mouseDrag.handleMouseDown,onMouseMove:l.mouseDrag.handleMouseMove,onMouseUp:l.mouseDrag.handleMouseUp})}),o&&c("div",{className:"Table_Scrollbar_Spacer bottom",children:""})]})]})}function tc({children:t,monospace:e=!1,position:s="top",tooltip:i}){const a=vt([[`Tooltip_Content ${s}`,!0],["monospace",e]]);return c("div",{className:"Tooltip",children:c("div",{className:a,"data-tooltip":i,children:t})})}const gb=No[F.Bin],bb=No[F.Hex],wo=(t,e,s)=>{const i=vs[s],a=Wc(t,i[F.Bin]),r=br(t),o=it(t,i[F.Hex]),l=`${gb}${a} / ${r} / ${bb}${o}`;return e===F.Bin?{tooltip:l,formatted:a}:e===F.Dec?{tooltip:l,formatted:r}:{tooltip:l,formatted:o}};function pr({dim:t,encoding:e,unit:s,value:i}){const{formatted:a,tooltip:r}=ie(()=>wo(i,e,s),[e,s,i]);return c(tc,{monospace:!0,tooltip:r,children:t?c("dim",{children:a}):a})}function _b({cycles:t,compilationErrors:e,executionErrors:s,instructions:i,length:a,onClickValidInstruction:r,selectedInstructionId:o,snapshot:l}){if(e.length>0)return c("div",{children:[c("div",{className:"SnesLog_CompilationErrorLabel",children:e.length===1?"Compilation error:":"Compilation errors:"}),c("ul",{className:"SnesLog_CompilationErrors",children:e.map(d=>c("li",{children:d}))})]});if(i.length===0)return c("div",{className:"SnesLog",children:"Run the emulator to see the processor's state."});const u=`${i.length}`.length;return c("div",{className:"SnesLog",children:[c(Xd,{columns:[{header:"Id",footer:c(Dc,{id:i.length-1,length:u}),value:d=>c(Dc,{id:d.id,length:u})},{header:"PC",footer:c(Nc,{pb:l.pb,pc:l.pc}),value:d=>c(Nc,{pb:d.pb,pc:d.pc})},{header:"Instruction",value:d=>c(yb,{instruction:d})},{header:"A",footer:c(li,{is8Bit:!!l.flag_m,value:l.a}),value:(d,{prev:p})=>{var f;return d.snapshot?c(li,{didChange:di(d.snapshot.a,(f=p==null?void 0:p.snapshot)==null?void 0:f.a),is8Bit:!!d.snapshot.flag_m,value:d.snapshot.a}):c("span",{className:"SnesLog_Error",children:"*** Error ***"})},colSpan:d=>d.snapshot?1:7},{header:"X",footer:c(li,{is8Bit:!!l.flag_x,value:l.x}),value:(d,{prev:p})=>{var f;return d.snapshot&&c(li,{didChange:di(d.snapshot.x,(f=p==null?void 0:p.snapshot)==null?void 0:f.x),is8Bit:!!d.snapshot.flag_x,value:d.snapshot.x})},colSpan:d=>d.snapshot?1:0},{header:"Y",footer:c(li,{is8Bit:!!l.flag_x,value:l.y}),value:(d,{prev:p})=>{var f;return d.snapshot&&c(li,{didChange:di(d.snapshot.y,(f=p==null?void 0:p.snapshot)==null?void 0:f.y),is8Bit:!!d.snapshot.flag_x,value:d.snapshot.y})},colSpan:d=>d.snapshot?1:0},{header:"SP",footer:c(Sa,{value:l.sp}),value:(d,{prev:p})=>{var f;return d.snapshot&&c(Sa,{didChange:di(d.snapshot.sp,(f=p==null?void 0:p.snapshot)==null?void 0:f.sp),value:d.snapshot.sp})},colSpan:d=>d.snapshot?1:0},{header:"DP",footer:c(Sa,{value:l.dp}),value:(d,{prev:p})=>{var f;return d.snapshot&&c(Sa,{didChange:di(d.snapshot.dp,(f=p==null?void 0:p.snapshot)==null?void 0:f.dp),value:d.snapshot.dp})},colSpan:d=>d.snapshot?1:0},{header:"DB",footer:c(Lc,{value:l.db}),value:(d,{prev:p})=>{var f;return d.snapshot&&c(Lc,{didChange:di(d.snapshot.db,(f=p==null?void 0:p.snapshot)==null?void 0:f.db),value:d.snapshot.db})},space:"right",colSpan:d=>d.snapshot?1:0},{header:"Flags",footer:c(Mc,{flags:Gr(l)}),value:(d,{prev:p})=>d.snapshot&&c(Mc,{flags:Gr(d.snapshot),prevFlags:(p==null?void 0:p.snapshot)&&Gr(p.snapshot)}),colSpan:d=>d.snapshot?1:0},{header:"C",footer:t,value:d=>d.cycles,align:"right"},{header:"L",footer:a,value:d=>d.length,align:"right",space:"left"}],isRowClickable:d=>!!d.snapshot,isRowSelected:d=>d.id===o,items:i,onClickRow:d=>{if(d.snapshot){const p=d.id===o?-1:d.id;r(p)}},maxVisibleItems:16,withFooter:!0}),s.length>0&&c("div",{className:"SnesLog_ExecutionErrors",children:s.map(d=>c("div",{children:d}))})]})}function Dc({id:t,length:e}){return c("span",{children:nn(`${t}`,e," ")})}function Nc({pb:t,pc:e}){return c("span",{children:T(t<<16|e).format_address()})}function li({didChange:t=!1,is8Bit:e,value:s}){const i=wo(s&255,F.Hex,re.Byte),a=wo(s,F.Hex,re.Word),r=`8-bit: ${i.tooltip}
16-bit: ${a.tooltip}`;return c("span",{className:t?"SnesLog_Highlight":void 0,children:c(tc,{monospace:!0,tooltip:r,children:e?c(Wi,{children:[c("dim",{children:it(s>>8&255,2)}),c("span",{children:i.formatted})]}):c("span",{children:a.formatted})})})}function Lc({didChange:t,value:e}){const[s,i]=[F.Hex,re.Byte];return c("span",{className:t?"SnesLog_Highlight":void 0,children:c(pr,{encoding:s,unit:i,value:e})})}function Sa({didChange:t=!1,value:e}){const[s,i]=[F.Hex,re.Word];return c("span",{className:t?"SnesLog_Highlight":void 0,children:c(pr,{encoding:s,unit:i,value:e})})}function Mc({flags:t,prevFlags:e=""}){return c("span",{children:t.split("").map((s,i)=>{const a=s===s.toUpperCase()&&s!=="-",r=e[i]??s,o=s!==r?"SnesLog_Highlight":void 0;return a?c("span",{className:o,children:s}):c("dim",{className:o,children:s})})})}function yb({instruction:t}){const e=t.bytes.map(i=>it(i,2)).join(" "),s=t.has_addr?`${e} ${t.effective_addr.format_address()}`:e;return c("span",{className:"flex",children:s?c(tc,{monospace:!0,tooltip:s,children:t.text_with_value}):t.text_with_value})}const Gr=t=>t.flag_e?[t.flag_n?"N":"n",t.flag_v?"V":"v","-",t.flag_b?"B":"b",t.flag_d?"D":"d",t.flag_i?"I":"i",t.flag_z?"Z":"z",t.flag_c?"C":"c"].join(""):[t.flag_n?"N":"n",t.flag_v?"V":"v",t.flag_m?"M":"m",t.flag_x?"X":"x",t.flag_d?"D":"d",t.flag_i?"I":"i",t.flag_z?"Z":"z",t.flag_c?"C":"c"].join(""),di=(t,e)=>e!==void 0&&t!==e;function vb(){const t=Dr(),[e,s]=nb(),i=w(a=>t.runUntil(a),[t.runUntil]);return c(Ct,{isVisible:e,label:"Log",onChange:s,children:c(_b,{cycles:t.cycles,compilationErrors:t.compilationErrors,executionErrors:t.executionErrors,instructions:t.instructions,length:t.length,onClickValidInstruction:i,selectedInstructionId:t.selectedInstructionId,snapshot:t.snapshot})})}const Fs=Yi[wt.Dark],zs=Yi[wt.Light],wb=(t,e)=>{const s=e===ge.Disco?Fs.color[ge.Blue]:Fs.color[e],i=e===ge.Disco?zs.color[ge.Blue]:zs.color[e];return t===wt.Dark?cc({theme:"dark",settings:{background:Fs.background2,foreground:Fs.neutral1,caret:s.primary2,selection:s.highlight1,selectionMatch:s.highlight1,lineHighlight:s.highlight2,gutterBackground:Fs.background1,gutterForeground:Fs.neutral2,gutterActiveForeground:Fs.neutral1,fontFamily:"monospace",fontSize:"1em"},styles:[{tag:ye.comment,color:"#78a178"},{tag:ye.derefOperator,color:"#a1a1a1"},{tag:ye.keyword,color:"#81a1c1"},{tag:ye.labelName,color:"#b45f8a"},{tag:ye.macroName,color:"#f6ad55"},{tag:ye.number,color:"#c57d83"},{tag:ye.paren,color:"#8c81b4"},{tag:ye.variableName,color:"#e0cf81"}]}):cc({theme:"light",settings:{background:zs.background2,foreground:zs.neutral1,caret:i.primary2,selection:i.highlight1,selectionMatch:i.highlight1,lineHighlight:i.highlight2,gutterBackground:zs.background1,gutterForeground:zs.neutral2,gutterActiveForeground:zs.neutral1,fontFamily:"monospace",fontSize:"1em"},styles:[{tag:ye.comment,color:"#365736"},{tag:ye.derefOperator,color:"#777777"},{tag:ye.keyword,color:"#384d61"},{tag:ye.labelName,color:"#662b49"},{tag:ye.macroName,color:"#ed8936"},{tag:ye.number,color:"#733d41"},{tag:ye.paren,color:"#504673"},{tag:ye.variableName,color:"#968845"}]})},xb={completionKeymap:!1,foldGutter:!1,foldKeymap:!1,highlightSpecialChars:!1,lintKeymap:!1,searchKeymap:!1};function kb({extensions:t,onChange:e,value:s}){const i=ll(),[a]=dl(),r=ie(()=>wb(i.mode,a),[i.mode,a]);return c("div",{className:"CodeEditor",children:c(Nu,{autoFocus:!0,basicSetup:xb,extensions:t,indentWithTab:!1,height:"20em",onChange:e,theme:r,value:s})})}const Sb=/^[+-]?[0-9]*$/;function Nr({isInteger:t=!1,onChange:e,value:s,...i}){const a=w(r=>{const o=sn(Number.parseInt(r),i.min??-1/0,i.max??1/0),l=e(o)??o;return Number.isNaN(l)?"":`${l}`},[t,e]);return c(ec,{...i,monospace:!0,onChange:a,type:"number",pattern:t?Sb:void 0,value:Number.isNaN(s)?"":`${s}`})}const qr=new $d,Cb=Lu(t=>{const e=[];return qr.code=t.state.doc.toString(),qr.assemble(),Ob(qr.errors).forEach(s=>{e.push({...s.range,message:s.message,severity:"error"})}),e});function Ob(t){const e=[...t].sort((a,r)=>a.range.from===r.range.from?a.range.to-r.range.to:r.range.from-a.range.from),s=[];let i=1/0;for(const a of e)a.range.to<=i&&(s.push(a),i=a.range.to);return s}function Pb(){const[t,e]=Yo(Io,Po,1e3),s=w(i=>{navigator.clipboard.writeText(i),e()},[]);return[t,s]}const Ib=[Ag(),Cb];function Ab(){const[t,e]=Pb(),s=Dr(),[i,a]=Wd(),r=w(()=>a(""),[a]),o=w(()=>e(i),[i,e]),[l,u]=Zd(),d=ie(()=>[{icon:lh,onClick:s.run,tooltip:"Run (Ctrl+E)"},{icon:Ga,onClick:r,tooltip:"Clear editor"},{icon:t,onClick:o,tooltip:"Copy code"}],[t,r,o,s.run]);return c(Xo,{actions:d,label:"Editor",children:c("div",{className:"App_SectionCol",children:[c(kb,{extensions:Ib,onChange:a,value:i}),c(G,{inline:!0,label:"Max Instructions",size:"md",children:c(Nr,{isInteger:!0,max:1e3,min:1,onChange:u,placeholder:"100",value:l})})]})})}const Kr=16777215,mn=16777200;function Tb({baseAddress:t,columnCount:e=16,initialRamAddress:s,initialRomAddress:i,memoryMapping:a,stackAddress:r,memory:o,onChangeAddress:l}){const[u,d]=St();s=a.map_safe(T(s)),i=a.map_safe(T(i)),r=a.map_safe(T(r)),Wt(()=>d(void 0),[o]);const p=w(()=>{l(t+16&Kr)},[t]),f=w(()=>{l(t-16&Kr)},[t]),h=w(()=>{l(s)},[t,s]),g=w(()=>{l(i)},[t,i]),m=w(()=>{l(r&mn)},[t,r]),y=a.map_safe(T(t))&mn,_=y===(s&mn),Z=y===(i&mn),B=y===(r&mn);return c("div",{className:"SnesMemory",children:[c("div",{className:"SnesMemory_Table",children:[c("div",{className:"SnesMemory_Table_Group",children:[c("div",{className:"SnesMemory_Table_Corner",children:"".repeat(6)}),c("div",{className:"SnesMemory_Table_RowIndex",children:as(o.length/e).map(k=>c("div",{children:it(t+e*k&Kr,6)}))})]}),c("div",{className:"SnesMemory_Table_Group flex_1",children:[c("div",{className:"SnesMemory_Table_ColIndex",children:as(e).map(k=>c("div",{children:it(k,1)}))}),c("div",{className:"SnesMemory_Table_Grid",children:o.map((k,O)=>{const D=(u==null?void 0:u.index)===O,te=t+O&16777215,we=vt([["selected",D],["stack",a.map_safe(T(te))===r]]);return c("div",{className:we,onClick:()=>d(D?void 0:{address:te,byte:k??0,index:O}),children:k===void 0?c(pr,{dim:!0,encoding:F.Hex,unit:re.Byte,value:0}):c(pr,{encoding:F.Hex,unit:re.Byte,value:k})})})})]})]}),c("div",{className:"SnesMemory_Footer",children:c(G,{inline:!0,label:"Base address",size:"md",children:c("div",{className:"App_SectionCluster",children:[c(Pt,{label:"-10",onClick:f}),c(Ss,{encoding:F.Hex,onChange:l,placeholder:"7E0000",unit:re.Long,value:t}),c(Pt,{label:"+10",onClick:p}),c("div",{className:"divider"}),c(Pt,{isSelected:_,label:"RAM",onClick:h}),c(Pt,{isSelected:Z,label:"ROM",onClick:g}),c(Pt,{isSelected:B,label:"Stack",onClick:m})]})})})]})}const Eb=8*16;function Rb(){const t=Dr(),[e,s]=sb(),[i,a]=ab(),r=ie(()=>as(Eb).map(l=>t.readByte(e+l)),[e,t.readByte]),o=t.selectedInstructionId===-1?"Memory":`Memory (instruction ${t.selectedInstructionId})`;return c(Ct,{isVisible:i,label:o,onChange:a,children:c("div",{className:"App_SectionCol",children:c(Tb,{baseAddress:e,initialRamAddress:t.initialRamAddress,initialRomAddress:t.initialRomAddress,memory:r,memoryMapping:t.memoryMapping,stackAddress:t.stackPointer,onChangeAddress:s})})})}function Yd(t){return c(ec,{...t,type:"text"})}const Db=["n","v","m","x","d","i","z","c"],Nb=[{header:"Hex",value:t=>it(t.opcode,2)},{header:"Mode",value:t=>t.mode.text||"<implied>"},{header:"Example",value:t=>`${t.mnemonic} ${t.mode.format({arg:T(0),arg_size:t.mode.base_length-1})}`},{header:"Flags",value:t=>Db.map((e,s)=>t.affected_flags&1<<7-s?e:"-").join("")},{header:"Cycles",value:t=>{let e=`${t.base_cycles}`;return t.cycles_modifier&v&&(e+="-m"),t.cycles_modifier&Je&&(e+="-2*m"),t.cycles_modifier&ce&&(e+="-x"),t.cycles_modifier&Er&&(e+="-e"),t.cycles_modifier&C&&(e+="+d"),t.cycles_modifier&fs&&(e+="+p"),t.cycles_modifier&Xe&&(e+="+p"),t.cycles_modifier&Vd&&(e+="+b"),t.cycles_modifier&Ko&&(e+="+7*t"),t.cycles_modifier&Fd&&(e+="+r"),e},align:"right"},{header:"Length",value:t=>{let e=`${t.mode.base_length}`;return t.mode.length_modifier&v&&(e+="-m"),e},align:"right"}];function Lb(){const[t,e]=rb(),[s,i]=tb(),a=ie(()=>Object.values(Qd).filter(r=>r.mnemonic===s.toUpperCase()).sort((r,o)=>r.opcode<o.opcode?-1:r.opcode>o.opcode?1:0),[s]);return c(Ct,{isVisible:t,label:"Search Opcode",onChange:e,children:c("div",{className:"App_SectionCol",children:[c(Yd,{onChange:i,placeholder:"ADC",size:3,value:s}),a.length>0&&c(Xd,{columns:Nb,items:a})]})})}const Mb=[{name:"<code>808000</code>-<code>FFFFFF</code>",description:"ROM",keybindings:[]},{name:"<code>008000</code>-<code>7DFFFF</code>",description:"Mirror of <code>808000</code>-<code>FDFFFF</code>",keybindings:[]},{name:"<code>7E0000</code>-<code>7E1FFF</code> <code>7E2000</code>-<code>7FFFFF</code>",description:"WRAM",keybindings:[]},{name:"<code>000000</code>-<code>3F1FFF</code> <code>7F0000</code>-<code>7F1FFF</code> <code>800000</code>-<code>BF1FFF</code>",description:"Mirror of <code>7E0000</code>-<code>7E1FFF</code>",keybindings:[]}],Bb=[{name:"PC",description:"Program Counter. A combination of the Program Bank and the 16-bit Program Counter. This is the program counter before the instruction executes.",keybindings:[]},{name:"A",description:"Accumulator. When in 8-bit mode, the high byte is dimmed.",keybindings:[]},{name:"X",description:"X index. When in 8-bit mode, the high byte is dimmed.",keybindings:[]},{name:"Y",description:"Y index. When in 8-bit mode, the high byte is dimmed.",keybindings:[]},{name:"SP",description:"Stack Pointer. In the <i>Memory</i> section, the stack pointer is marked with a colored outline.",keybindings:[]},{name:"DP",description:"Direct Page.",keybindings:[]},{name:"DB",description:"Data Bank.",keybindings:[]},{name:"Flags",description:"Processor status, NVMXDIZC in native mode and NV-BDIZC in emulation mode. Uppercase letters indicate set values, lowercase letters indicate cleared values.",keybindings:[]}],$b=[{name:"m",description:"1 if the M flag is set, 0 if cleared.",keybindings:[]},{name:"x",description:"1 if the X flag is set, 0 if cleared.",keybindings:[]},{name:"e",description:"1 if the E flag is set, 0 if cleared.",keybindings:[]},{name:"d",description:"1 if the low byte of the direct page register is not zero, 0 otherwise.",keybindings:[]},{name:"p",description:"1 if the X flag is set or if the index crosses the page boundary while computing the effective address during the instruction, 0 otherwise.",keybindings:[]},{name:"b",description:"1 if branch has been taken, 0 otherwise.",keybindings:[]},{name:"t",description:"Amount of bytes transferred during a MVN or MVP.",keybindings:[]},{name:"r",description:"A variable amount due to processor restart.",keybindings:[]}];function Vb(){const[t,e]=ob();return c(ee,{isVisible:t,onChangeVisibility:e,children:[c(ee.Section,{title:"General",children:[c("div",{children:["This is a basic code editor, assembler, and emulator for the 65816. You can write ASM code and execute it, the result will be displayed in the ",c("i",{children:"Log"})," and ",c("i",{children:"Memory"})," sections. The emulator is a rough imitation of an actual SNES, simulating its processor and (partially) its memory."]}),c("div",{children:['You can run the emulator by pressing the "Play" button on the right side of the "Emulator" text or via the ',c("kbd",{children:"Ctrl-E"})," shortcut."]})]}),c(ee.Section,{title:"The Processor",children:[c("div",{children:["Running the emulator will execute the code present in the editor and display the state of the processor (i.e., its registers) in the"," ",c("i",{children:"Log"})," section for each instruction, as well as the instruction's cycles and length (in bytes), represented by the C and L columns respectively."]}),c("div",{children:"The last row features the final state of the processor, where C represents the total amount of cycles taken by the program and L the total amount of bytes (note that L is not necessarily the sum of all instructions' lengths, as some may have been skipped or executed several times)."}),c("div",{children:"The processor is made of the following registers:"}),c(ee.Actions,{actions:Bb}),c("div",{children:["All registers but the Program Counter indicate the state of the processor ",c("i",{children:"after"})," the instruction executed."]}),c("div",{children:"Colored values are values that changed compared to the previous instruction. You can hover an instruction to display its bytes and the effective address used by the instruction (in brackets), if applicable. Hovering a register shows its values in binary, decimal, and hexadecimal."})]}),c(ee.Section,{title:"Memory",children:[c("div",{children:["The ",c("i",{children:"Memory"})," section represents both RAM and ROM. When executing a program, the code's bytes will be written in ROM. By default, this section will show the state of memory at the end of execution, but you can click on an instruction in the ",c("i",{children:"Log"})," section to show the state of memory at that moment (click again the selected instruction to show the final state)."]}),c("div",{children:"Memory follows a pattern similar to LoROM. Supported memory areas are:"}),c(ee.Actions,{actions:Mb}),c("div",{children:["You can write to RAM during code execution, but not to ROM (it will result in an error). You can execute code from any location (e.g., you can ",c("code",{children:"JML"})," to RAM)."]}),c("div",{children:["Code execution always starts from address ",c("code",{children:"808000"})," (alias"," ",c("code",{children:"008000"}),")."]}),c("div",{children:"Dimmed values are values that have not been set by the user (both in RAM and ROM). The Stack Pointer address is marked with an outline."})]}),c(ee.Section,{title:"The Language",children:[c("div",{children:["All operations are supported and assemble correctly; however the following operations are not implemented during emulation:"," ",c("code",{children:"BRK"}),", ",c("code",{children:"COP"}),", ",c("code",{children:"RTI"}),", ",c("code",{children:"STP"}),", and ",c("code",{children:"WAI"}),". In particular, anything that involves interrupts doesn't work. Opcodes can be written uppercase or lowercase, but not mixed."]}),c("div",{children:["Numbers can be specified in decimal form, binary (prefixed by a"," ",c("code",{children:"%"}),"), or hexadecimal (prefixed by a ",c("code",{children:"$"}),"). For example, the value 10 (decimal) can be written as ",c("code",{children:"10"}),","," ",c("code",{children:"%00001010"}),", or ",c("code",{children:"$0A"}),". Binaries can only be expressed with 8, 16, or 24 digits, and hexadecimals with 2, 4, or 6 digits (e.g., ",c("code",{children:"$1"})," is not valid). Based on their length in digits, values will always be assembled to the corresponding 8, 16, or 24 bit value. Decimals with 1-3 digits assemble to an 8-bit value, 4-5 to 16-bit, and 6-8 to 24-bit."]}),c("div",{children:["Labels represent a specific address in memory and are defined by specifying an alphanumeric sequence prefixed by a period and ending with a column (e.g., ",c("code",{children:".my_label:"}),"). To use a label you omit the column (e.g., ",c("code",{children:"BEQ .my_label"}),"). Labels can be used in branching operations, ",c("code",{children:"JMP"}),", ",c("code",{children:"JML"}),","," ",c("code",{children:"JSR"}),", ",c("code",{children:"JSL"}),", ",c("code",{children:"PER"}),", and anywhere you could put an absolute address (e.g., ",c("code",{children:"LDA .my_label,x"}),")."]}),c("div",{children:["You can define data tables with ",c("code",{children:"db"})," for 8-bit numbers,"," ",c("code",{children:"dw"})," for 16-bit numbers, and ",c("code",{children:"dl"})," for 24-bit numbers. Every table instruction must be followed by one or more comma-separated values of corresponding size. These values will be written directly into ROM in little endian format. Labels are not allowed in data tables. Examples:",c("div",{children:c("code",{children:["db $01, $02, $04, $08",c("br",{}),"dw $1234, %0110000001001111",c("br",{}),"dl %011000000100111100000000, 124711, $7E1233"]})})]}),c("div",{children:["You can change the code's PC with ",c("code",{children:"org"}),". For example, all code that follows ",c("code",{children:"org $818000"})," will be written in bank 81."]}),c("div",{children:["Every instruction, data table, change of origin, or label definition must either start on a new line or be separated by a column (e.g.,"," ",c("code",{children:"CLC : ADC #$10)."})]}),c("div",{children:["Line comments start with a semi-column (e.g.,"," ",c("code",{children:"; This is a comment"}),")."]})]}),c(ee.Section,{title:"Initial State and Other Options",children:[c("div",{children:"For ease of use, you can specify the processor's initial state via the corresponding section. The initial state will take effect when running the emulator (it does not live update). You can specify a 16-bit value for A even if the M flag is set (i.e., A is 8-bit). If you specify a high byte for X or Y when the X flag is set, the high byte will automatically be set to 0 at runtime. Press on a flag to toggle its status (uppercase is set, lowercase is clear)."}),c("div",{children:"It's not possible to set memory's initial state (everything but ROM will be initialized to 0)."}),c("div",{children:"The emulator will always start in native mode (E flag clear)."}),c("div",{children:"The emulator will automatically stop when it tries to read an opcode from an address that has not been initialized, or if it exceeds the specified number of maximum instructions."})]}),c(ee.Section,{title:"Searching Opcodes",children:[c("div",{children:["You can search for instructions in the ",c("i",{children:"Search Opcodes"})," section, by typing the instruction's mnemonic in the input field. The result will show all related instructions with their hex opcode, argument mode, example usage, flags affected, cycles used, and bytes required."]}),c("div",{children:"Cycles and bytes might be affected by the following modifiers:"}),c(ee.Actions,{actions:$b})]}),c(ee.Section,{title:"Unexpected Results",children:c("div",{children:["If something is not working as you might expect or the result doesn't match with those of others emulators, then it might be a bug. Feel free to open a"," ",c(Oa,{href:"https://github.com/zuccha/smw-toolbox/issues/new?assignees=&labels=bug&projects=&template=bug_report.md&title=",label:"bug report"})," ","on GitHub."]})})]})}function Fb(){return c("div",{class:"App_Module",children:[c(cb,{}),c("div",{class:"App_ModuleBlock",children:[c(Ab,{}),c(hb,{}),c(Lb,{})]}),c("div",{class:"App_ModuleBlock",children:[c(vb,{}),c(Rb,{}),c(Vb,{})]})]})}function ta(t,e,s){const{xStart:i,xEnd:a,yStart:r,yEnd:o}=t;return i<=e&&e<a&&r<=s&&s<o}const us={},zb=t=>Q.object({items:Q.array(Q.array(t)),height:Q.number(),width:Q.number()}),dn=(...t)=>yr(...t);function jd(t,e,s,i){const a=[];for(let r=0;r<e;++r){const o=[];for(let l=0;l<t;++l)o.push(s);a.push(o)}return{items:a,height:e,width:t}}jd.deps=dn();function un(t,e,s=void 0){return s?{xStart:Math.max(0,s.xStart),xEnd:Math.min(t.width,s.xEnd),yStart:Math.max(0,s.yStart),yEnd:Math.min(t.height,s.yEnd)}:{xStart:0,xEnd:t.width,yStart:0,yEnd:t.height}}un.deps=dn(["height","width"]);function Hd(t,e,s,i){const a=un(t);return ta(a,s,i)?t.items[i][s]:void 0}Hd.deps=dn(["height","items","width"],[],[un]);function Gd(t,e,s){if(t.items.length!==t.height||t.items.some(a=>a.length!==t.width))return t;const i=[...t.items.map((a,r)=>[...a.map((o,l)=>s(l,r,o))])];return{...t,items:i}}Gd.deps=dn(["height","items","width"]);function qd(t,e,s,i,a){const r=un(t,e,void 0);if(!ta(r,s,i))return t;const o=[...t.items.map(l=>[...l])];return o[i][s]=a,{...t,items:o}}qd.deps=dn(["height","items","width"],[],[un]);function Kd(t,e,s){for(let i=0;i<t.items.length;++i)for(let a=0;a<t.items[i].length;++a)if(s(a,i,t.items[i][a]))return!0;return!1}Kd.deps=dn(["items"]);const hs={computeBounds:un,map:Gd,get:Hd,set:qd,some:Kd};var Jd=(t=>(t[t.Unselected=0]="Unselected",t[t.Selected=1]="Selected",t[t.SelectedRect=2]="SelectedRect",t))(Jd||{});const Qb=Q.nativeEnum(Jd),Bc=Q.object({x1:Q.number(),x2:Q.number(),y1:Q.number(),y2:Q.number()});Q.object({grid:zb(Qb),rect:Q.union([Bc,Q.undefined()]),rectPrev:Q.union([Bc,Q.undefined()])});const Nt=yr;function sc(t,e,s){return 0<=e&&e<t.grid.width&&0<=s&&s<t.grid.height}function sa(t,e){return{grid:jd(t,e,0),rect:void 0,rectPrev:void 0}}sa.deps=Nt();function eu(t,e){return sa(e.width,e.height)}eu.deps=Nt([],[],[sa]);function Ji(t,e){return t.rect?hs.computeBounds(t.grid,us,{xStart:Math.min(t.rect.x1,t.rect.x2),xEnd:Math.max(t.rect.x1,t.rect.x2)+1,yStart:Math.min(t.rect.y1,t.rect.y2),yEnd:Math.max(t.rect.y1,t.rect.y2)+1}):hs.computeBounds(t.grid,us)}Ji.deps=Nt(["grid","rect"]);function tu(t,e){return hs.some(t.grid,us,(s,i)=>Lr(t,e,s,i))}tu.deps=Nt(["grid"],[],[Lr]);function Lr(t,e,s,i){const a=hs.get(t.grid,us,s,i);return a===1||a===2}Lr.deps=Nt(["grid"],[]);function su(t,e,s,i,a=!1){if(!t.rectPrev)return t;if(a){const u=Math.min(t.rectPrev.x1,t.rectPrev.x2),d=Math.min(t.rectPrev.y1,t.rectPrev.y2);return Mr(t,e,u+s,d+i,!0)}const r=t.rectPrev,o=r.x2+s,l=r.y2+i;return Br({...t,rect:r,rectPrev:r},e,o,l,!0)}su.deps=Nt(["rectPrev"],[],[Mr,Br]);function Mr(t,e,s,i,a=!1){if(!sc(t,s,i))return t;const r=hs.map(t.grid,us,(l,u)=>s===l&&i===u?1:0),o={x1:s,x2:s,y1:i,y2:i};return{grid:r,rect:a?void 0:o,rectPrev:o}}Mr.deps=Nt(["grid"],[]);function iu(t,e,s,i){const a=hs.set(t.grid,us,s,i,1);return{...t,grid:a}}iu.deps=Nt(["grid"],[]);function nu(t,e,s){const i=hs.map(t.grid,us,(a,r,o)=>s(a,r)?1:o);return{...t,grid:i}}nu.deps=Nt(["grid"],[]);function au(t,e,s,i){if(!sc(t,s,i))return t;const a=hs.set(t.grid,us,s,i,1),r={x1:s,x2:s,y1:i,y2:i};return{grid:a,rect:r,rectPrev:r}}au.deps=Nt(["grid"],[]);function ru(t,e){if(!t.rect)return t;const s=Ji(t),i=hs.map(t.grid,us,(a,r,o)=>o===2&&ta(s,a,r)?1:o);return{...t,grid:i,rect:void 0}}ru.deps=Nt(["grid","rect"],[],[Ji]);function Br(t,e,s,i,a=!1){if(!t.rect||!sc(t,s,i))return t;const r={...t.rect,x2:s,y2:i},o=Ji(t),l=Ji({...t,rect:r});return{grid:hs.map(t.grid,us,(d,p,f)=>ta(l,d,p)?f===0?2:f:ta(o,d,p)&&f===2?0:f),rect:a?void 0:r,rectPrev:r}}Br.deps=Nt(["grid","rect"],[],[Ji]);const Yt={clear:eu,hasSelection:tu,isSelected:Lr,move:su,restart:Mr,select:iu,selectIf:nu,start:au,stop:ru,update:Br};function Wb(t,e){const[s,i]=St(sa(t,e));Wt(()=>{i(sa(t,e))},[t,e]);const a={obj:s,setObj:i,context:{height:e,width:t}},r=Pe(Yt.clear,a),o=mc(Yt.hasSelection,a),l=mc(Yt.isSelected,a),u=Pe(Yt.move,a),d=Pe(Yt.restart,a),p=Pe(Yt.select,a),f=Pe(Yt.selectIf,a),h=Pe(Yt.start,a),g=Pe(Yt.stop,a),m=Pe(Yt.update,a);return[s,{clear:r,hasSelection:o,isSelected:l,move:u,restart:d,select:p,selectIf:f,start:h,stop:g,update:m}]}const en=["#FF5733","#FFFF00","#00FF00","#FF0066","#FF66FF","#F1C40F","#1ABC9C","#16A085","#2980B9","#66FFFF","#CCFF00","#9B59B6","#99CC33","#FF3300","#FFCC00","#FF6699","#FF6600","#99CC00","#9966CC","#E67E22","#C0392B","#999966","#2ECC71","#FF3399","#FF6666","#66CC99","#FF9900","#E74C3C","#36D7B7","#99CC66","#66FF66","#99CC99","#9999CC","#6699FF","#FF0000","#66CCFF","#FFFF66","#996633","#FF66CC","#9966FF","#CC9966","#66FFCC","#996699","#8E44AD","#999999","#CC6699","#FF33CC","#F39C12","#27AE60","#FF0033","#3498DB","#CC9900","#00FF99","#00FF33","#CC6600","#00FF66","#FF9966","#9999FF","#CC6666","#FFC300","#996600","#66CC66","#CCFF66","#66CC00"],xo={[re.Byte]:"db",[re.Word]:"dw",[re.Long]:"dl"};function Ub(t){t=t.trim();const e=xo[re.Byte],s=xo[re.Word],[i,a]=t.startsWith(e)?[e,re.Byte]:t.startsWith(s)?[s,re.Word]:[void 0,void 0];if(!i)return[void 0,{code:0,message:"no size instruction ('db' or 'dw') found"}];t=t.replace(i,"").trim();const r=t.split(/\s*,\s*/),o=[];for(let u=0;u<r.length;++u){const d=r[u],p=Mo(d,{unit:a});if(!p)return[void 0,{code:1,rawValue:d,rawValueIndex:u,message:`value '${t}' is not a valid`}];o.push(p)}const l={integers:o,unit:a};return ou(l)===0?[void 0,{code:2,message:"no values found"}]:[l,void 0]}function Zb(t,e){const s=xo[t.unit],i=t.integers.map(a=>gl(a,e.encoding,e.isSigned,!0,{unit:t.unit})).join(e.shouldSpaceValues?", ":",");return`${s} ${i}`}function ou(t){return t.integers.length*pl[t.unit]}const Xb={getSize:ou};var Vt=(t=>(t[t.None=0]="None",t[t.RowNumberDec=1]="RowNumberDec",t[t.RowNumberHex=2]="RowNumberHex",t[t.RowRangeHex=3]="RowRangeHex",t))(Vt||{});const Yb=Q.nativeEnum(Vt);function jb(t){const e=t.split(/\s*:\s*/),s=[];for(let a=0;a<e.length;++a){const r=e[a],[o,l]=Ub(r);if(l)return[void 0,{code:0,rawChunk:r,rawChunkIndex:a,chunkError:l,message:`chunk ${a}, ${l.message}`}];s.push(o)}const i={chunks:s};return cu(i)===0?[void 0,{code:1,message:"no chunks found"}]:[i,void 0]}function Hb(t,e){const s=" ".repeat(e.indentation),i=t.chunks.map(a=>Zb(a,e)).join(" : ");return`${s}${i}`}function cu(t){return Qc(t.chunks.map(Xb.getSize))}const lu={getSize:cu};function Gb(t,e,s,i,a,r,o){switch(s){case Vt.RowNumberDec:return`${" ".repeat(t)} ; ${br(i)}`;case Vt.RowNumberHex:{const l=it(e-1).length;return`${" ".repeat(t)} ; ${it(i,l)}`}case Vt.RowRangeHex:{const l=it(o-1).length,u=it(r,l),d=it(r+a-1,l);return`${" ".repeat(t)} ; ${u}-${d}`}}return""}function qb(t){const e=t.split(`
`).map(r=>r.split(";")[0].trim());let s="";const i=[];for(let r=0;r<e.length;++r){const o=e[r];if(!o)continue;if(Gu.test(o)){s=o.substring(0,o.length-1);continue}const[l,u]=jb(o);if(u)return[void 0,{code:0,rawRow:o,rawRowIndex:r,rowError:u,message:`row ${r}, ${u.message}`}];i.push(l)}const a={name:s,rows:i};return du(a)===0?[void 0,{code:1,message:"no rows found"}]:[a,void 0]}function Kb(t,e){const s="",i=t.rows.map(o=>({str:Hb(o,e),size:lu.getSize(o)}));let a=i.map(o=>o.str);if(e.rowCommentType!==Vt.None){const o=Math.max(...i.map(d=>d.str.length)),l=du(t);let u=0;a=i.map((d,p)=>{const f=d.str+Gb(o-d.str.length,i.length,e.rowCommentType,p,d.size,u,l);return u+=d.size,f})}const r=a.join(`
`);return`${s}${r}`}function du(t){return Qc(t.rows.map(lu.getSize))}var qs=(t=>(t[t.None=0]="None",t[t.ColumnNumberDec=1]="ColumnNumberDec",t[t.ColumnNumberHex=2]="ColumnNumberHex",t[t.ColumnValueHex=3]="ColumnValueHex",t))(qs||{});const Jb=Q.nativeEnum(qs);function e_(t,e,s,i,a,r){const o=vs[r][i]+qn[i].length,l=`;${" ".repeat(Math.max(0,a-1)+3)}`,u=o*e+s*(e-1),d=`${l}${"-".repeat(u)}
`;switch(t){case 1:{const p=as(e).map(f=>zr(br(f),o)).join(" ".repeat(s));return`${l}${p}
${d}`}case 2:{const p=it(e-1).length,f=as(e).map(h=>zr(it(h,p),o)).join(" ".repeat(s));return`${l}${f}
${d}`}case 3:{const p=it(e-1).length,f=pl[r],h=as(e).map(g=>zr(it(g*f,p),o)).join(" ".repeat(s));return`${l}${h}
${d}`}}return""}function t_(t){const e=t.rows.length;if(e===0)return[void 0,{code:3,message:"no data found"}];const s=t.rows.map(l=>{const u=l.chunks[0];return l.chunks.length===1&&u?{cells:u.integers,unit:u.unit}:void 0});if(s.some(l=>!l))return[void 0,{code:0,message:"one or more rows use multiple 'db' or 'dw' instructions"}];const i=s[0].cells.length;if(s.some(l=>l.cells.length!==i))return[void 0,{code:1,message:"one or more rows have a different number of elements"}];const a=s[0].unit;if(s.some(l=>l.unit!==a))return[void 0,{code:2,message:"one or more rows use different 'db' or 'dw' instructions"}];const r=s.map(l=>l.cells),o=t.name;return[{grid:r,height:e,name:o,unit:a,width:i},void 0]}function s_(t){const[e,s]=qb(t);return s?[void 0,{code:0,dataError:s,message:s.message}]:t_(e)}function i_(t,e){const s=e.name?`${e.name}:
`:"",i=e_(e.columnCommentType,t.width,e.shouldSpaceValues?2:1,e.encoding,e.indentation,t.unit),a=n_(t),r=Kb({...a,name:""},e);return`${s}${i}${r}`}function n_(t){const e=[];for(let s=0;s<t.height;++s){const i=[];for(let r=0;r<t.width;++r){const o=t.grid[s][r];i.push(o)}const a={integers:i,unit:t.unit};e.push({chunks:[a]})}return{name:t.name,rows:e}}const gs=(t,e,s)=>`${t}.grid[${s}][${e}]`,ko={...Tl,isSigned:!1,shouldMoveAfterTyping:!1,typingDirection:dt.Left},a_=ii(({colorOpacity:t,encoding:e,isBackgroundImageVisible:s,id:i,isEditing:a,isSelected:r,onDoubleClick:o,onMouseDown:l,onMouseOver:u,unit:d,x:p,y:f},h)=>{const[g,{setValue:m}]=$o(gs(i,p,f),Kn,{unit:d}),y=g.value,[{digits:_}]=Bo(g,Fc,{...ko,encoding:e,unit:d}),Z=ie(()=>{if(!a)return _.length;const je=_.findIndex(xe=>xe!=="0");return je===-1?_.length:je},[_,a]),B=_.slice(0,Z),k=_.slice(Z),[O]=ni(`${i}.color.value[${y}]`,en[y%en.length]),D=w(()=>{o(y,p,f)},[y,o,p,f]),te=w(()=>{l(p,f)},[l,p,f]),we=w(()=>{u(p,f)},[u,p,f]),Be=vt([["IntegerGridEditor_Cell",!0],["selected",r]]),ne=w(()=>g,[g]),he=w(()=>y,[y]);mr(h,()=>({get:ne,getValue:he,setValue:m}),[ne,he,m]);const We=ie(()=>r?{opacity:s?.7:1}:{opacity:t/100,backgroundColor:O},[O,t,s,r,y]);return c("div",{class:Be,onDblClick:D,onMouseDown:te,onMouseOver:we,children:[c("div",{class:"IntegerGridEditor_Cell_Background",style:We}),c("div",{children:[c("span",{children:B.join("")}),c("span",{children:k.join("")})]})]})}),r_=ii(({backgroundImage:t,backgroundImageOpacity:e=0,columnCommentType:s,colorOpacity:i,encoding:a,height:r,id:o,indentation:l,name:u,onBackgroundImageError:d=()=>{},onCopy:p,onPaste:f,onSelect:h,rowCommentType:g,shouldSpaceValues:m,unit:y,width:_},Z)=>{r=Number.isNaN(r)?1:r,_=Number.isNaN(_)?1:_;const B=Oe({}),k=Oe(!1),[O,D]=Wb(_,r),[te,we]=uf(Kn,{unit:y}),[Be,ne]=Bo(te,w(M=>we.setValue(M.value),[we.setValue]),{...ko,encoding:a,unit:y}),[he,We]=St(!1);Wt(()=>{We(!1),we.setValue(0)},[O]);const je=w(M=>{var ae;for(let pe=0;pe<r;++pe)for(let le=0;le<_;++le)(ae=B.current[gs(o,le,pe)])==null||ae.setValue(M)},[r,o,_]),xe=w(M=>{var ae;for(let pe=0;pe<r;++pe)for(let le=0;le<_;++le)D.isSelected(le,pe)&&((ae=B.current[gs(o,le,pe)])==null||ae.setValue(M))},[D.isSelected,r,o,_]),$e=w(()=>{var le;const M=[];for(let Ge=0;Ge<r;++Ge){const Lt=[];for(let hn=0;hn<_;++hn)Lt.push(((le=B.current[gs(o,hn,Ge)])==null?void 0:le.get())??Kn);M.push(Lt)}const ae={grid:M,height:r,name:u,unit:y,width:_},pe=i_(ae,{columnCommentType:s,encoding:a,indentation:l,isSigned:!1,rowCommentType:g,shouldSpaceValues:m,name:u});navigator.clipboard.writeText(pe),p(ae)},[s,r,o,l,u,p,g,m,y,_]),Ae=w(()=>{navigator.clipboard.readText().then(M=>{const[ae,pe]=s_(M);if(pe)return f([void 0,pe]);for(let le=0;le<ae.grid.length;++le)for(let Ge=0;Ge<ae.grid[0].length;++Ge)Ys.save(gs(o,Ge,le),ae.grid[le][Ge]);f([ae,void 0])})},[o,f]),Ve=w(M=>D.selectIf((ae,pe)=>{const le=B.current[gs(o,ae,pe)];return!!(le&&le.getValue()===M)}),[D.selectIf,o]),_e=w((M,ae,pe)=>{var le,Ge;if((le=Et.current)==null||le.focus(),k.current)D.start(M,ae);else{ne.clear(),D.restart(M,ae,pe);const Lt=(Ge=B.current[gs(o,M,ae)])==null?void 0:Ge.getValue();Lt!==void 0&&h(Lt)}},[D.restart,D.start,ne.clear]),et=w((M,ae)=>D.update(M,ae),[D.update]),Fe=w(()=>{D.stop()},[D.stop]),ue=w(M=>{(()=>{const pe=le=>{We(!0);const Ge=rr(le,{...ko,encoding:a,unit:y});return xe(Ge?Ge.value:0),!0};return M.key==="c"&&(M.ctrlKey||M.metaKey)?Ke($e()):M.key==="v"&&(M.ctrlKey||M.metaKey)?Ke(Ae()):((M.ctrlKey||M.metaKey||M.shiftKey)&&(k.current=!0),M.key==="Delete"?pe(ne.clear()):M.key==="Backspace"?pe(ne.removeDigit()):wr(M.key,a)?pe(ne.insertDigit(M.key)):M.key==="ArrowDown"?Ke(D.move(0,1,!k.current)):M.key==="ArrowLeft"?Ke(D.move(-1,0,!k.current)):M.key==="ArrowRight"?Ke(D.move(1,0,!k.current)):M.key==="ArrowUp"?Ke(D.move(0,-1,!k.current)):!1)})()&&M.preventDefault()},[D.move,ne.clear,ne.deleteDigit,ne.insertDigit,ne.removeDigit,xe,$e,a,Ae,y]),Se=w(M=>{!M.ctrlKey&&!M.metaKey&&!M.shiftKey&&(k.current=!1),!1},[]);tn(()=>{const M=()=>k.current=!1;return window.addEventListener("focus",M),window.addEventListener("mouseup",Fe),()=>{window.removeEventListener("focus",M),window.removeEventListener("mouseup",Fe)}},[Fe]);const He=w(()=>{D.hasSelection()||_e(0,0,!0)},[D.hasSelection,_e]),tt=w(()=>{ne.clear(),D.clear()},[D.clear,ne.clear]),Et=Oe(null),$=w(()=>{D.clear(),ne.clear(),je(0)},[D.clear,ne.clear,je]),X=w(()=>_e(0,0,!0),[_e]);mr(Z,()=>({clear:$,copy:$e,focus:X,paste:Ae}),[$,$e,X,Ae]);const Te=ie(()=>({maxWidth:`${_*3.4}em`}),[_]),Ut=ie(()=>({opacity:e/100}),[e]);return c("div",{class:"IntegerGridEditor",children:c("div",{class:"IntegerGridEditor_Grid",onBlur:tt,onFocus:He,onKeyDown:ue,onKeyUp:Se,ref:Et,style:Te,tabIndex:0,children:[as(r).map(M=>c("div",{class:"IntegerGridEditor_Row",children:as(_).map(ae=>c(a_,{colorOpacity:i,encoding:a,id:o,isBackgroundImageVisible:!!t,isEditing:he,isSelected:D.isSelected(ae,M),onDoubleClick:Ve,onMouseDown:_e,onMouseOver:et,ref:pe=>{pe&&(B.current[gs(o,ae,M)]=pe)},unit:y,x:ae,y:M},gs(o,ae,M)))},M)),t&&c("img",{class:"IntegerGridEditor_Background",onError:d,src:t,style:Ut})]})})}),Qe="TableEditor",uu=()=>ni(`${Qe}.backgroundImage.fileName`,""),hu=()=>ni(`${Qe}.backgroundImage.image`,""),pu=()=>be(`${Qe}.backgroundImage.isVisible`,!0),fu=()=>Ns(`${Qe}.backgroundImage.opacity`,25),o_=t=>ni(`${Qe}.color.value[${t}]`,en[t%en.length]),mu=()=>Ns(`${Qe}.color.opacity`,0),gu=()=>Ie(`${Qe}.columnCommentType`,qs.None,Jb.parse),ic=()=>Ie("TableEditor.table.encoding",F.Hex,Hp.parse),bu=()=>Ns(`${Qe}.indentation`,0),_u=()=>ni(`${Qe}.name`,""),yu=()=>Ie(`${Qe}.rowCommentType`,Vt.None,Yb.parse),vu=()=>Ns(`${Qe}.selectedValue`,0),wu=()=>be(`${Qe}.shouldSpaceValues`,!1),xu=()=>Ns(`${Qe}.size.height`,16),ku=()=>Ns(`${Qe}.size.width`,16),Su=()=>be(`${Qe}.tab.appearance.isVisible`,!0),Cu=()=>be(`${Qe}.tab.settings.isVisible`,!0),Ou=()=>be(`${Qe}.tab.tutorial.isVisible`,!1),nc=()=>Ie(`${Qe}.unit`,re.Byte,hl.parse),Jr=t=>()=>{document.activeElement&&document.activeElement.dispatchEvent(new KeyboardEvent("keydown",{key:t}))},$c=Di?[...vr.map(t=>({label:t,onClick:Jr(t)})),{label:"DEL",onClick:Jr("Delete"),size:"xs"},{label:"",onClick:Jr("Backspace")}]:[];function c_(){return $c.length>0?c("div",{class:"App_Center",children:c(El,{actions:$c,rowSize:9})}):null}function l_(){const t=Oe(null),[e]=ic(),[s,i]=nc(),[a,r]=xu(),[o,l]=ku(),[u,d]=_u(),[p]=bu(),f=Number.isNaN(p)?0:p,[h]=gu(),[g]=yu(),[m]=wu(),[y]=mu(),[_,Z]=uu(),[B,k]=hu(),[O]=fu(),[D]=pu(),[te,we]=vu(),[Be,ne]=St(""),he=w(()=>ne(""),[]),We=w(()=>{var ue;(ue=t.current)==null||ue.clear(),he()},[he]),je=w(()=>{k(""),Z("")},[k,Z]),[xe,$e]=Yo(Io,Po,1e3),Ae=w(()=>{var ue;(ue=t.current)==null||ue.copy()},[]),Ve=w(()=>{var ue;(ue=t.current)==null||ue.paste()},[he,r,d,i,l]),_e=w(ue=>{const[Se,He]=ue;if(He)return ne(He.message);he(),d(Se.name),r(Se.height),l(Se.width),i(Se.unit)},[he,r,d,i,l]),et=ie(()=>[{key:"Tab",onPress:()=>{var Se;return Uc()?Ke((Se=t.current)==null?void 0:Se.focus()):!1}}],[Ae,Ve]);an(et);const Fe=ie(()=>[{icon:Xc,onClick:Ve,tooltip:"Paste"},{icon:xe,onClick:Ae,tooltip:"Copy"},{icon:Ga,onClick:We,tooltip:"Clear"}],[xe,We,Ae,Ve]);return c(Xo,{actions:Fe,label:"Table Editor",children:c("div",{class:"App_SectionCol",children:[Be&&c("div",{class:"App_SectionCluster",children:[c("div",{class:"flex_1"}),c("div",{class:"App_ErrorMessage",children:`Import failed: ${Be}`}),c(ea,{Icon:Ga,onClick:he,tooltip:"Clear"})]}),c(r_,{columnCommentType:h,backgroundImage:D?B:void 0,backgroundImageOpacity:O,colorOpacity:y,encoding:e,height:a,indentation:f,id:Qe,name:u,onBackgroundImageError:je,onCopy:$e,onPaste:_e,onSelect:we,ref:t,rowCommentType:g,shouldSpaceValues:m,unit:s,width:o}),c(c_,{})]})})}function d_(){const[,t]=Su(),[,e]=Cu(),[,s]=Ou(),[i]=Eo(),a=ie(()=>{const r=[];return i&&(r.push({key:"h",onPress:()=>s(jt)}),r.push({key:"s",onPress:()=>e(jt)}),r.push({key:"t",onPress:()=>t(jt)})),r},[t,e,s]);return an(a),null}function u_({fileName:t,onChange:e,placeholder:s}){const i=Oe(null),a=w(()=>e(void 0),[e]),r=w(()=>{var u;(u=i.current)==null||u.click()},[]),o=w(u=>{var d;(u.key==="Enter"||u.key===" ")&&((d=i.current)==null||d.click()),(u.key==="Backspace"||u.key==="Delete")&&a()},[a]),l=w(u=>{u.currentTarget.files&&u.currentTarget.files[0]&&e(u.currentTarget.files[0])},[e]);return c("div",{class:"InputFile",onKeyDown:o,onMouseDown:r,tabIndex:0,children:[c("div",{class:"InputFile_Label",children:t||s}),t&&c(ea,{Icon:Ga,onClick:a,tooltip:"Remove",tooltipPosition:"left"}),c("input",{onChange:l,ref:i,type:"file"})]})}const h_=({isVisible:t})=>t?c(rh,{size:"1em"}):c(ah,{size:"1em"});function p_(){const[t,e]=uu(),[s,i]=hu(),[a,r]=pu(),o=w(()=>{r(jt)},[r]),l=w(u=>{u?(e(u.name),i(URL.createObjectURL(u))):(e(""),i(""))},[i,e]);return c(G,{label:"Background Image",children:c("div",{class:"App_SectionCluster flex_1 overflow_hidden",children:[c(Pt,{label:c(h_,{isVisible:a}),onClick:o,tooltip:a?"Hide":"Show",tooltipPosition:"right"}),c(u_,{fileName:t,onChange:l,placeholder:"Upload image"})]})})}function Pu({max:t,min:e,onChange:s,step:i,value:a}){const r=w(o=>{const l=Number.parseInt(o.currentTarget.value);Number.isNaN(l)||s(l)},[s]);return c("input",{class:"Slider",max:t,min:e,onChange:r,step:i,type:"range",value:a})}function f_(){const[t,e]=fu();return c(G,{label:"Background Image Opacity",children:c(Pu,{max:100,min:0,onChange:e,step:1,value:t})})}const m_=Number.parseInt("FFFFFF",16)/2;function g_({onChange:t,value:e}){const s=w(a=>{t(a.currentTarget.value)},[t]),i=Number.parseInt(e.substring(1),16)<m_?Yi[wt.Dark].neutral1:Yi[wt.Light].neutral1;return c("label",{class:"ColorInput",style:{backgroundColor:e,color:i},children:[c(ch,{size:"1em"}),c("div",{class:"ColorInput_Value",children:e}),c("input",{onChange:s,type:"color",value:e})]})}function b_(){const[t]=ic(),[e]=nc(),[s,i]=vu(),[a,r]=o_(s),o=w(()=>{r(en[s%en.length])},[r,s]);return c(G,{label:"Value Color",children:c("div",{class:"App_SectionCluster flex_1 flex-wrap_wrap",children:[c(Ss,{encoding:t,onChange:i,placeholder:"00",value:s,unit:e}),c(g_,{onChange:r,value:a}),c(Pt,{label:"Reset",onClick:o})]})})}function __(){const[t,e]=mu();return c(G,{label:"Color Opacity",children:c(Pu,{max:100,min:0,onChange:e,step:1,value:t})})}function y_(){const[t,e]=Su();return c(Ct,{isVisible:t,label:"Appearance",onChange:e,children:c("div",{class:"App_SectionCol",children:[c("div",{class:"App_SectionFullRow",children:[c(p_,{}),c(f_,{})]}),c("div",{class:"App_SectionFullRow",children:[c(b_,{}),c(__,{})]})]})})}const v_=[{label:"None",value:qs.None},{label:"Column Number (dec)",value:qs.ColumnNumberDec},{label:"Column Number (hex)",value:qs.ColumnNumberHex},{label:"Column Value (hex)",value:qs.ColumnValueHex}];function w_(){const[t,e]=gu();return c(G,{label:"Column Comment",children:c(Do,{onChange:e,options:v_,placeholder:"Column Comment",value:t})})}const x_=[{label:"Bin",value:F.Bin},{label:"Dec",value:F.Dec},{label:"Hex",value:F.Hex}];function k_(){const[t,e]=ic();return c(G,{label:"Encoding",children:c(ot,{onChange:e,options:x_,value:t})})}function S_(){const[t,e]=bu();return c(G,{label:"Indentation",children:c(Nr,{isInteger:!0,max:100,min:0,onChange:e,placeholder:"0",value:t})})}function C_(){const[t,e]=_u();return c(G,{label:"Table Name",children:c(Yd,{onChange:e,pattern:Hu,placeholder:"Table Name",value:t})})}const O_=[{label:"None",value:Vt.None},{label:"Row Number (dec)",value:Vt.RowNumberDec},{label:"Row Number (hex)",value:Vt.RowNumberHex},{label:"Row Range (hex)",value:Vt.RowRangeHex}];function P_(){const[t,e]=yu();return c(G,{label:"Row Comment",children:c(Do,{onChange:e,options:O_,placeholder:"Row Comment",value:t})})}function I_(){const[t,e]=xu();return c(G,{label:"Height",children:c(Nr,{isInteger:!0,max:50,min:1,onChange:e,placeholder:"1",value:t})})}function A_(){const[t,e]=ku();return c(G,{label:"Width",children:c(Nr,{isInteger:!0,max:50,min:1,onChange:e,placeholder:"1",value:t})})}const T_=[{label:"Yes",value:!0},{label:"No",value:!1}];function E_(){const[t,e]=wu();return c(G,{label:"Space Values",children:c(ot,{onChange:e,options:T_,value:t})})}const R_=[{label:"Byte",value:re.Byte},{label:"Word",value:re.Word}];function D_(){const[t,e]=nc();return c(G,{label:"Unit (Y/W)",children:c(ot,{onChange:e,options:R_,value:t})})}function N_(){const[t,e]=Cu();return c(Ct,{isVisible:t,label:"Settings",onChange:e,children:c("div",{class:"App_SectionCol",children:[c("div",{class:"App_SectionRow",children:[c(k_,{}),c(D_,{}),c(A_,{}),c(I_,{}),c(C_,{})]}),c("div",{class:"App_SectionRow",children:[c(w_,{}),c(P_,{}),c(S_,{}),c(E_,{})]})]})})}const L_=[{name:"Copy",description:"Copy the table to the clipboard via the copy icon button on the top right of the grid. The table will be formatted according to its settings.",keybindings:["Ctrl+C","Cmd+C"]},{name:"Paste",description:'Paste an ASM table from the clipboard into the tool via the paste icon button on the top right of the grid. Every row of the table has to start either with "db" or "dw", no mixed values are admitted. Every row must have the same number of elements. One label is admitted and, if present, will be used as table name. No other ASM code is allowed. Comments will be removed. Any error will cause the operation to fail and display a message below the icon buttons.',keybindings:["Ctrl+V","Cmd+V"]},{name:"Clear",description:"Clear the grid by pressing the X icon button. Clearing the grid sets all values to zero.",keybindings:[]},{name:"Type",description:"Type a valid digit to edit selected cells.",keybindings:["Digit"]},{name:"Backspace ()",description:"Delete the last typed digit in the selection.",keybindings:[]},{name:"Delete (DEL)",description:"It sets the value of the selection to zero.",keybindings:[]},{name:"Movement",description:"Select the next cell in the corresponding direction.",keybindings:["Arrow"]},{name:"Multi-Selection",description:"Select multiple groups of cells at once.",keybindings:["Shift","Ctrl","Cmd"]}],M_=[{name:"Encoding",values:[{type:"Bin",description:"Display table values in binary form."},{type:"Dec",description:"Display table values in decimal form."},{type:"Hex",description:"Display table values in hexadecimal form."}],keybindings:[]},{name:"Unit",values:[{type:"Byte",description:"Display table values in 8-bit. The high byte is preserved and restored once switching back to 16-bit.",keybindings:["Y"]},{type:"Word",description:"Display table values in 16-bit.",keybindings:["W"]}]},{name:"Width",values:[{type:"#Number",description:"Number of columns of the table. If you shrink then expand the table again, the previous column values will be restored."}],keybindings:[]},{name:"Height",values:[{type:"#Number",description:"Number of rows of the table. If you shrink then expand the table again, the previous row values will be restored."}],keybindings:[]},{name:"Table Name",values:[{type:"#Text",description:"Name (label) of the table. The table name can only contain letters, digits, and underscores, it cannot start with a digit, and it can start with any number of periods."}],keybindings:[]},{name:"Column Comment",values:[{type:"None",description:"No comment will be added."},{type:"Column Number (dec)",description:"A comment line will be added on top of the table values when copied, with the index of the column (in decimal) aligned with each column."},{type:"Column Number (hex)",description:"A comment line will be added on top of the table values when copied, with the index of the column (in hexadecimal) aligned with each column."},{type:"Column Value (hex)",description:"A comment line will be added on top of the table values when copied, with the value of the column aligned with each column. The value of the column is the column index if the unit is byte, and the column index times two if the unit is word."}],keybindings:[]},{name:"Row Comment",values:[{type:"None",description:"No comment will be added."},{type:"Row Number (dec)",description:"A comment will be added next to each row when copied, with the index of the row (in decimal)."},{type:"Row Number (hex)",description:"A comment will be added next to each row when copied, with the index of the row (in hexadecimal)."},{type:"Row Range (hex)",description:'A comment will be added next to each row when copied, with the range of values covered by the row. E.g., for the second row of a table of width 8 it will be "8-F".'}],keybindings:[]},{name:"Indentation",values:[{type:"#Number",description:"Number of spaces to prepend to each row while copying it."}],keybindings:[]},{name:"Space Values",values:[{type:"Yes",description:"Add a space between each value on a row while copying the table."},{type:"No",description:"Don't add a space between each value on a row while copying the table."}],keybindings:[]}],B_=[{name:"Background Image",values:[{type:"#File",description:"An image to display as background for the table. You can toggle the image visibility with the icon button."}],keybindings:[]},{name:"Background Image Opacity",values:[{type:"#Number",description:"Opacity for the background image."}],keybindings:[]},{name:"Decimal Value Color",values:[{type:"#Number+Color",description:"Background color for cells with the specified value. Every value has a corresponding color that's useful to distinguish blocks of values. Selecting a cell in the table will set its value in this editor. Use the reset button to restore the default color for the value."}],keybindings:[]},{name:"Color Opacity",values:[{type:"#Number",description:"Opacity for the background background colors of the cells."}],keybindings:[]}],$_=[{name:"Settings",description:"Toggle settings tab visibility.",keybindings:["S"]},{name:"Appearance",description:"Toggle appearance tab visibility.",keybindings:["T"]},{name:"Instructions",description:"Toggle instructions tab visibility.",keybindings:["H"]}];function V_(){const[t,e]=Ou();return c(ee,{isVisible:t,onChangeVisibility:e,children:[c(ee.Section,{title:"General",children:c("div",{children:"Click on the table to select cells and type to modify them. You can use the icon buttons on the top right of the grid to copy, paste, and clear the table."})}),c(ee.Section,{title:"Actions",children:[c("div",{children:"Actions that can be performed while something is selected in the table."}),c(ee.Actions,{actions:L_})]}),c(ee.Section,{title:"Settings",children:[c("div",{children:"Settings used for visualization and for exporting the table."}),c(ee.Settings,{settings:M_})]}),c(ee.Section,{title:"Appearance",children:[c("div",{children:"Settings used for visualization only."}),c(ee.Settings,{settings:B_})]}),c(ee.Section,{title:"Visibility",children:[c("div",{children:"Shortcuts to toggle sections' visibility."}),c(ee.Actions,{actions:$_})]})]})}function F_(){return c("div",{class:"App_Module",children:[c(d_,{}),c("div",{class:"App_ModuleBlock",children:c(l_,{})}),c("div",{class:"App_ModuleBlock",children:[c(N_,{}),c(y_,{}),c(V_,{})]})]})}const So=[{Content:bg,Icon:th,id:"/w/calculator",name:"Calculator"},{Content:F_,Icon:uh,id:"/w/table-editor",name:"Table Editor"},{Content:Fb,Icon:ih,id:"/w/emulator",name:"Emulator"}],Iu=[{Content:Zp,Icon:dh,id:"/settings",name:"Settings"},{Content:Cp,Icon:oh,id:"/info",name:"Info"}],Mn=[...So,...Iu];function z_(){const[t,e]=Ep(),s=w(()=>{const o=window.location.hash.substring(1),l=Mn.some(u=>u.id===o)?o:Mn.some(u=>u.id===t)?t:Mn[0].id;return o!==l&&(window.location.hash=`#${l}`),t!==l&&e(l),l},[e,t]),[i,a]=St(s),r=w(o=>{a(o),window.location.hash=`#${o}`},[]);return tn(()=>{const o=()=>a(s());return window.addEventListener("popstate",o),()=>window.removeEventListener("popstate",o)},[s]),[i,r]}function Vc({index:t,isSelected:e,module:s,onClick:i}){return c("div",{class:"App_Menu_Item",children:c(Pt,{isBorderless:!0,isSelected:e,label:c(s.Icon,{size:"2em"}),onClick:i,tooltip:`${s.name} (Ctrl+${t})`,tooltipPosition:"right"})})}function Q_(){Tp();const[t,e]=z_(),s=ie(()=>{var a;return((a=Mn.find(r=>r.id===t))==null?void 0:a.Content)??(()=>null)},[t]),i=ie(()=>Mn.flatMap((a,r)=>[{key:`${r+1}`,ctrl:!0,onPress:()=>Ke(e(a.id))},{key:`${r+1}`,meta:!0,onPress:()=>Ke(e(a.id))}]),[e]);return an(i),c("div",{class:"App",children:[c("div",{class:"App_Menu",children:[So.map((a,r)=>c(Vc,{index:r+1,isSelected:a.id===t,module:a,onClick:()=>e(a.id)},a.id)),c("div",{class:"flex_1"}),Iu.map((a,r)=>c("div",{class:"App_Menu_Item",children:c(Vc,{index:So.length+r+1,isSelected:a.id===t,module:a,onClick:()=>e(a.id)},a.id)},a.id))]}),c("div",{class:"App_Content",children:c(s,{})})]})}Mu(c(Q_,{}),document.getElementById("app"));
